import{B as It,p as ba,a as p1}from"./chunk-B8u9Xqmg.js";function m1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fm={exports:{}},Qo={},dm={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Us=Symbol.for("react.element"),g1=Symbol.for("react.portal"),y1=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),x1=Symbol.for("react.profiler"),w1=Symbol.for("react.provider"),k1=Symbol.for("react.context"),S1=Symbol.for("react.forward_ref"),C1=Symbol.for("react.suspense"),b1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),Df=Symbol.iterator;function E1(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var pm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mm=Object.assign,gm={};function Ci(t,e,n){this.props=t,this.context=e,this.refs=gm,this.updater=n||pm}Ci.prototype.isReactComponent={};Ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ym(){}ym.prototype=Ci.prototype;function nh(t,e,n){this.props=t,this.context=e,this.refs=gm,this.updater=n||pm}var rh=nh.prototype=new ym;rh.constructor=nh;mm(rh,Ci.prototype);rh.isPureReactComponent=!0;var Pf=Array.isArray,vm=Object.prototype.hasOwnProperty,ih={current:null},xm={key:!0,ref:!0,__self:!0,__source:!0};function wm(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)vm.call(e,r)&&!xm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Us,type:t,key:s,ref:l,props:i,_owner:ih.current}}function M1(t,e){return{$$typeof:Us,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Us}function T1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lf=/\/+/g;function Aa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T1(""+t.key):e.toString(36)}function Hl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Us:case g1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Aa(l,0):r,Pf(i)?(n="",t!=null&&(n=t.replace(Lf,"$&/")+"/"),Hl(i,e,n,"",function(u){return u})):i!=null&&(sh(i)&&(i=M1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Lf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Pf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Aa(s,o);l+=Hl(s,e,n,a,i)}else if(a=E1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Aa(s,o++),l+=Hl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function il(t,e,n){if(t==null)return t;var r=[],i=0;return Hl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function N1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rt={current:null},Wl={transition:null},O1={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:ih};function km(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:il,forEach:function(t,e,n){il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return il(t,function(){e++}),e},toArray:function(t){return il(t,function(e){return e})||[]},only:function(t){if(!sh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Ci;K.Fragment=y1;K.Profiler=x1;K.PureComponent=nh;K.StrictMode=v1;K.Suspense=C1;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O1;K.act=km;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=ih.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)vm.call(e,a)&&!xm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Us,type:t.type,key:i,ref:s,props:r,_owner:l}};K.createContext=function(t){return t={$$typeof:k1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:w1,_context:t},t.Consumer=t};K.createElement=wm;K.createFactory=function(t){var e=wm.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:S1,render:t}};K.isValidElement=sh;K.lazy=function(t){return{$$typeof:A1,_payload:{_status:-1,_result:t},_init:N1}};K.memo=function(t,e){return{$$typeof:b1,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};K.unstable_act=km;K.useCallback=function(t,e){return rt.current.useCallback(t,e)};K.useContext=function(t){return rt.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return rt.current.useDeferredValue(t)};K.useEffect=function(t,e){return rt.current.useEffect(t,e)};K.useId=function(){return rt.current.useId()};K.useImperativeHandle=function(t,e,n){return rt.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return rt.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return rt.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return rt.current.useMemo(t,e)};K.useReducer=function(t,e,n){return rt.current.useReducer(t,e,n)};K.useRef=function(t){return rt.current.useRef(t)};K.useState=function(t){return rt.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return rt.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return rt.current.useTransition()};K.version="18.3.1";dm.exports=K;var P=dm.exports;const D1=m1(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=P,L1=Symbol.for("react.element"),R1=Symbol.for("react.fragment"),j1=Object.prototype.hasOwnProperty,B1=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I1={key:!0,ref:!0,__self:!0,__source:!0};function Sm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)j1.call(e,r)&&!I1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:L1,type:t,key:s,ref:l,props:i,_owner:B1.current}}Qo.Fragment=R1;Qo.jsx=Sm;Qo.jsxs=Sm;fm.exports=Qo;var d=fm.exports,xu={},Cm={exports:{}},Ct={},bm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,_){var U=D.length;D.push(_);e:for(;0<U;){var Y=U-1>>>1,G=D[Y];if(0<i(G,_))D[Y]=_,D[U]=G,U=Y;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var _=D[0],U=D.pop();if(U!==_){D[0]=U;e:for(var Y=0,G=D.length,fe=G>>>1;Y<fe;){var De=2*(Y+1)-1,xe=D[De],F=De+1,Se=D[F];if(0>i(xe,U))F<G&&0>i(Se,xe)?(D[Y]=Se,D[F]=U,Y=F):(D[Y]=xe,D[De]=U,Y=De);else if(F<G&&0>i(Se,U))D[Y]=Se,D[F]=U,Y=F;else break e}}return _}function i(D,_){var U=D.sortIndex-_.sortIndex;return U!==0?U:D.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,p=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=D)r(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function S(D){if(v=!1,x(D),!g)if(n(a)!==null)g=!0,Ze(C);else{var _=n(u);_!==null&&st(S,_.startTime-D)}}function C(D,_){g=!1,v&&(v=!1,m(N),N=-1),p=!0;var U=f;try{for(x(_),h=n(a);h!==null&&(!(h.expirationTime>_)||D&&!W());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var G=Y(h.expirationTime<=_);_=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(a)&&r(a),x(_)}else r(a);h=n(a)}if(h!==null)var fe=!0;else{var De=n(u);De!==null&&st(S,De.startTime-_),fe=!1}return fe}finally{h=null,f=U,p=!1}}var A=!1,b=null,N=-1,H=5,j=-1;function W(){return!(t.unstable_now()-j<H)}function z(){if(b!==null){var D=t.unstable_now();j=D;var _=!0;try{_=b(!0,D)}finally{_?q():(A=!1,b=null)}}else A=!1}var q;if(typeof y=="function")q=function(){y(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,he=ee.port2;ee.port1.onmessage=z,q=function(){he.postMessage(null)}}else q=function(){w(z,0)};function Ze(D){b=D,A||(A=!0,q())}function st(D,_){N=w(function(){D(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,Ze(C))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var U=f;f=_;try{return D()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,_){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=f;f=D;try{return _()}finally{f=U}},t.unstable_scheduleCallback=function(D,_,U){var Y=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Y+U:Y):U=Y,D){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=U+G,D={id:c++,callback:_,priorityLevel:D,startTime:U,expirationTime:G,sortIndex:-1},U>Y?(D.sortIndex=U,e(u,D),n(a)===null&&D===n(u)&&(v?(m(N),N=-1):v=!0,st(S,U-Y))):(D.sortIndex=G,e(a,D),g||p||(g=!0,Ze(C))),D},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(D){var _=f;return function(){var U=f;f=_;try{return D.apply(this,arguments)}finally{f=U}}}})(Am);bm.exports=Am;var F1=bm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=P,wt=F1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Em=new Set,gs={};function Pr(t,e){ui(t,e),ui(t+"Capture",e)}function ui(t,e){for(gs[t]=e,t=0;t<e.length;t++)Em.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=Object.prototype.hasOwnProperty,_1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rf={},jf={};function H1(t){return wu.call(jf,t)?!0:wu.call(Rf,t)?!1:_1.test(t)?jf[t]=!0:(Rf[t]=!0,!1)}function W1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V1(t,e,n,r){if(e===null||typeof e>"u"||W1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function oh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lh,oh);We[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lh,oh);We[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lh,oh);We[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function ah(t,e,n,r){var i=We.hasOwnProperty(e)?We[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V1(e,n,i,r)&&(n=null),r||i===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mn=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),Fr=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),uh=Symbol.for("react.strict_mode"),ku=Symbol.for("react.profiler"),Mm=Symbol.for("react.provider"),Tm=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),Su=Symbol.for("react.suspense"),Cu=Symbol.for("react.suspense_list"),hh=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),Nm=Symbol.for("react.offscreen"),Bf=Symbol.iterator;function Ri(t){return t===null||typeof t!="object"?null:(t=Bf&&t[Bf]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,Ea;function qi(t){if(Ea===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ea=e&&e[1]||""}return`
`+Ea+t}var Ma=!1;function Ta(t,e){if(!t||Ma)return"";Ma=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{Ma=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qi(t):""}function U1(t){switch(t.tag){case 5:return qi(t.type);case 16:return qi("Lazy");case 13:return qi("Suspense");case 19:return qi("SuspenseList");case 0:case 2:case 15:return t=Ta(t.type,!1),t;case 11:return t=Ta(t.type.render,!1),t;case 1:return t=Ta(t.type,!0),t;default:return""}}function bu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zr:return"Fragment";case Fr:return"Portal";case ku:return"Profiler";case uh:return"StrictMode";case Su:return"Suspense";case Cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tm:return(t.displayName||"Context")+".Consumer";case Mm:return(t._context.displayName||"Context")+".Provider";case ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hh:return e=t.displayName||null,e!==null?e:bu(t.type)||"Memo";case On:e=t._payload,t=t._init;try{return bu(t(e))}catch{}}return null}function $1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bu(e);case 8:return e===uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Om(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K1(t){var e=Om(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ll(t){t._valueTracker||(t._valueTracker=K1(t))}function Dm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Om(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Au(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function If(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pm(t,e){e=e.checked,e!=null&&ah(t,"checked",e,!1)}function Eu(t,e){Pm(t,e);var n=Jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mu(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mu(t,e,n){(e!=="number"||lo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function Zr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Tu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Gi(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function Lm(t,e){var n=Jn(e.value),r=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _f(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ol,jm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ys(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q1=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(t){q1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),es[e]=es[t]})});function Bm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||es.hasOwnProperty(t)&&es[t]?(""+e).trim():e+"px"}function Im(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Bm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G1=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(t,e){if(e){if(G1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Du(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=null;function fh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lu=null,ei=null,ti=null;function Hf(t){if(t=qs(t)){if(typeof Lu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=ea(e),Lu(t.stateNode,t.type,e))}}function Fm(t){ei?ti?ti.push(t):ti=[t]:ei=t}function zm(){if(ei){var t=ei,e=ti;if(ti=ei=null,Hf(t),e)for(t=0;t<e.length;t++)Hf(e[t])}}function _m(t,e){return t(e)}function Hm(){}var Na=!1;function Wm(t,e,n){if(Na)return t(e,n);Na=!0;try{return _m(t,e,n)}finally{Na=!1,(ei!==null||ti!==null)&&(Hm(),zm())}}function vs(t,e){var n=t.stateNode;if(n===null)return null;var r=ea(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Ru=!1;if(Sn)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Ru=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Ru=!1}function Q1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ts=!1,oo=null,ao=!1,ju=null,Y1={onError:function(t){ts=!0,oo=t}};function J1(t,e,n,r,i,s,l,o,a){ts=!1,oo=null,Q1.apply(Y1,arguments)}function X1(t,e,n,r,i,s,l,o,a){if(J1.apply(this,arguments),ts){if(ts){var u=oo;ts=!1,oo=null}else throw Error(M(198));ao||(ao=!0,ju=u)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wf(t){if(Lr(t)!==t)throw Error(M(188))}function Z1(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wf(i),t;if(s===r)return Wf(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Um(t){return t=Z1(t),t!==null?$m(t):null}function $m(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$m(t);if(e!==null)return e;t=t.sibling}return null}var Km=wt.unstable_scheduleCallback,Vf=wt.unstable_cancelCallback,ex=wt.unstable_shouldYield,tx=wt.unstable_requestPaint,ke=wt.unstable_now,nx=wt.unstable_getCurrentPriorityLevel,dh=wt.unstable_ImmediatePriority,qm=wt.unstable_UserBlockingPriority,uo=wt.unstable_NormalPriority,rx=wt.unstable_LowPriority,Gm=wt.unstable_IdlePriority,Yo=null,un=null;function ix(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Yo,t,void 0,(t.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:ox,sx=Math.log,lx=Math.LN2;function ox(t){return t>>>=0,t===0?32:31-(sx(t)/lx|0)|0}var al=64,ul=4194304;function Qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function co(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Qi(o):(s&=l,s!==0&&(r=Qi(s)))}else l=n&~i,l!==0?r=Qi(l):s!==0&&(r=Qi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vt(e),i=1<<n,r|=t[n],e&=~i;return r}function ax(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ux(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Vt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=ax(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Bu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qm(){var t=al;return al<<=1,!(al&4194240)&&(al=64),t}function Oa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $s(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vt(e),t[e]=n}function cx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ph(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ne=0;function Ym(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jm,mh,Xm,Zm,eg,Iu=!1,cl=[],Wn=null,Vn=null,Un=null,xs=new Map,ws=new Map,Rn=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uf(t,e){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":xs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(e.pointerId)}}function Bi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qs(e),e!==null&&mh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fx(t,e,n,r,i){switch(e){case"focusin":return Wn=Bi(Wn,t,e,n,r,i),!0;case"dragenter":return Vn=Bi(Vn,t,e,n,r,i),!0;case"mouseover":return Un=Bi(Un,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xs.set(s,Bi(xs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ws.set(s,Bi(ws.get(s)||null,t,e,n,r,i)),!0}return!1}function tg(t){var e=pr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=Vm(n),e!==null){t.blockedOn=e,eg(t.priority,function(){Xm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pu=r,n.target.dispatchEvent(r),Pu=null}else return e=qs(n),e!==null&&mh(e),t.blockedOn=n,!1;e.shift()}return!0}function $f(t,e,n){Vl(t)&&n.delete(e)}function dx(){Iu=!1,Wn!==null&&Vl(Wn)&&(Wn=null),Vn!==null&&Vl(Vn)&&(Vn=null),Un!==null&&Vl(Un)&&(Un=null),xs.forEach($f),ws.forEach($f)}function Ii(t,e){t.blockedOn===e&&(t.blockedOn=null,Iu||(Iu=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,dx)))}function ks(t){function e(i){return Ii(i,t)}if(0<cl.length){Ii(cl[0],t);for(var n=1;n<cl.length;n++){var r=cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wn!==null&&Ii(Wn,t),Vn!==null&&Ii(Vn,t),Un!==null&&Ii(Un,t),xs.forEach(e),ws.forEach(e),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)tg(n),n.blockedOn===null&&Rn.shift()}var ni=Mn.ReactCurrentBatchConfig,ho=!0;function px(t,e,n,r){var i=ne,s=ni.transition;ni.transition=null;try{ne=1,gh(t,e,n,r)}finally{ne=i,ni.transition=s}}function mx(t,e,n,r){var i=ne,s=ni.transition;ni.transition=null;try{ne=4,gh(t,e,n,r)}finally{ne=i,ni.transition=s}}function gh(t,e,n,r){if(ho){var i=Fu(t,e,n,r);if(i===null)_a(t,e,r,fo,n),Uf(t,r);else if(fx(i,t,e,n,r))r.stopPropagation();else if(Uf(t,r),e&4&&-1<hx.indexOf(t)){for(;i!==null;){var s=qs(i);if(s!==null&&Jm(s),s=Fu(t,e,n,r),s===null&&_a(t,e,r,fo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _a(t,e,r,null,n)}}var fo=null;function Fu(t,e,n,r){if(fo=null,t=fh(r),t=pr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fo=t,null}function ng(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nx()){case dh:return 1;case qm:return 4;case uo:case rx:return 16;case Gm:return 536870912;default:return 16}default:return 16}}var In=null,yh=null,Ul=null;function rg(){if(Ul)return Ul;var t,e=yh,n=e.length,r,i="value"in In?In.value:In.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Ul=i.slice(t,1<r?1-r:void 0)}function $l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hl(){return!0}function Kf(){return!1}function bt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hl:Kf,this.isPropagationStopped=Kf,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),e}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=bt(bi),Ks=ye({},bi,{view:0,detail:0}),gx=bt(Ks),Da,Pa,Fi,Jo=ye({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fi&&(Fi&&t.type==="mousemove"?(Da=t.screenX-Fi.screenX,Pa=t.screenY-Fi.screenY):Pa=Da=0,Fi=t),Da)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),qf=bt(Jo),yx=ye({},Jo,{dataTransfer:0}),vx=bt(yx),xx=ye({},Ks,{relatedTarget:0}),La=bt(xx),wx=ye({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),kx=bt(wx),Sx=ye({},bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cx=bt(Sx),bx=ye({},bi,{data:0}),Gf=bt(bx),Ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ex={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mx[t])?!!e[t]:!1}function xh(){return Tx}var Nx=ye({},Ks,{key:function(t){if(t.key){var e=Ax[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ex[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(t){return t.type==="keypress"?$l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ox=bt(Nx),Dx=ye({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=bt(Dx),Px=ye({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),Lx=bt(Px),Rx=ye({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),jx=bt(Rx),Bx=ye({},Jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ix=bt(Bx),Fx=[9,13,27,32],wh=Sn&&"CompositionEvent"in window,ns=null;Sn&&"documentMode"in document&&(ns=document.documentMode);var zx=Sn&&"TextEvent"in window&&!ns,ig=Sn&&(!wh||ns&&8<ns&&11>=ns),Yf=" ",Jf=!1;function sg(t,e){switch(t){case"keyup":return Fx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _r=!1;function _x(t,e){switch(t){case"compositionend":return lg(e);case"keypress":return e.which!==32?null:(Jf=!0,Yf);case"textInput":return t=e.data,t===Yf&&Jf?null:t;default:return null}}function Hx(t,e){if(_r)return t==="compositionend"||!wh&&sg(t,e)?(t=rg(),Ul=yh=In=null,_r=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ig&&e.locale!=="ko"?null:e.data;default:return null}}var Wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wx[t.type]:e==="textarea"}function og(t,e,n,r){Fm(r),e=po(e,"onChange"),0<e.length&&(n=new vh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rs=null,Ss=null;function Vx(t){vg(t,0)}function Xo(t){var e=Vr(t);if(Dm(e))return t}function Ux(t,e){if(t==="change")return e}var ag=!1;if(Sn){var Ra;if(Sn){var ja="oninput"in document;if(!ja){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),ja=typeof Zf.oninput=="function"}Ra=ja}else Ra=!1;ag=Ra&&(!document.documentMode||9<document.documentMode)}function ed(){rs&&(rs.detachEvent("onpropertychange",ug),Ss=rs=null)}function ug(t){if(t.propertyName==="value"&&Xo(Ss)){var e=[];og(e,Ss,t,fh(t)),Wm(Vx,e)}}function $x(t,e,n){t==="focusin"?(ed(),rs=e,Ss=n,rs.attachEvent("onpropertychange",ug)):t==="focusout"&&ed()}function Kx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xo(Ss)}function qx(t,e){if(t==="click")return Xo(e)}function Gx(t,e){if(t==="input"||t==="change")return Xo(e)}function Qx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:Qx;function Cs(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wu.call(e,i)||!$t(t[i],e[i]))return!1}return!0}function td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nd(t,e){var n=td(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=td(n)}}function cg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hg(){for(var t=window,e=lo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lo(t.document)}return e}function kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yx(t){var e=hg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cg(n.ownerDocument.documentElement,n)){if(r!==null&&kh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nd(n,s);var l=nd(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jx=Sn&&"documentMode"in document&&11>=document.documentMode,Hr=null,zu=null,is=null,_u=!1;function rd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_u||Hr==null||Hr!==lo(r)||(r=Hr,"selectionStart"in r&&kh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),is&&Cs(is,r)||(is=r,r=po(zu,"onSelect"),0<r.length&&(e=new vh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hr)))}function fl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wr={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},Ba={},fg={};Sn&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function Zo(t){if(Ba[t])return Ba[t];if(!Wr[t])return t;var e=Wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fg)return Ba[t]=e[n];return t}var dg=Zo("animationend"),pg=Zo("animationiteration"),mg=Zo("animationstart"),gg=Zo("transitionend"),yg=new Map,id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(t,e){yg.set(t,e),Pr(e,[t])}for(var Ia=0;Ia<id.length;Ia++){var Fa=id[Ia],Xx=Fa.toLowerCase(),Zx=Fa[0].toUpperCase()+Fa.slice(1);sr(Xx,"on"+Zx)}sr(dg,"onAnimationEnd");sr(pg,"onAnimationIteration");sr(mg,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(gg,"onTransitionEnd");ui("onMouseEnter",["mouseout","mouseover"]);ui("onMouseLeave",["mouseout","mouseover"]);ui("onPointerEnter",["pointerout","pointerover"]);ui("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function sd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X1(r,e,void 0,t),t.currentTarget=null}function vg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;sd(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;sd(i,o,u),s=a}}}if(ao)throw t=ju,ao=!1,ju=null,t}function ae(t,e){var n=e[$u];n===void 0&&(n=e[$u]=new Set);var r=t+"__bubble";n.has(r)||(xg(e,t,2,!1),n.add(r))}function za(t,e,n){var r=0;e&&(r|=4),xg(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function bs(t){if(!t[dl]){t[dl]=!0,Em.forEach(function(n){n!=="selectionchange"&&(ew.has(n)||za(n,!1,t),za(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,za("selectionchange",!1,e))}}function xg(t,e,n,r){switch(ng(e)){case 1:var i=px;break;case 4:i=mx;break;default:i=gh}n=i.bind(null,e,n,t),i=void 0,!Ru||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _a(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=pr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Wm(function(){var u=s,c=fh(n),h=[];e:{var f=yg.get(t);if(f!==void 0){var p=vh,g=t;switch(t){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":p=Ox;break;case"focusin":g="focus",p=La;break;case"focusout":g="blur",p=La;break;case"beforeblur":case"afterblur":p=La;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Lx;break;case dg:case pg:case mg:p=kx;break;case gg:p=jx;break;case"scroll":p=gx;break;case"wheel":p=Ix;break;case"copy":case"cut":case"paste":p=Cx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qf}var v=(e&4)!==0,w=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=vs(y,m),S!=null&&v.push(As(y,S,x)))),w)break;y=y.return}0<v.length&&(f=new p(f,g,null,n,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Pu&&(g=n.relatedTarget||n.fromElement)&&(pr(g)||g[Cn]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?pr(g):null,g!==null&&(w=Lr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=qf,S="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Qf,S="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?f:Vr(p),x=g==null?f:Vr(g),f=new v(S,y+"leave",p,n,c),f.target=w,f.relatedTarget=x,S=null,pr(c)===u&&(v=new v(m,y+"enter",g,n,c),v.target=x,v.relatedTarget=w,S=v),w=S,p&&g)t:{for(v=p,m=g,y=0,x=v;x;x=Rr(x))y++;for(x=0,S=m;S;S=Rr(S))x++;for(;0<y-x;)v=Rr(v),y--;for(;0<x-y;)m=Rr(m),x--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=Rr(v),m=Rr(m)}v=null}else v=null;p!==null&&ld(h,f,p,v,!1),g!==null&&w!==null&&ld(h,w,g,v,!0)}}e:{if(f=u?Vr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Ux;else if(Xf(f))if(ag)C=Gx;else{C=Kx;var A=$x}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=qx);if(C&&(C=C(t,u))){og(h,C,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Mu(f,"number",f.value)}switch(A=u?Vr(u):window,t){case"focusin":(Xf(A)||A.contentEditable==="true")&&(Hr=A,zu=u,is=null);break;case"focusout":is=zu=Hr=null;break;case"mousedown":_u=!0;break;case"contextmenu":case"mouseup":case"dragend":_u=!1,rd(h,n,c);break;case"selectionchange":if(Jx)break;case"keydown":case"keyup":rd(h,n,c)}var b;if(wh)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else _r?sg(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(ig&&n.locale!=="ko"&&(_r||N!=="onCompositionStart"?N==="onCompositionEnd"&&_r&&(b=rg()):(In=c,yh="value"in In?In.value:In.textContent,_r=!0)),A=po(u,N),0<A.length&&(N=new Gf(N,t,null,n,c),h.push({event:N,listeners:A}),b?N.data=b:(b=lg(n),b!==null&&(N.data=b)))),(b=zx?_x(t,n):Hx(t,n))&&(u=po(u,"onBeforeInput"),0<u.length&&(c=new Gf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}vg(h,e)})}function As(t,e,n){return{instance:t,listener:e,currentTarget:n}}function po(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vs(t,n),s!=null&&r.unshift(As(t,s,i)),s=vs(t,e),s!=null&&r.push(As(t,s,i))),t=t.return}return r}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ld(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=vs(n,s),a!=null&&l.unshift(As(n,a,o))):i||(a=vs(n,s),a!=null&&l.push(As(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var tw=/\r\n?/g,nw=/\u0000|\uFFFD/g;function od(t){return(typeof t=="string"?t:""+t).replace(tw,`
`).replace(nw,"")}function pl(t,e,n){if(e=od(e),od(t)!==e&&n)throw Error(M(425))}function mo(){}var Hu=null,Wu=null;function Vu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,rw=typeof clearTimeout=="function"?clearTimeout:void 0,ad=typeof Promise=="function"?Promise:void 0,iw=typeof queueMicrotask=="function"?queueMicrotask:typeof ad<"u"?function(t){return ad.resolve(null).then(t).catch(sw)}:Uu;function sw(t){setTimeout(function(){throw t})}function Ha(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ks(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ks(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ud(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),rn="__reactFiber$"+Ai,Es="__reactProps$"+Ai,Cn="__reactContainer$"+Ai,$u="__reactEvents$"+Ai,lw="__reactListeners$"+Ai,ow="__reactHandles$"+Ai;function pr(t){var e=t[rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cn]||n[rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ud(t);t!==null;){if(n=t[rn])return n;t=ud(t)}return e}t=n,n=t.parentNode}return null}function qs(t){return t=t[rn]||t[Cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function ea(t){return t[Es]||null}var Ku=[],Ur=-1;function lr(t){return{current:t}}function ce(t){0>Ur||(t.current=Ku[Ur],Ku[Ur]=null,Ur--)}function le(t,e){Ur++,Ku[Ur]=t.current,t.current=e}var Xn={},Je=lr(Xn),ut=lr(!1),Sr=Xn;function ci(t,e){var n=t.type.contextTypes;if(!n)return Xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ct(t){return t=t.childContextTypes,t!=null}function go(){ce(ut),ce(Je)}function cd(t,e,n){if(Je.current!==Xn)throw Error(M(168));le(Je,e),le(ut,n)}function wg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,$1(t)||"Unknown",i));return ye({},n,r)}function yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xn,Sr=Je.current,le(Je,t),le(ut,ut.current),!0}function hd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=wg(t,e,Sr),r.__reactInternalMemoizedMergedChildContext=t,ce(ut),ce(Je),le(Je,t)):ce(ut),le(ut,n)}var mn=null,ta=!1,Wa=!1;function kg(t){mn===null?mn=[t]:mn.push(t)}function aw(t){ta=!0,kg(t)}function or(){if(!Wa&&mn!==null){Wa=!0;var t=0,e=ne;try{var n=mn;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,ta=!1}catch(i){throw mn!==null&&(mn=mn.slice(t+1)),Km(dh,or),i}finally{ne=e,Wa=!1}}return null}var $r=[],Kr=0,vo=null,xo=0,At=[],Et=0,Cr=null,yn=1,vn="";function hr(t,e){$r[Kr++]=xo,$r[Kr++]=vo,vo=t,xo=e}function Sg(t,e,n){At[Et++]=yn,At[Et++]=vn,At[Et++]=Cr,Cr=t;var r=yn;t=vn;var i=32-Vt(r)-1;r&=~(1<<i),n+=1;var s=32-Vt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,yn=1<<32-Vt(e)+i|n<<i|r,vn=s+t}else yn=1<<s|n<<i|r,vn=t}function Sh(t){t.return!==null&&(hr(t,1),Sg(t,1,0))}function Ch(t){for(;t===vo;)vo=$r[--Kr],$r[Kr]=null,xo=$r[--Kr],$r[Kr]=null;for(;t===Cr;)Cr=At[--Et],At[Et]=null,vn=At[--Et],At[Et]=null,yn=At[--Et],At[Et]=null}var xt=null,vt=null,de=!1,Ht=null;function Cg(t,e){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,vt=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cr!==null?{id:yn,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,vt=null,!0):!1;default:return!1}}function qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gu(t){if(de){var e=vt;if(e){var n=e;if(!fd(t,e)){if(qu(t))throw Error(M(418));e=$n(n.nextSibling);var r=xt;e&&fd(t,e)?Cg(r,n):(t.flags=t.flags&-4097|2,de=!1,xt=t)}}else{if(qu(t))throw Error(M(418));t.flags=t.flags&-4097|2,de=!1,xt=t}}}function dd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function ml(t){if(t!==xt)return!1;if(!de)return dd(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vu(t.type,t.memoizedProps)),e&&(e=vt)){if(qu(t))throw bg(),Error(M(418));for(;e;)Cg(t,e),e=$n(e.nextSibling)}if(dd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=xt?$n(t.stateNode.nextSibling):null;return!0}function bg(){for(var t=vt;t;)t=$n(t.nextSibling)}function hi(){vt=xt=null,de=!1}function bh(t){Ht===null?Ht=[t]:Ht.push(t)}var uw=Mn.ReactCurrentBatchConfig;function zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pd(t){var e=t._init;return e(t._payload)}function Ag(t){function e(m,y){if(t){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Qn(m,y),m.index=0,m.sibling=null,m}function s(m,y,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function l(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,y,x,S){return y===null||y.tag!==6?(y=Qa(x,m.mode,S),y.return=m,y):(y=i(y,x),y.return=m,y)}function a(m,y,x,S){var C=x.type;return C===zr?c(m,y,x.props.children,S,x.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===On&&pd(C)===y.type)?(S=i(y,x.props),S.ref=zi(m,y,x),S.return=m,S):(S=Xl(x.type,x.key,x.props,null,m.mode,S),S.ref=zi(m,y,x),S.return=m,S)}function u(m,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Ya(x,m.mode,S),y.return=m,y):(y=i(y,x.children||[]),y.return=m,y)}function c(m,y,x,S,C){return y===null||y.tag!==7?(y=wr(x,m.mode,S,C),y.return=m,y):(y=i(y,x),y.return=m,y)}function h(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qa(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case sl:return x=Xl(y.type,y.key,y.props,null,m.mode,x),x.ref=zi(m,null,y),x.return=m,x;case Fr:return y=Ya(y,m.mode,x),y.return=m,y;case On:var S=y._init;return h(m,S(y._payload),x)}if(Gi(y)||Ri(y))return y=wr(y,m.mode,x,null),y.return=m,y;gl(m,y)}return null}function f(m,y,x,S){var C=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:o(m,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sl:return x.key===C?a(m,y,x,S):null;case Fr:return x.key===C?u(m,y,x,S):null;case On:return C=x._init,f(m,y,C(x._payload),S)}if(Gi(x)||Ri(x))return C!==null?null:c(m,y,x,S,null);gl(m,x)}return null}function p(m,y,x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,o(y,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case sl:return m=m.get(S.key===null?x:S.key)||null,a(y,m,S,C);case Fr:return m=m.get(S.key===null?x:S.key)||null,u(y,m,S,C);case On:var A=S._init;return p(m,y,x,A(S._payload),C)}if(Gi(S)||Ri(S))return m=m.get(x)||null,c(y,m,S,C,null);gl(y,S)}return null}function g(m,y,x,S){for(var C=null,A=null,b=y,N=y=0,H=null;b!==null&&N<x.length;N++){b.index>N?(H=b,b=null):H=b.sibling;var j=f(m,b,x[N],S);if(j===null){b===null&&(b=H);break}t&&b&&j.alternate===null&&e(m,b),y=s(j,y,N),A===null?C=j:A.sibling=j,A=j,b=H}if(N===x.length)return n(m,b),de&&hr(m,N),C;if(b===null){for(;N<x.length;N++)b=h(m,x[N],S),b!==null&&(y=s(b,y,N),A===null?C=b:A.sibling=b,A=b);return de&&hr(m,N),C}for(b=r(m,b);N<x.length;N++)H=p(b,m,N,x[N],S),H!==null&&(t&&H.alternate!==null&&b.delete(H.key===null?N:H.key),y=s(H,y,N),A===null?C=H:A.sibling=H,A=H);return t&&b.forEach(function(W){return e(m,W)}),de&&hr(m,N),C}function v(m,y,x,S){var C=Ri(x);if(typeof C!="function")throw Error(M(150));if(x=C.call(x),x==null)throw Error(M(151));for(var A=C=null,b=y,N=y=0,H=null,j=x.next();b!==null&&!j.done;N++,j=x.next()){b.index>N?(H=b,b=null):H=b.sibling;var W=f(m,b,j.value,S);if(W===null){b===null&&(b=H);break}t&&b&&W.alternate===null&&e(m,b),y=s(W,y,N),A===null?C=W:A.sibling=W,A=W,b=H}if(j.done)return n(m,b),de&&hr(m,N),C;if(b===null){for(;!j.done;N++,j=x.next())j=h(m,j.value,S),j!==null&&(y=s(j,y,N),A===null?C=j:A.sibling=j,A=j);return de&&hr(m,N),C}for(b=r(m,b);!j.done;N++,j=x.next())j=p(b,m,N,j.value,S),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?N:j.key),y=s(j,y,N),A===null?C=j:A.sibling=j,A=j);return t&&b.forEach(function(z){return e(m,z)}),de&&hr(m,N),C}function w(m,y,x,S){if(typeof x=="object"&&x!==null&&x.type===zr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case sl:e:{for(var C=x.key,A=y;A!==null;){if(A.key===C){if(C=x.type,C===zr){if(A.tag===7){n(m,A.sibling),y=i(A,x.props.children),y.return=m,m=y;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===On&&pd(C)===A.type){n(m,A.sibling),y=i(A,x.props),y.ref=zi(m,A,x),y.return=m,m=y;break e}n(m,A);break}else e(m,A);A=A.sibling}x.type===zr?(y=wr(x.props.children,m.mode,S,x.key),y.return=m,m=y):(S=Xl(x.type,x.key,x.props,null,m.mode,S),S.ref=zi(m,y,x),S.return=m,m=S)}return l(m);case Fr:e:{for(A=x.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(m,y.sibling),y=i(y,x.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=Ya(x,m.mode,S),y.return=m,m=y}return l(m);case On:return A=x._init,w(m,y,A(x._payload),S)}if(Gi(x))return g(m,y,x,S);if(Ri(x))return v(m,y,x,S);gl(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,x),y.return=m,m=y):(n(m,y),y=Qa(x,m.mode,S),y.return=m,m=y),l(m)):n(m,y)}return w}var fi=Ag(!0),Eg=Ag(!1),wo=lr(null),ko=null,qr=null,Ah=null;function Eh(){Ah=qr=ko=null}function Mh(t){var e=wo.current;ce(wo),t._currentValue=e}function Qu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ri(t,e){ko=t,Ah=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(at=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Ah!==t)if(t={context:t,memoizedValue:e,next:null},qr===null){if(ko===null)throw Error(M(308));qr=t,ko.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return e}var mr=null;function Th(t){mr===null?mr=[t]:mr.push(t)}function Mg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Th(e)):(n.next=i.next,i.next=n),e.interleaved=n,bn(t,r)}function bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bn(t,n)}return i=r.interleaved,i===null?(e.next=e,Th(r)):(e.next=i.next,i.next=e),r.interleaved=e,bn(t,n)}function Kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}function md(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function So(t,e,n,r){var i=t.updateQueue;Dn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,p=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(f=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=ye({},h,f);break e;case 2:Dn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=p,a=h):c=c.next=p,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ar|=l,t.lanes=l,t.memoizedState=h}}function gd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Gs={},cn=lr(Gs),Ms=lr(Gs),Ts=lr(Gs);function gr(t){if(t===Gs)throw Error(M(174));return t}function Oh(t,e){switch(le(Ts,e),le(Ms,t),le(cn,Gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nu(e,t)}ce(cn),le(cn,e)}function di(){ce(cn),ce(Ms),ce(Ts)}function Ng(t){gr(Ts.current);var e=gr(cn.current),n=Nu(e,t.type);e!==n&&(le(Ms,t),le(cn,n))}function Dh(t){Ms.current===t&&(ce(cn),ce(Ms))}var pe=lr(0);function Co(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Va=[];function Ph(){for(var t=0;t<Va.length;t++)Va[t]._workInProgressVersionPrimary=null;Va.length=0}var ql=Mn.ReactCurrentDispatcher,Ua=Mn.ReactCurrentBatchConfig,br=0,ge=null,Ae=null,Te=null,bo=!1,ss=!1,Ns=0,cw=0;function $e(){throw Error(M(321))}function Lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function Rh(t,e,n,r,i,s){if(br=s,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ql.current=t===null||t.memoizedState===null?pw:mw,t=n(r,i),ss){s=0;do{if(ss=!1,Ns=0,25<=s)throw Error(M(301));s+=1,Te=Ae=null,e.updateQueue=null,ql.current=gw,t=n(r,i)}while(ss)}if(ql.current=Ao,e=Ae!==null&&Ae.next!==null,br=0,Te=Ae=ge=null,bo=!1,e)throw Error(M(300));return t}function jh(){var t=Ns!==0;return Ns=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ge.memoizedState=Te=t:Te=Te.next=t,Te}function Rt(){if(Ae===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=Te===null?ge.memoizedState:Te.next;if(e!==null)Te=e,Ae=t;else{if(t===null)throw Error(M(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Te===null?ge.memoizedState=Te=t:Te=Te.next=t}return Te}function Os(t,e){return typeof e=="function"?e(t):e}function $a(t){var e=Rt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Ae,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((br&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,ge.lanes|=c,Ar|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,$t(r,e.memoizedState)||(at=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ge.lanes|=s,Ar|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ka(t){var e=Rt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);$t(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Og(){}function Dg(t,e){var n=ge,r=Rt(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,at=!0),r=r.queue,Bh(Rg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(n.flags|=2048,Ds(9,Lg.bind(null,n,r,i,e),void 0,null),Oe===null)throw Error(M(349));br&30||Pg(n,e,i)}return i}function Pg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lg(t,e,n,r){e.value=n,e.getSnapshot=r,jg(e)&&Bg(t)}function Rg(t,e,n){return n(function(){jg(e)&&Bg(t)})}function jg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Bg(t){var e=bn(t,1);e!==null&&Ut(e,t,1,-1)}function yd(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:t},e.queue=t,t=t.dispatch=dw.bind(null,ge,t),[e.memoizedState,t]}function Ds(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ig(){return Rt().memoizedState}function Gl(t,e,n,r){var i=nn();ge.flags|=t,i.memoizedState=Ds(1|e,n,void 0,r===void 0?null:r)}function na(t,e,n,r){var i=Rt();r=r===void 0?null:r;var s=void 0;if(Ae!==null){var l=Ae.memoizedState;if(s=l.destroy,r!==null&&Lh(r,l.deps)){i.memoizedState=Ds(e,n,s,r);return}}ge.flags|=t,i.memoizedState=Ds(1|e,n,s,r)}function vd(t,e){return Gl(8390656,8,t,e)}function Bh(t,e){return na(2048,8,t,e)}function Fg(t,e){return na(4,2,t,e)}function zg(t,e){return na(4,4,t,e)}function _g(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hg(t,e,n){return n=n!=null?n.concat([t]):null,na(4,4,_g.bind(null,e,t),n)}function Ih(){}function Wg(t,e){var n=Rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vg(t,e){var n=Rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ug(t,e,n){return br&21?($t(n,e)||(n=Qm(),ge.lanes|=n,Ar|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=n)}function hw(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=Ua.transition;Ua.transition={};try{t(!1),e()}finally{ne=n,Ua.transition=r}}function $g(){return Rt().memoizedState}function fw(t,e,n){var r=Gn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kg(t))qg(e,n);else if(n=Mg(t,e,n,r),n!==null){var i=tt();Ut(n,t,r,i),Gg(n,e,r)}}function dw(t,e,n){var r=Gn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kg(t))qg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,$t(o,l)){var a=e.interleaved;a===null?(i.next=i,Th(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Mg(t,e,i,r),n!==null&&(i=tt(),Ut(n,t,r,i),Gg(n,e,r))}}function Kg(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function qg(t,e){ss=bo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}var Ao={readContext:Lt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},pw={readContext:Lt,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:vd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gl(4194308,4,_g.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gl(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fw.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:yd,useDebugValue:Ih,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=yd(!1),e=t[0];return t=hw.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,i=nn();if(de){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Oe===null)throw Error(M(349));br&30||Pg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,vd(Rg.bind(null,r,s,t),[t]),r.flags|=2048,Ds(9,Lg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nn(),e=Oe.identifierPrefix;if(de){var n=vn,r=yn;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ns++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mw={readContext:Lt,useCallback:Wg,useContext:Lt,useEffect:Bh,useImperativeHandle:Hg,useInsertionEffect:Fg,useLayoutEffect:zg,useMemo:Vg,useReducer:$a,useRef:Ig,useState:function(){return $a(Os)},useDebugValue:Ih,useDeferredValue:function(t){var e=Rt();return Ug(e,Ae.memoizedState,t)},useTransition:function(){var t=$a(Os)[0],e=Rt().memoizedState;return[t,e]},useMutableSource:Og,useSyncExternalStore:Dg,useId:$g,unstable_isNewReconciler:!1},gw={readContext:Lt,useCallback:Wg,useContext:Lt,useEffect:Bh,useImperativeHandle:Hg,useInsertionEffect:Fg,useLayoutEffect:zg,useMemo:Vg,useReducer:Ka,useRef:Ig,useState:function(){return Ka(Os)},useDebugValue:Ih,useDeferredValue:function(t){var e=Rt();return Ae===null?e.memoizedState=t:Ug(e,Ae.memoizedState,t)},useTransition:function(){var t=Ka(Os)[0],e=Rt().memoizedState;return[t,e]},useMutableSource:Og,useSyncExternalStore:Dg,useId:$g,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ra={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tt(),i=Gn(t),s=xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Kn(t,s,i),e!==null&&(Ut(e,t,i,r),Kl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tt(),i=Gn(t),s=xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Kn(t,s,i),e!==null&&(Ut(e,t,i,r),Kl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tt(),r=Gn(t),i=xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Kn(t,i,r),e!==null&&(Ut(e,t,r,n),Kl(e,t,r))}};function xd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Cs(n,r)||!Cs(i,s):!0}function Qg(t,e,n){var r=!1,i=Xn,s=e.contextType;return typeof s=="object"&&s!==null?s=Lt(s):(i=ct(e)?Sr:Je.current,r=e.contextTypes,s=(r=r!=null)?ci(t,i):Xn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ra,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ra.enqueueReplaceState(e,e.state,null)}function Ju(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Nh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Lt(s):(s=ct(e)?Sr:Je.current,i.context=ci(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ra.enqueueReplaceState(i,i.state,null),So(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function pi(t,e){try{var n="",r=e;do n+=U1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function qa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yw=typeof WeakMap=="function"?WeakMap:Map;function Yg(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mo||(Mo=!0,ac=r),Xu(t,e)},n}function Jg(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xu(t,e),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function kd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Dw.bind(null,t,e,n),e.then(t,t))}function Sd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,Kn(n,e,1))),n.lanes|=1),t)}var vw=Mn.ReactCurrentOwner,at=!1;function et(t,e,n,r){e.child=t===null?Eg(e,null,n,r):fi(e,t.child,n,r)}function bd(t,e,n,r,i){n=n.render;var s=e.ref;return ri(e,i),r=Rh(t,e,n,r,s,i),n=jh(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,An(t,e,i)):(de&&n&&Sh(e),e.flags|=1,et(t,e,r,i),e.child)}function Ad(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$h(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xg(t,e,s,r,i)):(t=Xl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cs,n(l,r)&&t.ref===e.ref)return An(t,e,i)}return e.flags|=1,t=Qn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cs(s,r)&&t.ref===e.ref)if(at=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(at=!0);else return e.lanes=t.lanes,An(t,e,i)}return Zu(t,e,n,r,i)}function Zg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Qr,mt),mt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(Qr,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,le(Qr,mt),mt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,le(Qr,mt),mt|=r;return et(t,e,i,n),e.child}function e0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zu(t,e,n,r,i){var s=ct(n)?Sr:Je.current;return s=ci(e,s),ri(e,i),n=Rh(t,e,n,r,s,i),r=jh(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,An(t,e,i)):(de&&r&&Sh(e),e.flags|=1,et(t,e,n,i),e.child)}function Ed(t,e,n,r,i){if(ct(n)){var s=!0;yo(e)}else s=!1;if(ri(e,i),e.stateNode===null)Ql(t,e),Qg(e,n,r),Ju(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=ct(n)?Sr:Je.current,u=ci(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&wd(e,l,r,u),Dn=!1;var f=e.memoizedState;l.state=f,So(e,r,l,i),a=e.memoizedState,o!==r||f!==a||ut.current||Dn?(typeof c=="function"&&(Yu(e,n,c,r),a=e.memoizedState),(o=Dn||xd(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Tg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:zt(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Lt(a):(a=ct(n)?Sr:Je.current,a=ci(e,a));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&wd(e,l,r,a),Dn=!1,f=e.memoizedState,l.state=f,So(e,r,l,i);var g=e.memoizedState;o!==h||f!==g||ut.current||Dn?(typeof p=="function"&&(Yu(e,n,p,r),g=e.memoizedState),(u=Dn||xd(e,n,u,r,f,g,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ec(t,e,n,r,s,i)}function ec(t,e,n,r,i,s){e0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&hd(e,n,!1),An(t,e,s);r=e.stateNode,vw.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=fi(e,t.child,null,s),e.child=fi(e,null,o,s)):et(t,e,o,s),e.memoizedState=r.state,i&&hd(e,n,!0),e.child}function t0(t){var e=t.stateNode;e.pendingContext?cd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cd(t,e.context,!1),Oh(t,e.containerInfo)}function Md(t,e,n,r,i){return hi(),bh(i),e.flags|=256,et(t,e,n,r),e.child}var tc={dehydrated:null,treeContext:null,retryLane:0};function nc(t){return{baseLanes:t,cachePool:null,transitions:null}}function n0(t,e,n){var r=e.pendingProps,i=pe.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),le(pe,i&1),t===null)return Gu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=la(l,r,0,null),t=wr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nc(n),e.memoizedState=tc,t):Fh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return xw(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Qn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Qn(o,s):(s=wr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?nc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=tc,r}return s=t.child,t=s.sibling,r=Qn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fh(t,e){return e=la({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,r){return r!==null&&bh(r),fi(e,t.child,null,n),t=Fh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xw(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=qa(Error(M(422))),yl(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=la({mode:"visible",children:r.children},i,0,null),s=wr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fi(e,t.child,null,l),e.child.memoizedState=nc(l),e.memoizedState=tc,s);if(!(e.mode&1))return yl(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=qa(s,r,void 0),yl(t,e,l,r)}if(o=(l&t.childLanes)!==0,at||o){if(r=Oe,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bn(t,i),Ut(r,t,i,-1))}return Uh(),r=qa(Error(M(421))),yl(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Pw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=$n(i.nextSibling),xt=e,de=!0,Ht=null,t!==null&&(At[Et++]=yn,At[Et++]=vn,At[Et++]=Cr,yn=t.id,vn=t.overflow,Cr=e),e=Fh(e,r.children),e.flags|=4096,e)}function Td(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qu(t.return,e,n)}function Ga(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function r0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(et(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Td(t,n,e);else if(t.tag===19)Td(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Co(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ga(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Co(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ga(e,!0,n,null,s);break;case"together":Ga(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ww(t,e,n){switch(e.tag){case 3:t0(e),hi();break;case 5:Ng(e);break;case 1:ct(e.type)&&yo(e);break;case 4:Oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;le(wo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?n0(t,e,n):(le(pe,pe.current&1),t=An(t,e,n),t!==null?t.sibling:null);le(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),le(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Zg(t,e,n)}return An(t,e,n)}var i0,rc,s0,l0;i0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rc=function(){};s0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gr(cn.current);var s=null;switch(n){case"input":i=Au(t,i),r=Au(t,r),s=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),s=[];break;case"textarea":i=Tu(t,i),r=Tu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mo)}Ou(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gs.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ae("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};l0=function(t,e,n,r){n!==r&&(e.flags|=4)};function _i(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kw(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ct(e.type)&&go(),Ke(e),null;case 3:return r=e.stateNode,di(),ce(ut),ce(Je),Ph(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(hc(Ht),Ht=null))),rc(t,e),Ke(e),null;case 5:Dh(e);var i=gr(Ts.current);if(n=e.type,t!==null&&e.stateNode!=null)s0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ke(e),null}if(t=gr(cn.current),ml(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[rn]=e,r[Es]=s,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(i=0;i<Yi.length;i++)ae(Yi[i],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":If(r,s),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ae("invalid",r);break;case"textarea":zf(r,s),ae("invalid",r)}Ou(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&pl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&pl(r.textContent,o,t),i=["children",""+o]):gs.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ae("scroll",r)}switch(n){case"input":ll(r),Ff(r,s,!0);break;case"textarea":ll(r),_f(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[rn]=e,t[Es]=r,i0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Du(n,r),n){case"dialog":ae("cancel",t),ae("close",t),i=r;break;case"iframe":case"object":case"embed":ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yi.length;i++)ae(Yi[i],t);i=r;break;case"source":ae("error",t),i=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),i=r;break;case"details":ae("toggle",t),i=r;break;case"input":If(t,r),i=Au(t,r),ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),ae("invalid",t);break;case"textarea":zf(t,r),i=Tu(t,r),ae("invalid",t);break;default:i=r}Ou(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Im(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&jm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ys(t,a):typeof a=="number"&&ys(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gs.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ae("scroll",t):a!=null&&ah(t,s,a,l))}switch(n){case"input":ll(t),Ff(t,r,!1);break;case"textarea":ll(t),_f(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)l0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=gr(Ts.current),gr(cn.current),ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[rn]=e,(s=r.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rn]=e,e.stateNode=r}return Ke(e),null;case 13:if(ce(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&vt!==null&&e.mode&1&&!(e.flags&128))bg(),hi(),e.flags|=98560,s=!1;else if(s=ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[rn]=e}else hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else Ht!==null&&(hc(Ht),Ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Ee===0&&(Ee=3):Uh())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return di(),rc(t,e),t===null&&bs(e.stateNode.containerInfo),Ke(e),null;case 10:return Mh(e.type._context),Ke(e),null;case 17:return ct(e.type)&&go(),Ke(e),null;case 19:if(ce(pe),s=e.memoizedState,s===null)return Ke(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)_i(s,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Co(t),l!==null){for(e.flags|=128,_i(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(pe,pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>mi&&(e.flags|=128,r=!0,_i(s,!1),e.lanes=4194304)}else{if(!r)if(t=Co(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_i(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!de)return Ke(e),null}else 2*ke()-s.renderingStartTime>mi&&n!==1073741824&&(e.flags|=128,r=!0,_i(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=pe.current,le(pe,r?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return Vh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Sw(t,e){switch(Ch(e),e.tag){case 1:return ct(e.type)&&go(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return di(),ce(ut),ce(Je),Ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dh(e),null;case 13:if(ce(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(pe),null;case 4:return di(),null;case 10:return Mh(e.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var vl=!1,Ge=!1,Cw=typeof WeakSet=="function"?WeakSet:Set,R=null;function Gr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function ic(t,e,n){try{n()}catch(r){ve(t,e,r)}}var Nd=!1;function bw(t,e){if(Hu=ho,t=hg(),kh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wu={focusedElem:t,selectionRange:n},ho=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:zt(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return g=Nd,Nd=!1,g}function ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ic(e,n,s)}i=i.next}while(i!==r)}}function ia(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o0(t){var e=t.alternate;e!==null&&(t.alternate=null,o0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rn],delete e[Es],delete e[$u],delete e[lw],delete e[ow])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a0(t){return t.tag===5||t.tag===3||t.tag===4}function Od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mo));else if(r!==4&&(t=t.child,t!==null))for(lc(t,e,n),t=t.sibling;t!==null;)lc(t,e,n),t=t.sibling}function oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oc(t,e,n),t=t.sibling;t!==null;)oc(t,e,n),t=t.sibling}var Re=null,_t=!1;function Nn(t,e,n){for(n=n.child;n!==null;)u0(t,e,n),n=n.sibling}function u0(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Yo,n)}catch{}switch(n.tag){case 5:Ge||Gr(n,e);case 6:var r=Re,i=_t;Re=null,Nn(t,e,n),Re=r,_t=i,Re!==null&&(_t?(t=Re,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(_t?(t=Re,n=n.stateNode,t.nodeType===8?Ha(t.parentNode,n):t.nodeType===1&&Ha(t,n),ks(t)):Ha(Re,n.stateNode));break;case 4:r=Re,i=_t,Re=n.stateNode.containerInfo,_t=!0,Nn(t,e,n),Re=r,_t=i;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&ic(n,e,l),i=i.next}while(i!==r)}Nn(t,e,n);break;case 1:if(!Ge&&(Gr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ve(n,e,o)}Nn(t,e,n);break;case 21:Nn(t,e,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,Nn(t,e,n),Ge=r):Nn(t,e,n);break;default:Nn(t,e,n)}}function Dd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cw),e.forEach(function(r){var i=Lw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Re=o.stateNode,_t=!1;break e;case 3:Re=o.stateNode.containerInfo,_t=!0;break e;case 4:Re=o.stateNode.containerInfo,_t=!0;break e}o=o.return}if(Re===null)throw Error(M(160));u0(s,l,i),Re=null,_t=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ve(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)c0(e,t),e=e.sibling}function c0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),Jt(t),r&4){try{ls(3,t,t.return),ia(3,t)}catch(v){ve(t,t.return,v)}try{ls(5,t,t.return)}catch(v){ve(t,t.return,v)}}break;case 1:Ft(e,t),Jt(t),r&512&&n!==null&&Gr(n,n.return);break;case 5:if(Ft(e,t),Jt(t),r&512&&n!==null&&Gr(n,n.return),t.flags&32){var i=t.stateNode;try{ys(i,"")}catch(v){ve(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Pm(i,s),Du(o,l);var u=Du(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Im(i,h):c==="dangerouslySetInnerHTML"?jm(i,h):c==="children"?ys(i,h):ah(i,c,h,u)}switch(o){case"input":Eu(i,s);break;case"textarea":Lm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Zr(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Zr(i,!!s.multiple,s.defaultValue,!0):Zr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Es]=s}catch(v){ve(t,t.return,v)}}break;case 6:if(Ft(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ve(t,t.return,v)}}break;case 3:if(Ft(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ks(e.containerInfo)}catch(v){ve(t,t.return,v)}break;case 4:Ft(e,t),Jt(t);break;case 13:Ft(e,t),Jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hh=ke())),r&4&&Dd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ge=(u=Ge)||c,Ft(e,t),Ge=u):Ft(e,t),Jt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(R=t,c=t.child;c!==null;){for(h=R=c;R!==null;){switch(f=R,p=f.child,f.tag){case 0:case 11:case 14:case 15:ls(4,f,f.return);break;case 1:Gr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){ve(r,n,v)}}break;case 5:Gr(f,f.return);break;case 22:if(f.memoizedState!==null){Ld(h);continue}}p!==null?(p.return=f,R=p):Ld(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Bm("display",l))}catch(v){ve(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){ve(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ft(e,t),Jt(t),r&4&&Dd(t);break;case 21:break;default:Ft(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a0(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ys(i,""),r.flags&=-33);var s=Od(t);oc(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Od(t);lc(t,o,l);break;default:throw Error(M(161))}}catch(a){ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Aw(t,e,n){R=t,h0(t)}function h0(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||vl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ge;o=vl;var u=Ge;if(vl=l,(Ge=a)&&!u)for(R=i;R!==null;)l=R,a=l.child,l.tag===22&&l.memoizedState!==null?Rd(i):a!==null?(a.return=l,R=a):Rd(i);for(;s!==null;)R=s,h0(s),s=s.sibling;R=i,vl=o,Ge=u}Pd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):Pd(t)}}function Pd(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ge||ia(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&ks(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ge||e.flags&512&&sc(e)}catch(f){ve(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function Ld(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function Rd(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ia(4,e)}catch(a){ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ve(e,i,a)}}var s=e.return;try{sc(e)}catch(a){ve(e,s,a)}break;case 5:var l=e.return;try{sc(e)}catch(a){ve(e,l,a)}}}catch(a){ve(e,e.return,a)}if(e===t){R=null;break}var o=e.sibling;if(o!==null){o.return=e.return,R=o;break}R=e.return}}var Ew=Math.ceil,Eo=Mn.ReactCurrentDispatcher,zh=Mn.ReactCurrentOwner,Nt=Mn.ReactCurrentBatchConfig,X=0,Oe=null,be=null,He=0,mt=0,Qr=lr(0),Ee=0,Ps=null,Ar=0,sa=0,_h=0,os=null,lt=null,Hh=0,mi=1/0,pn=null,Mo=!1,ac=null,qn=null,xl=!1,Fn=null,To=0,as=0,uc=null,Yl=-1,Jl=0;function tt(){return X&6?ke():Yl!==-1?Yl:Yl=ke()}function Gn(t){return t.mode&1?X&2&&He!==0?He&-He:uw.transition!==null?(Jl===0&&(Jl=Qm()),Jl):(t=ne,t!==0||(t=window.event,t=t===void 0?16:ng(t.type)),t):1}function Ut(t,e,n,r){if(50<as)throw as=0,uc=null,Error(M(185));$s(t,n,r),(!(X&2)||t!==Oe)&&(t===Oe&&(!(X&2)&&(sa|=n),Ee===4&&jn(t,He)),ht(t,r),n===1&&X===0&&!(e.mode&1)&&(mi=ke()+500,ta&&or()))}function ht(t,e){var n=t.callbackNode;ux(t,e);var r=co(t,t===Oe?He:0);if(r===0)n!==null&&Vf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vf(n),e===1)t.tag===0?aw(jd.bind(null,t)):kg(jd.bind(null,t)),iw(function(){!(X&6)&&or()}),n=null;else{switch(Ym(r)){case 1:n=dh;break;case 4:n=qm;break;case 16:n=uo;break;case 536870912:n=Gm;break;default:n=uo}n=x0(n,f0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f0(t,e){if(Yl=-1,Jl=0,X&6)throw Error(M(327));var n=t.callbackNode;if(ii()&&t.callbackNode!==n)return null;var r=co(t,t===Oe?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=No(t,r);else{e=r;var i=X;X|=2;var s=p0();(Oe!==t||He!==e)&&(pn=null,mi=ke()+500,xr(t,e));do try{Nw();break}catch(o){d0(t,o)}while(!0);Eh(),Eo.current=s,X=i,be!==null?e=0:(Oe=null,He=0,e=Ee)}if(e!==0){if(e===2&&(i=Bu(t),i!==0&&(r=i,e=cc(t,i))),e===1)throw n=Ps,xr(t,0),jn(t,r),ht(t,ke()),n;if(e===6)jn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Mw(i)&&(e=No(t,r),e===2&&(s=Bu(t),s!==0&&(r=s,e=cc(t,s))),e===1))throw n=Ps,xr(t,0),jn(t,r),ht(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:fr(t,lt,pn);break;case 3:if(jn(t,r),(r&130023424)===r&&(e=Hh+500-ke(),10<e)){if(co(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uu(fr.bind(null,t,lt,pn),e);break}fr(t,lt,pn);break;case 4:if(jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Vt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ew(r/1960))-r,10<r){t.timeoutHandle=Uu(fr.bind(null,t,lt,pn),r);break}fr(t,lt,pn);break;case 5:fr(t,lt,pn);break;default:throw Error(M(329))}}}return ht(t,ke()),t.callbackNode===n?f0.bind(null,t):null}function cc(t,e){var n=os;return t.current.memoizedState.isDehydrated&&(xr(t,e).flags|=256),t=No(t,e),t!==2&&(e=lt,lt=n,e!==null&&hc(e)),t}function hc(t){lt===null?lt=t:lt.push.apply(lt,t)}function Mw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jn(t,e){for(e&=~_h,e&=~sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vt(e),r=1<<n;t[n]=-1,e&=~r}}function jd(t){if(X&6)throw Error(M(327));ii();var e=co(t,0);if(!(e&1))return ht(t,ke()),null;var n=No(t,e);if(t.tag!==0&&n===2){var r=Bu(t);r!==0&&(e=r,n=cc(t,r))}if(n===1)throw n=Ps,xr(t,0),jn(t,e),ht(t,ke()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fr(t,lt,pn),ht(t,ke()),null}function Wh(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(mi=ke()+500,ta&&or())}}function Er(t){Fn!==null&&Fn.tag===0&&!(X&6)&&ii();var e=X;X|=1;var n=Nt.transition,r=ne;try{if(Nt.transition=null,ne=1,t)return t()}finally{ne=r,Nt.transition=n,X=e,!(X&6)&&or()}}function Vh(){mt=Qr.current,ce(Qr)}function xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rw(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&go();break;case 3:di(),ce(ut),ce(Je),Ph();break;case 5:Dh(r);break;case 4:di();break;case 13:ce(pe);break;case 19:ce(pe);break;case 10:Mh(r.type._context);break;case 22:case 23:Vh()}n=n.return}if(Oe=t,be=t=Qn(t.current,null),He=mt=e,Ee=0,Ps=null,_h=sa=Ar=0,lt=os=null,mr!==null){for(e=0;e<mr.length;e++)if(n=mr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}mr=null}return t}function d0(t,e){do{var n=be;try{if(Eh(),ql.current=Ao,bo){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bo=!1}if(br=0,Te=Ae=ge=null,ss=!1,Ns=0,zh.current=null,n===null||n.return===null){Ee=1,Ps=e,be=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=He,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Sd(l);if(p!==null){p.flags&=-257,Cd(p,l,o,s,e),p.mode&1&&kd(s,u,e),e=p,a=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(a),e.updateQueue=v}else g.add(a);break e}else{if(!(e&1)){kd(s,u,e),Uh();break e}a=Error(M(426))}}else if(de&&o.mode&1){var w=Sd(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Cd(w,l,o,s,e),bh(pi(a,o));break e}}s=a=pi(a,o),Ee!==4&&(Ee=2),os===null?os=[s]:os.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Yg(s,a,e);md(s,m);break e;case 1:o=a;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(qn===null||!qn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Jg(s,o,e);md(s,S);break e}}s=s.return}while(s!==null)}g0(n)}catch(C){e=C,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function p0(){var t=Eo.current;return Eo.current=Ao,t===null?Ao:t}function Uh(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Oe===null||!(Ar&268435455)&&!(sa&268435455)||jn(Oe,He)}function No(t,e){var n=X;X|=2;var r=p0();(Oe!==t||He!==e)&&(pn=null,xr(t,e));do try{Tw();break}catch(i){d0(t,i)}while(!0);if(Eh(),X=n,Eo.current=r,be!==null)throw Error(M(261));return Oe=null,He=0,Ee}function Tw(){for(;be!==null;)m0(be)}function Nw(){for(;be!==null&&!ex();)m0(be)}function m0(t){var e=v0(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?g0(t):be=e,zh.current=null}function g0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sw(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,be=null;return}}else if(n=kw(n,e,mt),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Ee===0&&(Ee=5)}function fr(t,e,n){var r=ne,i=Nt.transition;try{Nt.transition=null,ne=1,Ow(t,e,n,r)}finally{Nt.transition=i,ne=r}return null}function Ow(t,e,n,r){do ii();while(Fn!==null);if(X&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cx(t,s),t===Oe&&(be=Oe=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,x0(uo,function(){return ii(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var l=ne;ne=1;var o=X;X|=4,zh.current=null,bw(t,n),c0(n,t),Yx(Wu),ho=!!Hu,Wu=Hu=null,t.current=n,Aw(n),tx(),X=o,ne=l,Nt.transition=s}else t.current=n;if(xl&&(xl=!1,Fn=t,To=i),s=t.pendingLanes,s===0&&(qn=null),ix(n.stateNode),ht(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mo)throw Mo=!1,t=ac,ac=null,t;return To&1&&t.tag!==0&&ii(),s=t.pendingLanes,s&1?t===uc?as++:(as=0,uc=t):as=0,or(),null}function ii(){if(Fn!==null){var t=Ym(To),e=Nt.transition,n=ne;try{if(Nt.transition=null,ne=16>t?16:t,Fn===null)var r=!1;else{if(t=Fn,Fn=null,To=0,X&6)throw Error(M(331));var i=X;for(X|=4,R=t.current;R!==null;){var s=R,l=s.child;if(R.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(R=u;R!==null;){var c=R;switch(c.tag){case 0:case 11:case 15:ls(8,c,s)}var h=c.child;if(h!==null)h.return=c,R=h;else for(;R!==null;){c=R;var f=c.sibling,p=c.return;if(o0(c),c===u){R=null;break}if(f!==null){f.return=p,R=f;break}R=p}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}R=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,R=l;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ls(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,R=m;break e}R=s.return}}var y=t.current;for(R=y;R!==null;){l=R;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,R=x;else e:for(l=y;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ia(9,o)}}catch(C){ve(o,o.return,C)}if(o===l){R=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,R=S;break e}R=o.return}}if(X=i,or(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Yo,t)}catch{}r=!0}return r}finally{ne=n,Nt.transition=e}}return!1}function Bd(t,e,n){e=pi(n,e),e=Yg(t,e,1),t=Kn(t,e,1),e=tt(),t!==null&&($s(t,1,e),ht(t,e))}function ve(t,e,n){if(t.tag===3)Bd(t,t,n);else for(;e!==null;){if(e.tag===3){Bd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){t=pi(n,t),t=Jg(e,t,1),e=Kn(e,t,1),t=tt(),e!==null&&($s(e,1,t),ht(e,t));break}}e=e.return}}function Dw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tt(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&(He&n)===n&&(Ee===4||Ee===3&&(He&130023424)===He&&500>ke()-Hh?xr(t,0):_h|=n),ht(t,e)}function y0(t,e){e===0&&(t.mode&1?(e=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):e=1);var n=tt();t=bn(t,e),t!==null&&($s(t,e,n),ht(t,n))}function Pw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y0(t,n)}function Lw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),y0(t,n)}var v0;v0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ut.current)at=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return at=!1,ww(t,e,n);at=!!(t.flags&131072)}else at=!1,de&&e.flags&1048576&&Sg(e,xo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ql(t,e),t=e.pendingProps;var i=ci(e,Je.current);ri(e,n),i=Rh(null,e,r,t,i,n);var s=jh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ct(r)?(s=!0,yo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nh(e),i.updater=ra,e.stateNode=i,i._reactInternals=e,Ju(e,r,t,n),e=ec(null,e,r,!0,s,n)):(e.tag=0,de&&s&&Sh(e),et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ql(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jw(r),t=zt(r,t),i){case 0:e=Zu(null,e,r,t,n);break e;case 1:e=Ed(null,e,r,t,n);break e;case 11:e=bd(null,e,r,t,n);break e;case 14:e=Ad(null,e,r,zt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Zu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Ed(t,e,r,i,n);case 3:e:{if(t0(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Tg(t,e),So(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=pi(Error(M(423)),e),e=Md(t,e,r,n,i);break e}else if(r!==i){i=pi(Error(M(424)),e),e=Md(t,e,r,n,i);break e}else for(vt=$n(e.stateNode.containerInfo.firstChild),xt=e,de=!0,Ht=null,n=Eg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hi(),r===i){e=An(t,e,n);break e}et(t,e,r,n)}e=e.child}return e;case 5:return Ng(e),t===null&&Gu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Vu(r,i)?l=null:s!==null&&Vu(r,s)&&(e.flags|=32),e0(t,e),et(t,e,l,n),e.child;case 6:return t===null&&Gu(e),null;case 13:return n0(t,e,n);case 4:return Oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fi(e,null,r,n):et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),bd(t,e,r,i,n);case 7:return et(t,e,e.pendingProps,n),e.child;case 8:return et(t,e,e.pendingProps.children,n),e.child;case 12:return et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,le(wo,r._currentValue),r._currentValue=l,s!==null)if($t(s.value,l)){if(s.children===i.children&&!ut.current){e=An(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=xn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Qu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Qu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ri(e,n),i=Lt(i),r=r(i),e.flags|=1,et(t,e,r,n),e.child;case 14:return r=e.type,i=zt(r,e.pendingProps),i=zt(r.type,i),Ad(t,e,r,i,n);case 15:return Xg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Ql(t,e),e.tag=1,ct(r)?(t=!0,yo(e)):t=!1,ri(e,n),Qg(e,r,i),Ju(e,r,i,n),ec(null,e,r,!0,t,n);case 19:return r0(t,e,n);case 22:return Zg(t,e,n)}throw Error(M(156,e.tag))};function x0(t,e){return Km(t,e)}function Rw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(t,e,n,r){return new Rw(t,e,n,r)}function $h(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jw(t){if(typeof t=="function")return $h(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ch)return 11;if(t===hh)return 14}return 2}function Qn(t,e){var n=t.alternate;return n===null?(n=Tt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")$h(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case zr:return wr(n.children,i,s,e);case uh:l=8,i|=8;break;case ku:return t=Tt(12,n,e,i|2),t.elementType=ku,t.lanes=s,t;case Su:return t=Tt(13,n,e,i),t.elementType=Su,t.lanes=s,t;case Cu:return t=Tt(19,n,e,i),t.elementType=Cu,t.lanes=s,t;case Nm:return la(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mm:l=10;break e;case Tm:l=9;break e;case ch:l=11;break e;case hh:l=14;break e;case On:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Tt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function wr(t,e,n,r){return t=Tt(7,t,r,e),t.lanes=n,t}function la(t,e,n,r){return t=Tt(22,t,r,e),t.elementType=Nm,t.lanes=n,t.stateNode={isHidden:!1},t}function Qa(t,e,n){return t=Tt(6,t,null,e),t.lanes=n,t}function Ya(t,e,n){return e=Tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oa(0),this.expirationTimes=Oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kh(t,e,n,r,i,s,l,o,a){return t=new Bw(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(s),t}function Iw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function w0(t){if(!t)return Xn;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(ct(n))return wg(t,n,e)}return e}function k0(t,e,n,r,i,s,l,o,a){return t=Kh(n,r,!0,t,i,s,l,o,a),t.context=w0(null),n=t.current,r=tt(),i=Gn(n),s=xn(r,i),s.callback=e??null,Kn(n,s,i),t.current.lanes=i,$s(t,i,r),ht(t,r),t}function oa(t,e,n,r){var i=e.current,s=tt(),l=Gn(i);return n=w0(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kn(i,e,l),t!==null&&(Ut(t,i,l,s),Kl(t,i,l)),l}function Oo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Id(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qh(t,e){Id(t,e),(t=t.alternate)&&Id(t,e)}function Fw(){return null}var S0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gh(t){this._internalRoot=t}aa.prototype.render=Gh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));oa(t,e,null,null)};aa.prototype.unmount=Gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Er(function(){oa(null,t,null,null)}),e[Cn]=null}};function aa(t){this._internalRoot=t}aa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&e!==0&&e<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&tg(t)}};function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ua(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fd(){}function zw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Oo(l);s.call(u)}}var l=k0(e,r,t,0,null,!1,!1,"",Fd);return t._reactRootContainer=l,t[Cn]=l.current,bs(t.nodeType===8?t.parentNode:t),Er(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Oo(a);o.call(u)}}var a=Kh(t,0,!1,null,null,!1,!1,"",Fd);return t._reactRootContainer=a,t[Cn]=a.current,bs(t.nodeType===8?t.parentNode:t),Er(function(){oa(e,a,n,r)}),a}function ca(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=Oo(l);o.call(a)}}oa(e,l,t,i)}else l=zw(n,e,t,i,r);return Oo(l)}Jm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qi(e.pendingLanes);n!==0&&(ph(e,n|1),ht(e,ke()),!(X&6)&&(mi=ke()+500,or()))}break;case 13:Er(function(){var r=bn(t,1);if(r!==null){var i=tt();Ut(r,t,1,i)}}),qh(t,1)}};mh=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var n=tt();Ut(e,t,134217728,n)}qh(t,134217728)}};Xm=function(t){if(t.tag===13){var e=Gn(t),n=bn(t,e);if(n!==null){var r=tt();Ut(n,t,e,r)}qh(t,e)}};Zm=function(){return ne};eg=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};Lu=function(t,e,n){switch(e){case"input":if(Eu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ea(r);if(!i)throw Error(M(90));Dm(r),Eu(r,i)}}}break;case"textarea":Lm(t,n);break;case"select":e=n.value,e!=null&&Zr(t,!!n.multiple,e,!1)}};_m=Wh;Hm=Er;var _w={usingClientEntryPoint:!1,Events:[qs,Vr,ea,Fm,zm,Wh]},Hi={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hw={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Um(t),t===null?null:t.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||Fw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Yo=wl.inject(Hw),un=wl}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_w;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qh(e))throw Error(M(200));return Iw(t,e,null,n)};Ct.createRoot=function(t,e){if(!Qh(t))throw Error(M(299));var n=!1,r="",i=S0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kh(t,1,!1,null,null,n,!1,r,i),t[Cn]=e.current,bs(t.nodeType===8?t.parentNode:t),new Gh(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Um(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Er(t)};Ct.hydrate=function(t,e,n){if(!ua(e))throw Error(M(200));return ca(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!Qh(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=S0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=k0(e,null,t,1,n??null,i,!1,s,l),t[Cn]=e.current,bs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new aa(e)};Ct.render=function(t,e,n){if(!ua(e))throw Error(M(200));return ca(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!ua(t))throw Error(M(40));return t._reactRootContainer?(Er(function(){ca(null,null,t,!1,function(){t._reactRootContainer=null,t[Cn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Wh;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ua(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return ca(t,e,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function C0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C0)}catch(t){console.error(t)}}C0(),Cm.exports=Ct;var Ww=Cm.exports,zd=Ww;xu.createRoot=zd.createRoot,xu.hydrateRoot=zd.hydrateRoot;let fc=[],b0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?b0:fc).push(n=n+t[e])})();function Vw(t){if(t<768)return!1;for(let e=0,n=fc.length;;){let r=e+n>>1;if(t<fc[r])n=r;else if(t>=b0[r])e=r+1;else return!0;if(e==n)return!1}}function _d(t){return t>=127462&&t<=127487}const Hd=8205;function Uw(t,e,n=!0,r=!0){return(n?A0:$w)(t,e,r)}function A0(t,e,n){if(e==t.length)return e;e&&E0(t.charCodeAt(e))&&M0(t.charCodeAt(e-1))&&e--;let r=Ja(t,e);for(e+=Wd(r);e<t.length;){let i=Ja(t,e);if(r==Hd||i==Hd||n&&Vw(i))e+=Wd(i),r=i;else if(_d(i)){let s=0,l=e-2;for(;l>=0&&_d(Ja(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function $w(t,e,n){for(;e>0;){let r=A0(t,e-2,n);if(r<e)return r;e--}return 0}function Ja(t,e){let n=t.charCodeAt(e);if(!M0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return E0(r)?(n-55296<<10)+(r-56320)+65536:n}function E0(t){return t>=56320&&t<57344}function M0(t){return t>=55296&&t<56320}function Wd(t){return t<65536?1:2}class J{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=gi(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),sn.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=gi(this,e,n);let r=[];return this.decompose(e,n,r,0),sn.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new us(this),s=new us(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new us(this,e)}iterRange(e,n=this.length){return new T0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new N0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?J.empty:e.length<=32?new we(e):sn.from(we.split(e,[]))}}class we extends J{constructor(e,n=Kw(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new qw(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new we(Vd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Zl(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new we(o,l.length+s.length));else{let a=o.length>>1;r.push(new we(o.slice(0,a)),new we(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof we))return super.replace(e,n,r);[e,n]=gi(this,e,n);let i=Zl(this.text,Zl(r.text,Vd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new we(i,s):sn.from(we.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=gi(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new we(r,i)),r=[],i=-1);return i>-1&&n.push(new we(r,i)),n}}class sn extends J{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=gi(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new sn(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=gi(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof sn))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let g of e)g.flatten(p);return new we(p,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(p){let g;if(p.lines>s&&p instanceof sn)for(let v of p.children)h(v);else p.lines>l&&(a>l||!a)?(f(),o.push(p)):p instanceof we&&a&&(g=c[c.length-1])instanceof we&&p.lines+g.lines<=32?(a+=p.lines,u+=p.length+1,c[c.length-1]=new we(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>i&&f(),a+=p.lines,u+=p.length+1,c.push(p))}function f(){a!=0&&(o.push(c.length==1?c[0]:sn.from(c,u)),u=-1,a=c.length=0)}for(let p of e)h(p);return f(),o.length==1?o[0]:new sn(o,n)}}J.empty=new we([""],0);function Kw(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Zl(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Vd(t,e,n){return Zl(t,[""],e,n)}class us{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof we?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof we?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof we){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof we?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class T0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new us(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class N0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=function(){return this.iter()},us.prototype[Symbol.iterator]=T0.prototype[Symbol.iterator]=N0.prototype[Symbol.iterator]=function(){return this});class qw{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function gi(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ze(t,e,n=!0,r=!0){return Uw(t,e,n,r)}function Gw(t){return t>=56320&&t<57344}function Qw(t){return t>=55296&&t<56320}function O0(t,e){let n=t.charCodeAt(e);if(!Qw(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Gw(r)?(n-55296<<10)+(r-56320)+65536:n}function Yw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function D0(t){return t<65536?1:2}const dc=/\r\n?|\n/;var yt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(yt||(yt={}));class wn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){pc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new wn(e)}composeDesc(e){return this.empty?e:e.empty?this:P0(this,e)}mapDesc(e,n=!1){return e.empty?this:mc(this,e,n)}mapPos(e,n=-1,r=yt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=yt.Simple&&u>=e&&(r==yt.TrackDel&&i<e&&u>e||r==yt.TrackBefore&&i<e||r==yt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wn(e)}static create(e){return new wn(e)}}class Ne extends wn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pc(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return mc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(J.empty);r.push(l?e.slice(s,s+l):J.empty)}s+=l}return new Ne(n,r)}compose(e){return this.empty?e:e.empty?this:P0(this,e,!0)}map(e,n=!1){return e.empty?this:mc(this,e,n,!0)}iterChanges(e,n=!1){pc(this,e,n)}get desc(){return wn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Ls(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);qe(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;qe(n,c,h),h>0&&zn(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);qe(n,c,-1),qe(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Ne(n,r),filtered:wn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&qe(i,n-l,-1);let h=new Ne(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Ne){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:p}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?J.of(p.split(r||dc)):p:J.empty,v=g.length;if(h==f&&v==0)return;h<l&&a(),h>l&&qe(i,h-l,-1),qe(i,f-h,v),zn(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Ne(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(J.empty);r[i]=J.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ne(n,r)}static createSet(e,n){return new Ne(e,n)}}function qe(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function zn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(J.empty);t.push(n)}}function pc(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=J.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function mc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Ls(t),o=new Ls(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);qe(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(qe(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(qe(i,0,l.ins),s&&zn(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;qe(i,u,a<l.i?l.ins:0),s&&a<l.i&&zn(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Ne.createSet(i,s):wn.create(i);throw new Error("Mismatched change set lengths")}}}function P0(t,e,n=!1){let r=[],i=n?[]:null,s=new Ls(t),l=new Ls(e);for(let o=!1;;){if(s.done&&l.done)return i?Ne.createSet(r,i):wn.create(r);if(s.ins==0)qe(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)qe(r,0,l.ins,o),i&&zn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;qe(r,a,c,o),i&&c&&zn(i,r,l.text)}else l.ins==-1?(qe(r,s.off?0:s.len,a,o),i&&zn(i,r,s.textBit(a))):(qe(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&zn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Ls{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?J.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?J.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class yr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new yr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new yr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>yr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return yr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?yr.create(n,e,48|s):yr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function L0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Yh=0;class I{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Yh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new I(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Jh),!!e.static,e.enables)}of(e){return new eo([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new eo(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new eo(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Jh(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class eo{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Yh++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||gc(h,c)){let p=r(h);if(o?!Ud(p,h.values[l],i):!i(p,h.values[l]))return h.values[l]=p,1}return 0},reconfigure:(h,f)=>{let p,g=f.config.address[s];if(g!=null){let v=Po(f,g);if(this.dependencies.every(w=>w instanceof I?f.facet(w)===h.facet(w):w instanceof Gt?f.field(w,!1)==h.field(w,!1):!0)||(o?Ud(p=r(h),v,i):i(p=r(h),v)))return h.values[l]=v,0}else p=r(h);return h.values[l]=p,1}}}}function Ud(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function gc(t,e){let n=!1;for(let r of e)cs(t,r)&1&&(n=!0);return n}function Jw(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Po(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)cs(a,u);return a.values[l]=o(a),1},update(a,u){if(!gc(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=gc(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&Jh(n,h))return a.values[l]=f,0;let p=o(a);return e.compare(p,f)?(a.values[l]=f,0):(a.values[l]=p,1)}}}const kl=I.define({static:!0});class Gt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Gt(Yh++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(kl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(kl),l=i.facet(kl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,kl.of({field:this,create:e})]}get extension(){return this}}const dr={lowest:4,low:3,default:2,high:1,highest:0};function Wi(t){return e=>new R0(e,t)}const ha={highest:Wi(dr.highest),high:Wi(dr.high),default:Wi(dr.default),low:Wi(dr.low),lowest:Wi(dr.lowest)};class R0{constructor(e,n){this.inner=e,this.prec=n}}class fa{of(e){return new yc(this,e)}reconfigure(e){return fa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class yc{constructor(e,n){this.compartment=e,this.inner=n}}class Do{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of Xw(e,n,l))f instanceof Gt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(p=>f.slot(p));let c=r==null?void 0:r.config.facets;for(let f in s){let p=s[f],g=p[0].facet,v=c&&c[f]||[];if(p.every(w=>w.type==0))if(o[g.id]=a.length<<1|1,Jh(v,p))a.push(r.facet(g));else{let w=g.combine(p.map(m=>m.value));a.push(r&&g.compare(w,r.facet(g))?r.facet(g):w)}else{for(let w of p)w.type==0?(o[w.id]=a.length<<1|1,a.push(w.value)):(o[w.id]=u.length<<1,u.push(m=>w.dynamicSlot(m)));o[g.id]=u.length<<1,u.push(w=>Jw(w,g,p))}}let h=u.map(f=>f(o));return new Do(e,l,h,o,a,s)}}function Xw(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof yc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof yc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof R0)s(l.inner,l.prec);else if(l instanceof Gt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof eo)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,dr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,dr.default),r.reduce((l,o)=>l.concat(o))}function cs(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Po(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const j0=I.define(),vc=I.define({combine:t=>t.some(e=>e),static:!0}),B0=I.define({combine:t=>t.length?t[0]:void 0,static:!0}),I0=I.define(),F0=I.define(),z0=I.define(),_0=I.define({combine:t=>t.length?t[0]:!1});class Ei{constructor(e,n){this.type=e,this.value=n}static define(){return new Zw}}class Zw{of(e){return new Ei(this,e)}}class ek{constructor(e){this.map=e}of(e){return new oe(this,e)}}class oe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new oe(this.type,n)}is(e){return this.type==e}static define(e={}){return new ek(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}oe.reconfigure=oe.define();oe.appendConfig=oe.define();class Ye{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&L0(r,n.newLength),s.some(o=>o.type==Ye.time)||(this.annotations=s.concat(Ye.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Ye(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ye.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ye.time=Ei.define();Ye.userEvent=Ei.define();Ye.addToHistory=Ei.define();Ye.remote=Ei.define();function tk(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function H0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Ne.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:oe.mapEffects(t.effects,i).concat(oe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function xc(t,e,n){let r=e.selection,i=si(e.annotations);return e.userEvent&&(i=i.concat(Ye.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ne?e.changes:Ne.of(e.changes||[],n,t.facet(B0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:si(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function W0(t,e,n){let r=xc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=H0(r,xc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Ye.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return rk(n?nk(i):i)}function nk(t){let e=t.startState,n=!0;for(let i of e.facet(I0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:tk(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ne.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Ye.create(e,i,t.selection&&t.selection.map(s),oe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(F0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Ye?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ye?t=s[0]:t=W0(e,si(s),!1)}return t}function rk(t){let e=t.startState,n=e.facet(z0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=H0(r,xc(e,s,t.changes.newLength),!0))}return r==t?t:Ye.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const ik=[];function si(t){return t==null?ik:Array.isArray(t)?t:[t]}var _e=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(_e||(_e={}));const sk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wc;try{wc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function lk(t){if(wc)return wc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||sk.test(n)))return!0}return!1}function ok(t){return e=>{if(!/\S/.test(e))return _e.Space;if(lk(e))return _e.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return _e.Word;return _e.Other}}class Z{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)cs(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return cs(this,r),Po(this,r)}update(...e){return W0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(fa.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(oe.reconfigure)?(n=null,r=o.value):o.is(oe.appendConfig)&&(n=null,r=si(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Do.resolve(r,i,this),s=new Z(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(vc)?e.newSelection:e.newSelection.asSingle();new Z(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=si(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=oe.mapEffects(l,c).concat(oe.mapEffects(si(a.effects),h))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Ne?e:Ne.of(e,this.doc.length,this.facet(Z.lineSeparator))}toText(e){return J.of(e.split(this.facet(Z.lineSeparator)||dc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(cs(this,n),Po(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Gt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return Z.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Do.resolve(e.extensions||[],new Map),r=e.doc instanceof J?e.doc:J.of((e.doc||"").split(n.staticFacet(Z.lineSeparator)||dc)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return L0(i,r.length),n.staticFacet(vc)||(i=i.asSingle()),new Z(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(Z.tabSize)}get lineBreak(){return this.facet(Z.lineSeparator)||`
`}get readOnly(){return this.facet(_0)}phrase(e,...n){for(let r of this.facet(Z.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(j0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return ok(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=ze(n,l,!1);if(s(n.slice(a,l))!=_e.Word)break;l=a}for(;o<i;){let a=ze(n,o);if(s(n.slice(o,a))!=_e.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}Z.allowMultipleSelections=vc;Z.tabSize=I.define({combine:t=>t.length?t[0]:4});Z.lineSeparator=B0;Z.readOnly=_0;Z.phrases=I.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Z.languageData=j0;Z.changeFilter=I0;Z.transactionFilter=F0;Z.transactionExtender=z0;fa.reconfigure=oe.define();function da(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class yi{eq(e){return this==e}range(e,n=e){return kc.create(e,n,this)}}yi.prototype.startSide=yi.prototype.endSide=0;yi.prototype.point=!1;yi.prototype.mapMode=yt.TrackDel;let kc=class V0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new V0(e,n,r)}};function Sc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Xh{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,p;if(c==h){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=p=g,u.startSide!=u.endSide&&(p=n.mapPos(c,u.endSide),p<f)))continue}else if(f=n.mapPos(c,u.startSide),p=n.mapPos(h,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,p-f)),r.push(u),i.push(f-l),s.push(p-l))}return{mapped:r.length?new Xh(i,s,r,o):null,pos:l}}}class te{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new te(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(Sc)),this.isEmpty)return n.length?te.of(n):this;let o=new U0(this,null,-1).goto(0),a=0,u=[],c=new Mr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(kc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?te.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new te(r,n,s||te.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Rs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Rs.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=$d(l,o,r),u=new Vi(l,a,s),c=new Vi(o,a,s);r.iterGaps((h,f,p)=>Kd(u,h,c,f,p,i)),r.empty&&r.length==0&&Kd(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=$d(s,l),a=new Vi(s,o,0).goto(r),u=new Vi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!Cc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Vi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Mr;for(let i of e instanceof kc?[e]:n?ak(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return te.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=te.empty;i=i.nextLayer)n=new te(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}te.empty=new te([],[],null,-1);function ak(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Sc(e,r)>0)return t.slice().sort(Sc);e=r}return t}te.empty.nextLayer=te.empty;class Mr{finishChunk(e){this.chunks.push(new Xh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Mr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function $d(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class U0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Rs{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new U0(l,n,r,s));return i.length==1?i[0]:new Rs(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Xa(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Xa(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Xa(this.heap,0)}}}function Xa(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Vi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Rs.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Sl(this.active,e),Sl(this.activeTo,e),Sl(this.activeRank,e),this.minActive=qd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Cl(this.active,n,r),Cl(this.activeTo,n,i),Cl(this.activeRank,n,s),e&&Cl(e,n,this.cursor.from),this.minActive=qd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Sl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Kd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Cc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!Cc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function Cc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Sl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Cl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function qd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function pa(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=ze(t,i));return r}function uk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=ze(t,i)}return t.length}const bc="",Gd=typeof Symbol>"u"?"__"+bc:Symbol.for(bc),Ac=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Zn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let p in o){let g=o[p];if(/&/.test(p))s(p.split(/,\s*/).map(v=>l.map(w=>v.replace(/&/,w))).reduce((v,w)=>v.concat(w)),g,a);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),g,c,f)}else g!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Qd[Gd]||1;return Qd[Gd]=e+1,bc+e.toString(36)}static mount(e,n,r){let i=e[Ac],s=r&&r.nonce;i?s&&i.setNonce(s):i=new ck(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Yd=new Map;class ck{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Yd.get(r);if(s)return e[Ac]=s;this.sheet=new i.CSSStyleSheet,Yd.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Ac]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var er={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},js={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hk=typeof navigator<"u"&&/Mac/.test(navigator.platform),fk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ie=0;Ie<10;Ie++)er[48+Ie]=er[96+Ie]=String(Ie);for(var Ie=1;Ie<=24;Ie++)er[Ie+111]="F"+Ie;for(var Ie=65;Ie<=90;Ie++)er[Ie]=String.fromCharCode(Ie+32),js[Ie]=String.fromCharCode(Ie);for(var Za in er)js.hasOwnProperty(Za)||(js[Za]=er[Za]);function dk(t){var e=hk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||fk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?js:er)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function je(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)$0(t,arguments[e]);return t}function $0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)$0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Bs(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Ec(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function to(t,e){if(!e.anchorNode)return!1;try{return Ec(t,e.anchorNode)}catch{return!1}}function Is(t){return t.nodeType==3?Nr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function hs(t,e,n,r){return n?Jd(t,e,n,r,-1)||Jd(t,e,n,r,1):!1}function Tr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Lo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Jd(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:hn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Tr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?hn(t):0}else return!1}}function hn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ma(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function pk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function K0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function mk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,p=c==a.body,g=1,v=1;if(p)f=pk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:g,scaleY:v}=K0(c,y)),f={left:y.left,right:y.left+c.clientWidth*g,top:y.top,bottom:y.top+c.clientHeight*v}}let w=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+l),n>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+l,n<0&&e.top-m<f.top&&(m=e.top-(f.top+l)));else{let y=e.bottom-e.top,x=f.bottom-f.top;m=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-x+l)-f.top}if(r=="nearest"?e.left<f.left?(w=e.left-(f.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=e.left-(f.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||m)if(p)u.scrollBy(w,m);else{let y=0,x=0;if(m){let S=c.scrollTop;c.scrollTop+=m/v,x=(c.scrollTop-S)*v}if(w){let S=c.scrollLeft;c.scrollLeft+=w/g,y=(c.scrollLeft-S)*g}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-w)<1&&(r="nearest"),x&&Math.abs(x-m)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function gk(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class yk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?hn(n):0),r,Math.min(e.focusOffset,r?hn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let jr=null;function q0(t){if(t.setActive)return t.setActive();if(jr)return t.focus(jr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(jr==null?{get preventScroll(){return jr={preventScroll:!0},!0}}:void 0),!jr){jr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Xd;function Nr(t,e,n=e){let r=Xd||(Xd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function li(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function vk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function G0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function xk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,hn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=hn(n))}else{if(n==t)return!0;r=Tr(n),n=n.parentNode}}function Q0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Y0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=hn(n)}else if(n.parentNode&&!Lo(n))r=Tr(n),n=n.parentNode;else return null}}function J0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Lo(n))r=Tr(n)+1,n=n.parentNode;else return null}}class Qe{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Qe(e.parentNode,Tr(e),n)}static after(e,n){return new Qe(e.parentNode,Tr(e)+1,n)}}const Zh=[];class se{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=se.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=Zd(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Zd(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=hn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!se.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Zh){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new X0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}se.prototype.breakAfter=0;function Zd(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class X0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Z0(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let p=u[r];p&&(i<p.length||p.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(p=p.split(i),i=0),!f&&h&&p.merge(0,i,h,!0,0,a)?s[s.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),s.push(p))):p!=null&&p.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function ey(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,Z0(t,u,c,o,a,r,0,i,s)}let ot=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Mc=typeof document<"u"?document:{documentElement:{style:{}}};const Tc=/Edge\/(\d+)/.exec(ot.userAgent),ty=/MSIE \d/.test(ot.userAgent),Nc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ot.userAgent),ga=!!(ty||Nc||Tc),ep=!ga&&/gecko\/(\d+)/i.test(ot.userAgent),eu=!ga&&/Chrome\/(\d+)/.exec(ot.userAgent),wk="webkitFontSmoothing"in Mc.documentElement.style,ny=!ga&&/Apple Computer/.test(ot.vendor),tp=ny&&(/Mobile\/\w+/.test(ot.userAgent)||ot.maxTouchPoints>2);var L={mac:tp||/Mac/.test(ot.platform),windows:/Win/.test(ot.platform),linux:/Linux|X11/.test(ot.platform),ie:ga,ie_version:ty?Mc.documentMode||6:Nc?+Nc[1]:Tc?+Tc[1]:0,gecko:ep,gecko_version:ep?+(/Firefox\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,chrome:!!eu,chrome_version:eu?+eu[1]:0,ios:tp,android:/Android\b/.test(ot.userAgent),safari:ny,webkit_version:wk?+(/\bAppleWebKit\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,tabSize:Mc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const kk=256;class Kt extends se{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Kt)||this.length-(n-e)+r.length>kk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Kt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Qe(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Sk(this.dom,e,n)}}class En extends se{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(G0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof En&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(ey(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new En(this.mark,n,l)}domAtPos(e){return ry(this,e)}coordsAt(e,n){return sy(this,e,n)}}function Sk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?L.chrome||L.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Nr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return L.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ma(a,l<0):a||null}class vr extends se{static create(e,n,r){return new vr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=vr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof vr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof vr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return J.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):J.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qe.before(this.dom):Qe.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ma(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class vi extends se{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof vi&&e.side==this.side}split(){return new vi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qe.before(this.dom):Qe.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return J.empty}get isHidden(){return!0}}Kt.prototype.children=vr.prototype.children=vi.prototype.children=Zh;function ry(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Qe(n,0)}function iy(t,e,n){let r,{children:i}=t;n>0&&e instanceof En&&i.length&&(r=i[i.length-1])instanceof En&&r.mark.eq(e.mark)?iy(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function sy(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let p=u.children[h],g=f+p.length;g>=c&&(p.children.length?o(p,c-f):(!s||s.isHidden&&(n>0||bk(s,p)))&&(g>c||f==g&&p.getSide()>0)?(s=p,l=c-f):(f<c||f==g&&p.getSide()<0&&!p.isHidden)&&(r=p,i=c-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Ck(t)}function Ck(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Is(e);return n[n.length-1]||null}function bk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Oc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const np=Object.create(null);function Ro(t,e,n){if(t==e)return!0;t||(t=np),e||(e=np);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Dc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Ak(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Qs{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ot=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ot||(Ot={}));class $ extends yi{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ys(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new tr(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=ly(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new tr(e,r,i,n,e.widget||null,!0)}static line(e){return new Js(e)}static set(e,n=!1){return te.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}$.none=te.empty;class Ys extends ${constructor(e){let{start:n,end:r}=ly(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ys&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Ro(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ys.prototype.point=!1;class Js extends ${constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Js&&this.spec.class==e.spec.class&&Ro(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Js.prototype.mapMode=yt.TrackBefore;Js.prototype.point=!0;class tr extends ${constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?yt.TrackBefore:yt.TrackAfter:yt.TrackDel}get type(){return this.startSide!=this.endSide?Ot.WidgetRange:this.startSide<=0?Ot.WidgetBefore:Ot.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof tr&&Ek(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}tr.prototype.point=!0;function ly(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Ek(t,e){return t==e||!!(t&&e&&t.compare(e))}function no(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Ce extends se{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Ce))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),ey(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Ce;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ro(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){iy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Oc(n,this.attrs||{})),r&&(this.attrs=Oc({class:r},this.attrs||{}))}domAtPos(e){return ry(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(G0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Dc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&se.get(i)instanceof En;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=se.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!L.ios||!this.children.some(s=>s instanceof Kt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Kt)||/[^ -~]/.test(r.text))return null;let i=Is(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=sy(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ce&&this.children.length==0&&e.children.length==0&&Ro(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Ce)return s;if(l>n)break}i=l+s.breakAfter}return null}}class kn extends se{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof kn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Qe.before(this.dom):Qe.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new kn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Zh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):J.empty}domBoundsAround(){return null}become(e){return e instanceof kn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Pc?null:ma(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Pc extends Qs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class fs{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof kn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ce),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(bl(new vi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof kn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(bl(new Kt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof tr){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof tr)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new kn(r.widget||xi.block,o,r));else{let a=vr.create(r.widget||xi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(bl(new vi(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(bl(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new fs(e,n,r,s);return l.openEnd=te.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function bl(t,e){for(let n of e)t=new En(n,[t],t.length);return t}class xi extends Qs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}xi.inline=new xi("span");xi.block=new xi("div");var Me=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Me||(Me={}));const Or=Me.LTR,ef=Me.RTL;function oy(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Mk=oy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Tk=oy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Lc=Object.create(null),Xt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Lc[e]=n,Lc[n]=-e}function ay(t){return t<=247?Mk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Tk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Nk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class _n{get dir(){return this.level%2?ef:Or}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function uy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!uy(r.inner,i.inner))return!1}return!0}const ie=[];function Ok(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=ay(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),ie[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=ie[u];if(f==128)u<o-1&&c==ie[u+1]&&c&24?f=ie[u]=c:ie[u]=256;else if(f==64){let p=u+1;for(;p<o&&ie[p]==64;)p++;let g=u&&c==8||p<n&&ie[p]==8?h==1?1:8:256;for(let v=u;v<p;v++)ie[v]=g;u=p-1}else f==8&&h==1&&(ie[u]=1);c=f,f&7&&(h=f)}}}function Dk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,p,g;h<c;h++)if(p=Lc[f=t.charCodeAt(h)])if(p<0){for(let v=o-3;v>=0;v-=3)if(Xt[v+1]==-p){let w=Xt[v+2],m=w&2?i:w&4?w&1?s:i:0;m&&(ie[h]=ie[Xt[v]]=m),o=v;break}}else{if(Xt.length==189)break;Xt[o++]=h,Xt[o++]=f,Xt[o++]=a}else if((g=ie[h])==2||g==1){let v=g==i;a=v?0:1;for(let w=o-3;w>=0;w-=3){let m=Xt[w+2];if(m&2)break;if(v)Xt[w+2]|=2;else{if(m&4)break;Xt[w+2]|=4}}}}}function Pk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=ie[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(ie[c]==256)c++;else break;let h=s==1,f=(c<e?ie[c]:r)==1,p=h==f?h?1:2:r;for(let g=c,v=i,w=v?n[v-1].to:t;g>a;)g==w&&(g=n[--v].from,w=v?n[v-1].to:t),ie[--g]=p;a=c}else s=u,a++}}}function Rc(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let v=ie[a];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,p=c?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(h)break e;let v=s[u];if(!c)for(let w=v.to,m=u+1;;){if(w==n)break e;if(m<s.length&&s[m].from==w)w=s[m++].to;else{if(ie[w]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new _n(a,v.from,p));let w=v.direction==Or!=!(p%2);jc(t,w?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}g=v.to}else{if(g==n||(c?ie[g]!=o:ie[g]==o))break;g++}f?Rc(t,a,g,r+1,i,f,l):a<g&&l.push(new _n(a,g,p)),a=g}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let v=ie[a-1];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,p=c?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(h)break e;let v=s[--u];if(!c)for(let w=v.from,m=u;;){if(w==e)break e;if(m&&s[m-1].to==w)w=s[--m].from;else{if(ie[w-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new _n(v.to,a,p));let w=v.direction==Or!=!(p%2);jc(t,w?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}g=v.from}else{if(g==e||(c?ie[g-1]!=o:ie[g-1]==o))break;g--}f?Rc(t,g,a,r+1,i,f,l):g<a&&l.push(new _n(g,a,p)),a=g}}function jc(t,e,n,r,i,s,l){let o=e%2?2:1;Ok(t,i,s,r,o),Dk(t,i,s,r,o),Pk(i,s,r,o),Rc(t,i,s,e,n,r,l)}function Lk(t,e,n){if(!t)return[new _n(0,0,e==ef?1:0)];if(e==Or&&!n.length&&!Nk.test(t))return cy(t.length);if(n.length)for(;t.length>ie.length;)ie[ie.length]=256;let r=[],i=e==Or?0:1;return jc(t,i,i,n,0,t.length,r),r}function cy(t){return[new _n(0,t,0)]}let hy="";function Rk(t,e,n,r,i){var s;let l=r.head-t.from,o=_n.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=ze(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),hy=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?E.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):E.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function jk(t,e,n){for(let r=e;r<n;r++){let i=ay(t.charCodeAt(r));if(i==1)return Or;if(i==2||i==4)return ef}return Or}const fy=I.define(),dy=I.define(),py=I.define(),my=I.define(),Bc=I.define(),gy=I.define(),yy=I.define(),tf=I.define(),nf=I.define(),vy=I.define({combine:t=>t.some(e=>e)}),Bk=I.define({combine:t=>t.some(e=>e)}),xy=I.define();class oi{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new oi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new oi(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Al=oe.define({map:(t,e)=>t.map(e)}),wy=oe.define();function on(t,e,n){let r=t.facet(my);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const gn=I.define({combine:t=>t.length?t[0]:!0});let Ik=0;const Yr=I.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class kt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Yr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Yr.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new kt(Ik++,e,r,i,o=>{let a=[];return l&&a.push(Fs.of(u=>{let c=u.plugin(o);return c?l(c):$.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return kt.define((r,i)=>new e(r,i),n)}}class tu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(on(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){on(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){on(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ky=I.define(),rf=I.define(),Fs=I.define(),Sy=I.define(),Xs=I.define(),Cy=I.define();function rp(t,e){let n=t.state.facet(Cy);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return te.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let p=o[f].spec.bidiIsolate,g;if(p==null&&(p=jk(e.text,u,c)),a>0&&h.length&&(g=h[h.length-1]).to==u&&g.direction==p)g.to=c,h=g.inner;else{let v={from:u,to:c,direction:p,inner:[]};h.push(v),h=v.inner}}}}),i}const by=I.define();function Ay(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(by)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Ji=I.define();class Dt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Dt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],p=Math.max(o,h),g=Math.min(c,f);if(p<=g&&new Dt(p+u,g+u,p,g).addToSet(r),f>c)break;s+=2}if(!a)return r;new Dt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class jo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ne.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Dt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new jo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class ip extends se{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=$.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ce],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Dt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Uk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?zk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Dt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(L.ie||L.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Wk(l,o,e.changes);return r=Dt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=L.chrome||L.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof kn&&l.widget instanceof Pc&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,p,g,v;if(r&&r.range.fromB<h&&r.range.toB>c){let S=fs.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=fs.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,v=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&A.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(A).concat(C.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:v}=fs.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:w,off:m}=s.findPos(u,1),{i:y,off:x}=s.findPos(a,-1);Z0(this,y,x,w,m,f,p,g,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(wy)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Kt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new En(i,[n],n.length);let r=new Ce;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=se.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(gn)||this.dom.tabIndex>-1)&&to(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(L.gecko&&o.empty&&!this.hasComposition&&Fk(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Qe(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!hs(a.node,a.offset,c.anchorNode,c.anchorOffset)||!hs(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{L.android&&L.chrome&&this.dom.contains(c.focusNode)&&Vk(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Bs(this.view.root);if(h)if(o.empty){if(L.gecko){let f=_k(a.node,a.offset);if(f&&f!=3){let p=(f==1?Y0:J0)(a.node,a.offset);p&&(a=new Qe(p.node,p.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Qe(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Qe(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&hs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Bs(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Ce.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=se.get(n.childNodes[i]);s instanceof Ce&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=se.get(n.childNodes[i]);s instanceof Ce&&(r=s.domAtPos(s.length))}return r?new Qe(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=se.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Ce)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Ce&&!(r instanceof Ce&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof kn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Ce))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Kt))return null;let s=ze(i.text,r);if(s==r)return null;let l=Nr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Me.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let p=h.dom.getBoundingClientRect();if(n.push(p.height),l){let g=h.dom.lastChild,v=g?Is(g):[];if(v.length){let w=v[v.length-1],m=a?w.right-p.left:p.right-w.left;m>o&&(o=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Me.RTL:Me.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ce){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Is(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new X0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push($.replace({widget:new Pc(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return $.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Fs).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Sy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(te.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(xy))try{if(u(this.view,e.range,e))return!0}catch(c){on(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Ay(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;mk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Me.LTR)}}function Fk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Ey(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Y0(n.focusNode,n.focusOffset),i=J0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=se.get(i.node);if(!o||o instanceof Kt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=se.get(r.node);!a||a instanceof Kt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function zk(t,e,n){let r=Ey(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Dt(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=se.get(h);if(f instanceof En)c.push({node:h,deco:f.mark});else{if(f instanceof Ce||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Ys({inclusive:!0,attributes:Ak(h),tagName:h.tagName.toLowerCase()})});else return null}}}function _k(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Hk=class{constructor(){this.changes=[]}compareRange(e,n){no(e,n,this.changes)}comparePoint(e,n){no(e,n,this.changes)}boundChange(e){no(e,e,this.changes)}};function Wk(t,e,n){let r=new Hk;return te.compare(t,e,n,r),r.changes}function Vk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Uk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function $k(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=ze(i.text,s,!1):o=ze(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=ze(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=ze(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function Kk(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function qk(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function nu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function sp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function lp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Ic(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let g=t.firstChild;g;g=g.nextSibling){let v=Is(g);for(let w=0;w<v.length;w++){let m=v[w];i&&nu(i,m)&&(m=sp(lp(m,i.bottom),i.top));let y=Kk(e,m),x=qk(n,m);if(y==0&&x==0)return g.nodeType==3?op(g,e,n):Ic(g,e,n);(!r||l>x||l==x&&s>y)&&(r=g,i=m,s=y,l=x,o=y?e<m.left?w>0:w<v.length-1:!0),y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(a=g,c=m):n<m.top&&(!h||h.top>m.top)&&(u=g,h=m):c&&nu(c,m)?c=lp(c,m.bottom):h&&nu(h,m)&&(h=sp(h,m.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return op(r,f,n);if(o&&r.contentEditable!="false")return Ic(r,f,n);let p=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:p}}function op(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Nr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,p=f;if((L.chrome||L.gecko)&&Nr(t,o).getBoundingClientRect().left==c.right&&(p=!f),h<=0)return{node:t,offset:o+(p?1:0)};i=o+(p?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function My(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Ot.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let p=a.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:ap(t,l,a,c,h);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:ap(t,l,a,c,h);let g=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:g,w=v.elementFromPoint(c,h);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(l.left+1,Math.min(l.right-1,c)),w=v.elementFromPoint(c,h),w&&!t.contentDOM.contains(w)&&(w=null));let m,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,h);S&&({offsetNode:m,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,h);S&&({startContainer:m,startOffset:y}=S)}m&&(!t.contentDOM.contains(m)||L.safari&&Gk(m,y,c)||L.chrome&&Qk(m,y,c))&&(m=void 0),m&&(y=Math.min(hn(m),y))}if(!m||!t.docView.dom.contains(m)){let S=Ce.find(t.docView,p);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=Ic(S.dom,c,h))}let x=t.docView.nearest(m);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(m,y)+x.posAtStart}function ap(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+uk(l,s,t.state.tabSize)}function Ty(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Nr(t,r-1,r).getBoundingClientRect().right>n}function Gk(t,e,n){return Ty(t,e,n)}function Qk(t,e,n){if(e!=0)return Ty(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Nr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Yk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Ot.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function Jk(t,e,n,r){let i=Yk(t,e.head,e.assoc||-1),s=!r||i.type!=Ot.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Me.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function up(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Rk(i,s,l,o,n),c=hy;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function Xk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==_e.Space&&(i=l),i==l}}function Zk(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let p=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-p.from))),o=(s<0?p.top:p.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=o+(f+p)*s,v=My(t,{x:h,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?v<i:v>i)){let w=t.docView.coordsForChar(v),m=!w||g<w.top?-1:1;return E.cursor(v,m,void 0,l)}}}function ds(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function Ny(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=ds(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=ds(t,i.from,-1),o=ds(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function ru(t,e,n){let r=ds(t.state.facet(Xs).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const Xi="";class eS{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Xi}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=se.get(i),a=se.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:Lo(i))||Lo(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=se.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(tS(e,r.node,r.offset)?n:0))}}function tS(t,e,n){for(;;){if(!e||n<hn(e))return!1;if(e==t)return!0;n=Tr(e)+1,e=e.parentNode}}class cp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class nS{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:sS(e),a=new eS(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=lS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Ec(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Ec(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((L.ios||L.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),p=c.from-h,g=c.to-f;(p==0||p==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function Oy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||L.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=iS(t.state.doc.sliceString(l,o,Xi),e.text,a-l,u);c&&(L.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Xi+Xi&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:J.of(e.text.slice(c.from,c.toB).split(Xi))})}else r&&(!t.hasFocus&&t.state.facet(gn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(L.mac||L.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:J.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:L.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:J.of([" "])}),n)return sf(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=Ny(t.state.facet(Xs).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function sf(t,e,n,r=-1){if(L.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(L.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&li(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&li(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&li(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=rS(t,e,n));return t.state.facet(gy).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function rS(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=ds(i.facet(Xs).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&Ey(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-v}}else h=t.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let w=v.to-p,m=w-c.length;if(v.to-v.from!=g||t.state.sliceDoc(m,w)!=c||v.to>=h.from&&v.from<=h.to)return{range:v};let y=i.changes({from:m,to:w,insert:e.insert}),x=v.to-s.to;return{changes:y,range:u?E.range(Math.max(0,u.anchor+x),Math.max(0,u.head+x)):v.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function iS(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function sS(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new cp(n,r)),(i!=n||s!=r)&&e.push(new cp(i,s))),e}function lS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class oS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,L.safari&&e.contentDOM.addEventListener("input",()=>null),L.gecko&&CS(e.contentDOM.ownerDocument)}handleEvent(e){!mS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=aS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Py.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),L.android&&L.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return L.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Dy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||uS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,li(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:L.safari&&!L.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function hp(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){on(n.state,i)}}}function aS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(hp(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(hp(r.value,a))}}for(let r in qt)n(r).handlers.push(qt[r]);for(let r in jt)n(r).observers.push(jt[r]);return e}const Dy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],uS="dthko",Py=[16,17,18,20,91,92,224,225],El=6;function Ml(t){return Math.max(0,t)*.7+8}function cS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class hS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=gk(e.contentDOM),this.atoms=e.state.facet(Xs).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Z.allowMultipleSelections)&&fS(e,n),this.dragging=pS(e,n)&&jy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&cS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=Ay(this.view);e.clientX-a.left<=i+El?n=-Ml(i-e.clientX):e.clientX+a.right>=l-El&&(n=Ml(e.clientX-l)),e.clientY-a.top<=s+El?r=-Ml(s-e.clientY):e.clientY+a.bottom>=o-El&&(r=Ml(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=Ny(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function fS(t,e){let n=t.state.facet(fy);return n.length?n[0](e):L.mac?e.metaKey:e.ctrlKey}function dS(t,e){let n=t.state.facet(dy);return n.length?n[0](e):L.mac?!e.altKey:!e.ctrlKey}function pS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Bs(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function mS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=se.get(n))&&r.ignoreEvent(e))return!1;return!0}const qt=Object.create(null),jt=Object.create(null),Ly=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;function gS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Ry(t,n.value)},50)}function ya(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Ry(t,e){e=ya(t.state,tf,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Fc!=null&&n.selection.ranges.every(a=>a.empty)&&Fc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:E.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}jt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};qt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);jt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};jt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};qt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(py))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=xS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new hS(t,e,n,r)),r&&t.observer.ignore(()=>{q0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function fp(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return $k(t.state,e,n);{let i=Ce.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let dp=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function yS(t,e,n,r){let i=Ce.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&dp(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&dp(n,r,o)?1:l&&l.bottom>=r?-1:1}function pp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:yS(t,n,e.clientX,e.clientY)}}const vS=L.ie&&L.ie_version<=11;let mp=null,gp=0,yp=0;function jy(t){if(!vS)return t.detail;let e=mp,n=yp;return mp=t,yp=Date.now(),gp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(gp+1)%3:1}function xS(t,e){let n=pp(t,e),r=jy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=pp(t,s),u,c=fp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=fp(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),p=Math.max(h.to,c.to);c=f<c.from?E.range(f,p):E.range(p,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=wS(i,a.pos))?u:o?i.addRange(c):E.create([c])}}}function wS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}qt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",ya(t.state,nf,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};qt.dragend=t=>(t.inputState.draggedContent=null,!1);function vp(t,e,n,r){if(n=ya(t.state,tf,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&dS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}qt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&vp(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return vp(t,e,r,!0),!0}return!1};qt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Ly?null:e.clipboardData;return n?(Ry(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(gS(t),!1)};function kS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function SS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:ya(t,nf,e.join(t.lineBreak)),ranges:n,linewise:r}}let Fc=null;qt.copy=qt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=SS(t.state);if(!n&&!i)return!1;Fc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Ly?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(kS(t,n),!1)};const By=Ei.define();function Iy(t,e){let n=[];for(let r of t.facet(yy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:By.of(!0)}):null}function Fy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Iy(t.state,e);n?t.dispatch(n):t.update([])}},10)}jt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Fy(t)};jt.blur=t=>{t.observer.clearSelectionRange(),Fy(t)};jt.compositionstart=jt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};jt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,L.chrome&&L.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};jt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};qt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return sf(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(L.chrome&&L.android&&(i=Dy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return L.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),L.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>jt.compositionend(t,e),20),!1};const xp=new Set;function CS(t){xp.has(t)||(xp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const wp=["pre-wrap","normal","pre-line","break-spaces"];let wi=!1;function kp(){wi=!1}class bS{constructor(e){this.lineWrapping=e,this.doc=J.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=wp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class AS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ln{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ot.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof tr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ln(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ue=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ue||(ue={}));const ro=.001;class nt{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ro&&(wi=!0),this.height=e)}replace(e,n,r){return nt.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,ue.ByPosNoHeight,r.setDoc(n),0,0),p=f.to>=u?f:s.lineAt(u,ue.ByPosNoHeight,r,0,0);for(h+=p.to-u,u=p.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ue.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let g=lf.build(r.setDoc(l),e,c,h);s=Bo(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new gt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new ES(nt.of(e.slice(0,n)),l,nt.of(e.slice(r)))}}function Bo(t,e){return t==e?t:(t.constructor!=e.constructor&&(wi=!0),e)}nt.prototype.size=1;class zy extends nt{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new ln(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class gt extends zy{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new ln(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof gt||i instanceof Be&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Be?i=new gt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):nt.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Be extends nt{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new ln(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new ln(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ue.ByHeight)return this.blockAt(e,r,i,s);if(n==ue.ByPosNoHeight){let{from:p,to:g}=r.doc.lineAt(e);return new ln(p,g-p,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new ln(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let g=f.number-o;h+=a*g+u*(e-s-g)}let p=a+u*f.length;l(new ln(f.from,f.length,h,p,0)),h+=p,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Be?r[r.length-1]=new Be(s.length+i):r.push(null,new Be(i-1))}if(e>0){let s=r[0];s instanceof Be?r[0]=new Be(e+s.length):r.unshift(new Be(e-1),null)}return nt.of(r)}decomposeLeft(e,n){n.push(new Be(e-1),null)}decomposeRight(e,n){n.push(null,new Be(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Be(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=ro&&(a=-2);let f=new gt(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Be(s-o).updateHeight(e,o));let u=nt.of(l);return(a<0||Math.abs(u.height-this.height)>=ro||Math.abs(a-this.heightMetrics(e,n).perLine)>=ro)&&(wi=!0),Bo(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ES extends nt{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ue.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==ue.ByPosNoHeight?ue.ByPosNoHeight:ue.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ue.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Sp(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Sp(s,o)}return nt.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?nt.of(this.break?[e,null,n]:[e,n]):(this.left=Bo(this.left,e),this.right=Bo(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Sp(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Be&&(r=t[e+1])instanceof Be&&t.splice(e-1,3,new Be(n.length+1+r.length))}const MS=5;class lf{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof gt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new gt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new zy(l,i,r)):(l||s||i>=MS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new gt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Be(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof gt)return e;let n=new gt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof gt)&&!this.isCovered?this.nodes.push(new gt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof gt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new lf(r,e);return te.spans(n,r,i,s,0),s.finish(r)}}function TS(t,e,n){let r=new NS;return te.compare(t,e,n,r,0),r.changes}class NS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&no(e,n,this.changes,5)}}function OS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function DS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function PS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class iu{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return $.replace({widget:new LS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class LS extends Qs{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Cp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=bp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Me.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(rf).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new bS(n),this.stateDeco=e.facet(Fs).filter(r=>typeof r!="function"),this.heightMap=nt.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle.setDoc(e.doc),[new Dt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=$.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new Tl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?bp:new of(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Zi(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Fs).filter(c=>typeof c!="function");let i=e.changedRanges,s=Dt.extendWithRanges(i,TS(r,this.stateDeco,e?e.changes:Ne.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);kp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||wi)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Bk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Me.RTL:Me.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=K0(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Q0(e.scrollDOM);let g=(this.printing?PS:OS)(n,this.paddingTop),v=g.top-this.pixelViewport.top,w=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!DS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,y/A),S),l&&(e.docView.minWidth=0,u|=16)}v>0&&w>0?c=Math.max(v,w):v<0&&w<0&&(c=Math.min(v,w)),kp();for(let C of this.viewports){let A=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?nt.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle,[new Dt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new AS(C.from,A))}wi&&(u|=2)}let x=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Tl(i.lineAt(l-r*1e3,ue.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ue.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,ue.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new Tl(i.lineAt(f-1e3/2,ue.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,ue.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Tl(this.heightMap.lineAt(r,ue.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ue.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ue.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ue.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new iu(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Me.LTR&&!r)return[];let o=[],a=(c,h,f,p)=>{if(h-c<s)return;let g=this.state.selection.main,v=[g.from];g.empty||v.push(g.to);for(let m of v)if(m>c&&m<h){a(c,m-10,f,p),a(m+10,h,f,p);return}let w=jS(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-h)<s&&!v.some(y=>m.from<y&&m.to>y));if(!w){if(h<f.to&&n&&r&&n.visibleRanges.some(x=>x.from<=h&&x.to>=h)){let x=n.moveToLineBoundary(E.cursor(h),!1,!0).head;x>c&&(h=x)}let m=this.gapSize(f,c,h,p),y=r||m<2e6?m:2e6;w=new iu(c,h,m,y)}o.push(w)},u=c=>{if(c.length<l||c.type!=Ot.Text)return;let h=RS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,m;if(f!=null){let y=Ol(h,f),x=((this.visibleBottom-this.visibleTop)/2+v)/c.height;w=y-x,m=y+x}else w=(this.visibleTop-c.top-v)/c.height,m=(this.visibleBottom-c.top+v)/c.height;p=Nl(h,w),g=Nl(h,m)}else{let v=h.total*this.heightOracle.charWidth,w=i*this.heightOracle.charWidth,m=0;if(v>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=A.size-A.displaySize);let y=this.pixelViewport.left+m,x=this.pixelViewport.right+m,S,C;if(f!=null){let A=Ol(h,f),b=((x-y)/2+w)/v;S=A-b,C=A+b}else S=(y-w)/v,C=(x+w)/v;p=Nl(h,S),g=Nl(h,C)}p>c.from&&a(c.from,p,c,h),g<c.to&&a(g,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=Ol(i,r)-Ol(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){iu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=$.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];te.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Zi(this.heightMap.lineAt(e,ue.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Zi(this.heightMap.lineAt(this.scaler.fromDOM(e),ue.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Zi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Tl{constructor(e,n){this.from=e,this.to=n}}function RS(t,e,n){let r=[],i=t,s=0;return te.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Nl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function Ol(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function jS(t,e){for(let n of t)if(e(n))return n}const bp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class of{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ue.ByPos,e,0,0).top,c=n.lineAt(a,ue.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof of?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Zi(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new ln(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Zi(i,e)):t._content)}const Dl=I.define({combine:t=>t.join(" ")}),zc=I.define({combine:t=>t.indexOf(!0)>-1}),_c=Zn.newName(),_y=Zn.newName(),Hy=Zn.newName(),Wy={"&light":"."+_y,"&dark":"."+Hy};function Hc(t,e,n){return new Zn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const BS=Hc("."+_c,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Wy),IS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},su=L.ie&&L.ie_version<=11;class FS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new yk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(L.ie&&L.ie_version<=11||L.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&L.android&&e.constructor.EDIT_CONTEXT!==!1&&!(L.chrome&&L.chrome_version<126)&&(this.editContext=new _S(e),e.state.facet(gn)&&(e.contentDOM.editContext=this.editContext.editContext)),su&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(gn)?r.root.activeElement!=this.dom:!to(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(L.ie&&L.ie_version<=11||L.android&&L.chrome)&&!r.state.selection.main.empty&&i.focusNode&&hs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Bs(e.root);if(!n)return!1;let r=L.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&zS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=to(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&xk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,IS),su&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),su&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&li(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&to(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new nS(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Oy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Ap(n,e.previousSibling||e.target.previousSibling,-1),i=Ap(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(gn)!=e.state.facet(gn)&&(e.view.contentDOM.editContext=e.state.facet(gn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ap(t,e,n){for(;e;){let r=se.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Ep(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return hs(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function zS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Ep(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?Ep(t,n):null}class _S{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:J.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((L.mac||L.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:J.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);sf(e,u,E.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push($.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:wy.of($.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Bs(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class B{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||vk(e.parent)||document,this.viewState=new Cp(e.state||Z.create(e)),e.scrollTo&&e.scrollTo.is(Al)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Yr).map(i=>new tu(i));for(let i of this.plugins)i.update(this);this.observer=new FS(this),this.inputState=new oS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ip(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ye?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(By))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Iy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Z.phrases)!=this.state.facet(Z.phrases))return this.setState(s);i=jo.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;h=new oi(p.empty?p:E.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Al)&&(h=p.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Io.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ji)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Dl)!=i.state.facet(Dl)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Bc))try{f(i)}catch(p){on(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Oy(this,c)&&u.force&&li(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Cp(e),this.plugins=e.facet(Yr).map(r=>new tu(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new ip(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Yr),r=e.state.facet(Yr);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new tu(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){on(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(Q0(r))s=-1,l=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);s=p.from,l=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(p=>{try{return p.read(this)}catch(g){return on(this.state,g),Mp}}),h=jo.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(c[p]!=Mp)try{let g=u[p];g.write&&g.write(c[p],this)}catch(g){on(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Bc))o(n)}get themeClasses(){return _c+" "+(this.state.facet(zc)?Hy:_y)+" "+this.state.facet(Dl)}updateAttrs(){let e=Tp(this,ky,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(gn)?"true":"false",class:"cm-content",style:`${L.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Tp(this,rf,n);let r=this.observer.ignore(()=>{let i=Dc(this.contentDOM,this.contentAttrs,n),s=Dc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(B.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ji);let e=this.state.facet(B.cspNonce);Zn.mount(this.root,this.styleModules.concat(BS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return ru(this,e,up(this,e,n,r))}moveByGroup(e,n){return ru(this,e,up(this,e,n,r=>Xk(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return Jk(this,e,n,r)}moveVertically(e,n,r){return ru(this,e,Zk(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),My(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[_n.find(s,e-i.from,-1,n)];return ma(r,l.dir==Me.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(vy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>HS)return cy(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||uy(s.isolates,r=rp(this,e))))return s.order;r||(r=rp(this,e));let i=Lk(e.text,n,r);return this.bidiCache.push(new Io(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||L.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{q0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Al.of(new oi(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Al.of(new oi(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return kt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return kt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Zn.newName(),i=[Dl.of(r),Ji.of(Hc(`.${r}`,e))];return n&&n.dark&&i.push(zc.of(!0)),i}static baseTheme(e){return ha.lowest(Ji.of(Hc("."+_c,e,Wy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&se.get(r)||se.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}B.styleModule=Ji;B.inputHandler=gy;B.clipboardInputFilter=tf;B.clipboardOutputFilter=nf;B.scrollHandler=xy;B.focusChangeEffect=yy;B.perLineTextDirection=vy;B.exceptionSink=my;B.updateListener=Bc;B.editable=gn;B.mouseSelectionStyle=py;B.dragMovesSelection=dy;B.clickAddsSelectionRange=fy;B.decorations=Fs;B.outerDecorations=Sy;B.atomicRanges=Xs;B.bidiIsolatedRanges=Cy;B.scrollMargins=by;B.darkTheme=zc;B.cspNonce=I.define({combine:t=>t.length?t[0]:""});B.contentAttributes=rf;B.editorAttributes=ky;B.lineWrapping=B.contentAttributes.of({class:"cm-lineWrapping"});B.announce=oe.define();const HS=4096,Mp={};class Io{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Me.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Io(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function Tp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Oc(l,n)}return n}const WS=L.mac?"mac":L.windows?"win":L.linux?"linux":"key";function VS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Pl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const US=ha.default(B.domEventHandlers({keydown(t,e){return $y(Uy(e.state),t,e,"editor")}})),Vy=I.define({enables:US}),Np=new WeakMap;function Uy(t){let e=t.facet(Vy),n=Np.get(e);return n||Np.set(e,n=qS(e.reduce((r,i)=>r.concat(i),[]))),n}function $S(t,e,n){return $y(Uy(t.state),e,t,n)}let Bn=null;const KS=4e3;function qS(t,e=WS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let p=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(m=>VS(m,e));for(let m=1;m<g.length;m++){let y=g.slice(0,m).join(" ");i(y,!0),p[y]||(p[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Bn={view:x,prefix:y,scope:l};return setTimeout(()=>{Bn==S&&(Bn=null)},KS),!0}]})}let v=g.join(" ");i(v,!1);let w=p[v]||(p[v]={preventDefault:!1,stopPropagation:!1,run:((f=(h=p._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&w.run.push(a),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(p=>h(p,Wc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Wc=null;function $y(t,e,n,r){Wc=e;let i=dk(e),s=O0(i,0),l=D0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;Bn&&Bn.view==n&&Bn.scope==r&&(o=Bn.prefix+" ",Py.indexOf(e.keyCode)<0&&(u=!0,Bn=null));let h=new Set,f=w=>{if(w){for(let m of w.run)if(!h.has(m)&&(h.add(m),m(n)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},p=t[r],g,v;return p&&(f(p[o+Pl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(L.windows&&e.ctrlKey&&e.altKey)&&!(L.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=er[e.keyCode])&&g!=i?(f(p[o+Pl(g,e,!0)])||e.shiftKey&&(v=js[e.keyCode])!=i&&v!=g&&f(p[o+Pl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(p[o+Pl(i,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Wc=null,a}function GS(){return YS}const QS=$.line({class:"cm-activeLine"}),YS=kt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(QS.range(i.from)),e=i.from)}return $.set(n)}},{decorations:t=>t.decorations}),Op=I.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Fo(t,e){let n=t.plugin(Ky),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Ky=kt.fromClass(class{constructor(t){this.input=t.state.facet(zo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(Op);this.top=new Ll(t,!0,e.topContainer),this.bottom=new Ll(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(Op);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ll(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ll(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(zo);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>B.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Ll{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Dp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Dp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Dp(t){let e=t.nextSibling;return t.remove(),e}const zo=I.define({enables:Ky});class nr extends yi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}nr.prototype.elementClass="";nr.prototype.toDOM=void 0;nr.prototype.mapMode=yt.TrackBefore;nr.prototype.startSide=nr.prototype.endSide=-1;nr.prototype.point=!0;const lu=I.define(),JS=I.define(),XS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ps=I.define();function ZS(t){return[qy(),ps.of({...XS,...t})]}const Pp=I.define({combine:t=>t.some(e=>e)});function qy(t){return[eC]}const eC=kt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ps).map(e=>new Rp(t,e)),this.fixed=!t.state.facet(Pp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Pp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=te.iter(this.view.state.facet(lu),this.view.viewport.from),r=[],i=this.gutters.map(s=>new tC(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Ot.Text&&l){Vc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Ot.Text){Vc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ps),n=t.state.facet(ps),r=t.docChanged||t.heightChanged||t.viewportChanged||!te.eq(t.startState.facet(lu),t.state.facet(lu),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Rp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>B.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Me.LTR?{left:r,right:i}:{right:r,left:i}})});function Lp(t){return Array.isArray(t)?t:[t]}function Vc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class tC{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=te.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Gy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Vc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(JS)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Rp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=Lp(n.markers(e)),n.initialSpacer&&(this.spacer=new Gy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Lp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!te.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Gy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),nC(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function nC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const rC=I.define(),iC=I.define(),Jr=I.define({combine(t){return da(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class ou extends nr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function au(t,e){return t.state.facet(Jr).formatNumber(e,t.state)}const sC=ps.compute([Jr],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(rC)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new ou(au(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(iC)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Jr)!=e.state.facet(Jr),initialSpacer(e){return new ou(au(e,jp(e.state.doc.lines)))},updateSpacer(e,n){let r=au(n.view,jp(n.view.state.doc.lines));return r==e.number?e:new ou(r)},domEventHandlers:t.facet(Jr).domEventHandlers,side:"before"}));function lC(t={}){return[Jr.of(t),qy(),sC]}function jp(t){let e=9;for(;e<t;)e=e*10+9;return e}const oC=1024;let aC=0;class uu{constructor(e,n){this.from=e,this.to=n}}class Q{constructor(e={}){this.id=aC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ft.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Q.closedBy=new Q({deserialize:t=>t.split(" ")});Q.openedBy=new Q({deserialize:t=>t.split(" ")});Q.group=new Q({deserialize:t=>t.split(" ")});Q.isolate=new Q({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Q.contextHash=new Q({perNode:!0});Q.lookAhead=new Q({perNode:!0});Q.mounted=new Q({perNode:!0});class _o{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Q.mounted.id]}}const uC=Object.create(null);class ft{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):uC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ft(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Q.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Q.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}ft.none=new ft("",Object.create(null),0,8);class af{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new ft(r.name,i,r.id,r.flags):r)}return new af(n)}}const Rl=new WeakMap,Bp=new WeakMap;var Fe;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Fe||(Fe={}));class me{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=_o.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new $c(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Rl.get(this)||this.topNode,s=new $c(i);return s.moveTo(e,n),Rl.set(this,s._tree),s}get topNode(){return new Pt(this,0,0,null)}resolve(e,n=0){let r=zs(Rl.get(this)||this.topNode,e,n,!1);return Rl.set(this,r),r}resolveInner(e,n=0){let r=zs(Bp.get(this)||this.topNode,e,n,!0);return Bp.set(this,r),r}resolveStack(e,n=0){return fC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Fe.IncludeAnonymous)>0;for(let a=this.cursor(l|Fe.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:hf(ft.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new me(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new me(ft.none,n,r,i)))}static build(e){return dC(e)}}me.empty=new me(ft.none,[],[],0);class uf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new uf(this.buffer,this.index)}}class rr{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return ft.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(Qy(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new rr(s,l,this.set)}}function Qy(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function zs(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Pt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Fe.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Pt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Yy{cursor(e=0){return new $c(this,e)}getChild(e,n=null,r=null){let i=Ip(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Ip(this,e,n,r)}resolve(e,n=0){return zs(this,e,n,!1)}resolveInner(e,n=0){return zs(this,e,n,!0)}matchContext(e){return Uc(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Pt extends Yy{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(Qy(i,r,h,h+c.length)){if(c instanceof rr){if(s&Fe.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new Hn(new cC(l,c,e,h),null,f)}else if(s&Fe.IncludeAnonymous||!c.type.isAnonymous||cf(c)){let f;if(!(s&Fe.IgnoreMounts)&&(f=_o.get(c))&&!f.overlay)return new Pt(f.tree,h,e,l);let p=new Pt(c,h,e,l);return s&Fe.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Fe.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Fe.IgnoreOverlays)&&(i=_o.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Pt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ip(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Uc(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class cC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Hn extends Yy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Hn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Fe.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Hn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Hn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Hn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new me(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Jy(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Pt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new hC(i,n)}class hC{constructor(e,n){this.heads=e,this.node=n}get next(){return Jy(this.heads)}}function fC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Pt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=_o.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Pt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(zs(o,e,n,!1))}}return i?Jy(i):r}class $c{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Pt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Pt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Fe.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Fe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Fe.IncludeAnonymous||o instanceof rr||!o.type.isAnonymous||cf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Hn(this.buffer,n,this.stack[i]);return this.bufferNode=new Hn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Uc(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Uc(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function cf(t){return t.children.some(e=>e instanceof rr||!e.type.isAnonymous||cf(e))}function dC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=oC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new uf(n,n.length):n,a=r.types,u=0,c=0;function h(C,A,b,N,H,j){let{id:W,start:z,end:q,size:ee}=o,he=c,Ze=u;for(;ee<0;)if(o.next(),ee==-1){let Y=s[W];b.push(Y),N.push(z-C);return}else if(ee==-3){u=W;return}else if(ee==-4){c=W;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let st=a[W],D,_,U=z-C;if(q-z<=i&&(_=w(o.pos-A,H))){let Y=new Uint16Array(_.size-_.skip),G=o.pos-_.size,fe=Y.length;for(;o.pos>G;)fe=m(_.start,Y,fe);D=new rr(Y,q-_.start,r),U=_.start-C}else{let Y=o.pos-ee;o.next();let G=[],fe=[],De=W>=l?W:-1,xe=0,F=q;for(;o.pos>Y;)De>=0&&o.id==De&&o.size>=0?(o.end<=F-i&&(g(G,fe,z,xe,o.end,F,De,he,Ze),xe=G.length,F=o.end),o.next()):j>2500?f(z,Y,G,fe):h(z,Y,G,fe,De,j+1);if(De>=0&&xe>0&&xe<G.length&&g(G,fe,z,xe,z,F,De,he,Ze),G.reverse(),fe.reverse(),De>-1&&xe>0){let Se=p(st,Ze);D=hf(st,G,fe,0,G.length,0,q-z,Se,Se)}else D=v(st,G,fe,q-z,he-q,Ze)}b.push(D),N.push(U)}function f(C,A,b,N){let H=[],j=0,W=-1;for(;o.pos>A;){let{id:z,start:q,end:ee,size:he}=o;if(he>4)o.next();else{if(W>-1&&q<W)break;W<0&&(W=ee-i),H.push(z,q,ee),j++,o.next()}}if(j){let z=new Uint16Array(j*4),q=H[H.length-2];for(let ee=H.length-3,he=0;ee>=0;ee-=3)z[he++]=H[ee],z[he++]=H[ee+1]-q,z[he++]=H[ee+2]-q,z[he++]=he;b.push(new rr(z,H[2]-q,r)),N.push(q-C)}}function p(C,A){return(b,N,H)=>{let j=0,W=b.length-1,z,q;if(W>=0&&(z=b[W])instanceof me){if(!W&&z.type==C&&z.length==H)return z;(q=z.prop(Q.lookAhead))&&(j=N[W]+z.length+q)}return v(C,b,N,H,j,A)}}function g(C,A,b,N,H,j,W,z,q){let ee=[],he=[];for(;C.length>N;)ee.push(C.pop()),he.push(A.pop()+b-H);C.push(v(r.types[W],ee,he,j-H,z-j,q)),A.push(H-b)}function v(C,A,b,N,H,j,W){if(j){let z=[Q.contextHash,j];W=W?[z].concat(W):[z]}if(H>25){let z=[Q.lookAhead,H];W=W?[z].concat(W):[z]}return new me(C,A,b,N,W)}function w(C,A){let b=o.fork(),N=0,H=0,j=0,W=b.end-i,z={size:0,start:0,skip:0};e:for(let q=b.pos-C;b.pos>q;){let ee=b.size;if(b.id==A&&ee>=0){z.size=N,z.start=H,z.skip=j,j+=4,N+=4,b.next();continue}let he=b.pos-ee;if(ee<0||he<q||b.start<W)break;let Ze=b.id>=l?4:0,st=b.start;for(b.next();b.pos>he;){if(b.size<0)if(b.size==-3)Ze+=4;else break e;else b.id>=l&&(Ze+=4);b.next()}H=st,N+=ee,j+=Ze}return(A<0||N==C)&&(z.size=N,z.start=H,z.skip=j),z.size>4?z:void 0}function m(C,A,b){let{id:N,start:H,end:j,size:W}=o;if(o.next(),W>=0&&N<l){let z=b;if(W>4){let q=o.pos-(W-4);for(;o.pos>q;)b=m(C,A,b)}A[--b]=z,A[--b]=j-C,A[--b]=H-C,A[--b]=N}else W==-3?u=N:W==-4&&(c=N);return b}let y=[],x=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,y,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new me(a[t.topID],y.reverse(),x.reverse(),S)}const Fp=new WeakMap;function io(t,e){if(!t.isAnonymous||e instanceof rr||e.type!=t)return 1;let n=Fp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof me)){n=1;break}n+=io(t,r)}Fp.set(e,n)}return n}function hf(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=io(t,e[g]);let c=Math.ceil(u*1.5/8),h=[],f=[];function p(g,v,w,m,y){for(let x=w;x<m;){let S=x,C=v[x],A=io(t,g[x]);for(x++;x<m;x++){let b=io(t,g[x]);if(A+b>=c)break;A+=b}if(x==S+1){if(A>c){let b=g[S];p(b.children,b.positions,0,b.children.length,v[S]+y);continue}h.push(g[S])}else{let b=v[x-1]+g[x-1].length-C;h.push(hf(t,g,v,S,x,C,b,null,a))}f.push(C+y-s)}}return p(e,n,r,i,0),(o||a)(h,f,l)}class kr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new kr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let p=Math.max(f.from,a)-u,g=Math.min(f.to,h)-u;f=p>=g?null:new kr(p,g,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class Xy{startParse(e,n,r){return typeof e=="string"&&(e=new pC(e)),r=r?r.length?r.map(i=>new uu(i.from,i.to)):[new uu(0,0)]:[new uu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class pC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Q({perNode:!0});let mC=0;class Mt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=mC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Mt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Mt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Ho(e);return r=>r.modified.indexOf(n)>-1?r:Ho.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let gC=0;class Ho{constructor(e){this.name=e,this.instances=[],this.id=gC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&yC(n,o.modified));if(r)return r;let i=[],s=new Mt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=vC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Ho.get(o,a));return s}}function yC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function vC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function xC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){l=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Wo(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return Zy.add(e)}const Zy=new Q;class Wo{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Wo.empty=new Wo([],2,null);function ev(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function wC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function kC(t,e,n,r=0,i=t.length){let s=new SC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class SC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(l)));let u=i,c=CC(e)||Wo.empty,h=wC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(Q.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),v=e.firstChild();for(let w=0,m=o;;w++){let y=w<f.overlay.length?f.overlay[w]:null,x=y?y.from+o:a,S=Math.max(n,m),C=Math.min(r,x);if(S<C&&v)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;m=y.to+o,m>n&&(this.highlightRange(p.cursor(),Math.max(n,y.from+o),Math.min(r,m),"",g),this.startSpan(Math.min(r,m),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function CC(t){let e=t.type.prop(Zy);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Mt.define,jl=O(),Pn=O(),zp=O(Pn),_p=O(Pn),Ln=O(),Bl=O(Ln),cu=O(Ln),tn=O(),cr=O(tn),Zt=O(),en=O(),Kc=O(),Ui=O(Kc),Il=O(),T={comment:jl,lineComment:O(jl),blockComment:O(jl),docComment:O(jl),name:Pn,variableName:O(Pn),typeName:zp,tagName:O(zp),propertyName:_p,attributeName:O(_p),className:O(Pn),labelName:O(Pn),namespace:O(Pn),macroName:O(Pn),literal:Ln,string:Bl,docString:O(Bl),character:O(Bl),attributeValue:O(Bl),number:cu,integer:O(cu),float:O(cu),bool:O(Ln),regexp:O(Ln),escape:O(Ln),color:O(Ln),url:O(Ln),keyword:Zt,self:O(Zt),null:O(Zt),atom:O(Zt),unit:O(Zt),modifier:O(Zt),operatorKeyword:O(Zt),controlKeyword:O(Zt),definitionKeyword:O(Zt),moduleKeyword:O(Zt),operator:en,derefOperator:O(en),arithmeticOperator:O(en),logicOperator:O(en),bitwiseOperator:O(en),compareOperator:O(en),updateOperator:O(en),definitionOperator:O(en),typeOperator:O(en),controlOperator:O(en),punctuation:Kc,separator:O(Kc),bracket:Ui,angleBracket:O(Ui),squareBracket:O(Ui),paren:O(Ui),brace:O(Ui),content:tn,heading:cr,heading1:O(cr),heading2:O(cr),heading3:O(cr),heading4:O(cr),heading5:O(cr),heading6:O(cr),contentSeparator:O(tn),list:O(tn),quote:O(tn),emphasis:O(tn),strong:O(tn),link:O(tn),monospace:O(tn),strikethrough:O(tn),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:Il,documentMeta:O(Il),annotation:O(Il),processingInstruction:O(Il),definition:Mt.defineModifier("definition"),constant:Mt.defineModifier("constant"),function:Mt.defineModifier("function"),standard:Mt.defineModifier("standard"),local:Mt.defineModifier("local"),special:Mt.defineModifier("special")};for(let t in T){let e=T[t];e instanceof Mt&&(e.name=t)}ev([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}]);var hu;const Xr=new Q;function bC(t){return I.define({combine:t?e=>e.concat(t):void 0})}const AC=new Q;class Wt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Z.prototype.hasOwnProperty("tree")||Object.defineProperty(Z.prototype,"tree",{get(){return St(this)}}),this.parser=n,this.extension=[ir.of(this),Z.languageData.of((s,l,o)=>{let a=Hp(s,l,o),u=a.type.prop(Xr);if(!u)return[];let c=s.facet(u),h=a.type.prop(AC);if(h){let f=a.resolve(l-a.from,o);for(let p of h)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Hp(e,n,r).type.prop(Xr)==this.data}findRegions(e){let n=e.facet(ir);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(Xr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(Q.mounted);if(o){if(o.tree.prop(Xr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof me&&i(u,s.positions[a]+l)}};return i(St(e),0),r}get allowsNesting(){return!0}}Wt.setState=oe.define();function Hp(t,e,n){let r=t.facet(ir),i=St(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Fe.ExcludeBuffers))s.type.isTop&&(i=s);return i}function St(t){let e=t.field(Wt.state,!1);return e?e.tree:me.empty}class EC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let $i=null;class ki{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new ki(e,n,[],me.empty,0,r,[],null)}startParse(){return this.parser.startParse(new EC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=me.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(kr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(kr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=$i;$i=this;try{return e()}finally{$i=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Wp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=kr.applyChanges(r,a),i=me.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new ki(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Wp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Xy{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=$i;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new me(ft.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return $i}}function Wp(t,e,n){return kr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Si{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Si(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=ki.create(e.facet(ir).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Si(r)}}Wt.state=Gt.define({create:Si.init,update(t,e){for(let n of e.effects)if(n.is(Wt.setState))return n.value;return e.startState.facet(ir)!=e.state.facet(ir)?Si.init(e.state):t.apply(e)}});let tv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(tv=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const fu=typeof navigator<"u"&&(!((hu=navigator.scheduling)===null||hu===void 0)&&hu.isInputPending)?()=>navigator.scheduling.isInputPending():null,MC=kt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Wt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Wt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=tv(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Wt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!fu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>fu&&fu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Wt.setState.of(new Si(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>on(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ir=I.define({combine(t){return t.length?t[0]:null},enables:t=>[Wt.state,MC,B.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),TC=I.define(),ff=I.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Dr(t){let e=t.facet(ff);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function _s(t,e){let n="",r=t.tabSize,i=t.facet(ff)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function df(t,e){t instanceof Z&&(t=new va(t));for(let r of t.state.facet(TC)){let i=r(t,e);if(i!==void 0)return i}let n=St(t.state);return n.length>=e?NC(t,n,e):null}class va{constructor(e,n={}){this.state=e,this.options=n,this.unit=Dr(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return pa(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const nv=new Q;function NC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return rv(r,t,n)}function rv(t,e,n){for(let r=t;r;r=r.next){let i=DC(r.node);if(i)return i(pf.create(e,n,r))}return 0}function OC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function DC(t){let e=t.type.prop(nv);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Q.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>jC(l,!0,1,void 0,s&&!OC(l)?i.from:void 0)}return t.parent==null?PC:null}function PC(){return 0}class pf extends va{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new pf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(LC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return rv(this.context.next,this.base,this.pos)}}function LC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function RC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function jC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=RC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const BC=200;function IC(){return Z.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+BC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=df(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],p=_s(l,h);f!=p&&a.push({from:c.from,to:c.from+f.length,insert:p})}return a.length?[t,{changes:a,sequential:!0}]:t})}const FC=I.define(),zC=new Q;function _C(t,e,n){let r=St(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(zC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!HC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function HC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Vp(t,e,n){for(let r of t.facet(FC)){let i=r(t,e,n);if(i)return i}return _C(t,e,n)}function iv(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const sv=oe.define({map:iv}),mf=oe.define({map:iv}),Vo=Gt.define({create(){return $.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Up(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(sv)&&!WC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(lv),i=r?$.replace({widget:new $C(r(e.state,n.value))}):$p;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(mf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Up(t,e.selection.main.head)),t},provide:t=>B.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push($p.range(r,i))}return $.set(e,!0)}});function Up(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function qc(t,e,n){var r;let i=null;return(r=t.field(Vo,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function WC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const VC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},lv=I.define({combine(t){return da(t,VC)}});function UC(t){return[Vo,GC]}function ov(t,e){let{state:n}=t,r=n.facet(lv),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=qc(t.state,o.from,o.to);a&&t.dispatch({effects:mf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const $p=$.replace({widget:new class extends Qs{toDOM(t){return ov(t,null)}}});class $C extends Qs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ov(e,this.value)}}const KC={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class du extends nr{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function qC(t={}){let e={...KC,...t},n=new du(e,!0),r=new du(e,!1),i=kt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(ir)!=l.state.facet(ir)||l.startState.field(Vo,!1)!=l.state.field(Vo,!1)||St(l.startState)!=St(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Mr;for(let a of l.viewportLineBlocks){let u=qc(l.state,a.from,a.to)?r:Vp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,ZS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||te.empty},initialSpacer(){return new du(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=qc(l.state,o.from,o.to);if(u)return l.dispatch({effects:mf.of(u)}),!0;let c=Vp(l.state,o.from,o.to);return c?(l.dispatch({effects:sv.of(c)}),!0):!1}}}),UC()]}const GC=B.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class xa{constructor(e,n){this.specs=e;let r;function i(o){let a=Zn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Wt?o=>o.prop(Xr)==l.data:l?o=>o==l:void 0,this.style=ev(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Zn(r):null,this.themeType=n.themeType}static define(e,n){return new xa(e,n||{})}}const Gc=I.define(),QC=I.define({combine(t){return t.length?[t[0]]:null}});function pu(t){let e=t.facet(Gc);return e.length?e:t.facet(QC)}function YC(t,e){let n=[XC],r;return t instanceof xa&&(t.module&&n.push(B.styleModule.of(t.module)),r=t.themeType),r?n.push(Gc.computeN([B.darkTheme],i=>i.facet(B.darkTheme)==(r=="dark")?[t]:[])):n.push(Gc.of(t)),n}class JC{constructor(e){this.markCache=Object.create(null),this.tree=St(e.state),this.decorations=this.buildDeco(e,pu(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=St(e.state),r=pu(e.state),i=r!=pu(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return $.none;let r=new Mr;for(let{from:i,to:s}of e.visibleRanges)kC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=$.mark({class:a})))},i,s);return r.finish()}}const XC=ha.high(kt.fromClass(JC,{decorations:t=>t.decorations})),ZC=B.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),av=1e4,uv="()[]{}",cv=I.define({combine(t){return da(t,{afterCursor:!0,brackets:uv,maxScanDistance:av,renderMatch:n2})}}),e2=$.mark({class:"cm-matchingBracket"}),t2=$.mark({class:"cm-nonmatchingBracket"});function n2(t){let e=[],n=t.matched?e2:t2;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const r2=Gt.define({create(){return $.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(cv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=an(e.state,i.head,-1,r)||i.head>0&&an(e.state,i.head-1,1,r)||r.afterCursor&&(an(e.state,i.head,1,r)||i.head<e.state.doc.length&&an(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return $.set(n,!0)},provide:t=>B.decorations.from(t)}),i2=[r2,ZC];function s2(t={}){return[cv.of(t),i2]}const l2=new Q;function Qc(t,e,n){let r=t.prop(e<0?Q.openedBy:Q.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Yc(t){let e=t.type.prop(l2);return e?e(t.node):t}function an(t,e,n,r={}){let i=r.maxScanDistance||av,s=r.brackets||uv,l=St(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Qc(a.type,n,s);if(u&&a.from<a.to){let c=Yc(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return o2(t,e,n,a,c,u,s)}}return a2(t,e,n,l,o.type,i,s)}function o2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=Yc(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Qc(c.type,n,l))u++;else if(Qc(c.type,-n,l)){if(u==0){let h=Yc(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function a2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let p=c.value;n<0&&(f+=p.length);let g=e+f*n;for(let v=n>0?0:p.length-1,w=n>0?p.length:-1;v!=w;v+=n){let m=l.indexOf(p[v]);if(!(m<0||r.resolveInner(g+v,1).type!=i))if(m%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:g+v,to:g+v+1},matched:m>>1==a>>1};h--}}n>0&&(f+=p.length)}return c.done?{start:u,matched:!1}:null}function Kp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class hv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Kp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Kp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function u2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||c2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||vf,mergeTokens:t.mergeTokens!==!1}}function c2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const qp=new WeakMap;class gf extends Wt{constructor(e){let n=bC(e.languageData),r=u2(e),i,s=new class extends Xy{createParse(l,o,a){return new f2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=m2(n,this),i=this,this.streamParser=r,this.stateAfter=new Q({perNode:!0}),this.tokenTable=e.tokenTable?new mv(r.tokenTable):p2}static define(e){return new gf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=qp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=yf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new hv(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)dv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&qp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function yf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof me&&a<i&&yf(t,o,a,r,i);if(u)return u}return null}function fv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof me){if(!(a=fv(t,o,n-l,r-l,i)))break;return i?new me(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function h2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&yf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=fv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Dr(i):4),tree:me.empty}}class f2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=ki.get(),l=i[0].from,{state:o,tree:a}=h2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Dr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=ki.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new hv(n,e?e.state.tabSize:4,e?Dr(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=dv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=me.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:d2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new me(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new me(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function dv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const vf=Object.create(null),Hs=[ft.none],d2=new af(Hs),Gp=[],Qp=Object.create(null),pv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pv[t]=gv(vf,e);class mv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),pv)}resolve(e){return e?this.table[e]||(this.table[e]=gv(this.extra,e)):0}}const p2=new mv(vf);function mu(t,e){Gp.indexOf(t)>-1||(Gp.push(t),console.warn(e))}function gv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||T[u];c?typeof c=="function"?a.length?a=a.map(c):mu(u,`Modifier ${u} used at start of tag`):a.length?mu(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:mu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Qp[i];if(s)return s.id;let l=Qp[i]=ft.define({id:Hs.length,name:r,props:[xC({[r]:n})]});return Hs.push(l),l.id}function m2(t,e){let n=ft.define({id:Hs.length,name:"Document",props:[Xr.add(()=>t),nv.add(()=>r=>e.getIndent(r))],top:!0});return Hs.push(n),n}Me.RTL,Me.LTR;const g2="#e5c07b",Yp="#e06c75",y2="#56b6c2",v2="#ffffff",so="#abb2bf",Jc="#7d8799",x2="#61afef",w2="#98c379",Jp="#d19a66",k2="#c678dd",S2="#21252b",Xp="#2c313a",Zp="#282c34",gu="#353a42",C2="#3E4451",em="#528bff",b2=B.theme({"&":{color:so,backgroundColor:Zp},".cm-content":{caretColor:em},".cm-cursor, .cm-dropCursor":{borderLeftColor:em},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:C2},".cm-panels":{backgroundColor:S2,color:so},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Zp,color:Jc,border:"none"},".cm-activeLineGutter":{backgroundColor:Xp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:gu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:gu,borderBottomColor:gu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Xp,color:so}}},{dark:!0}),A2=xa.define([{tag:T.keyword,color:k2},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:Yp},{tag:[T.function(T.variableName),T.labelName],color:x2},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:Jp},{tag:[T.definition(T.name),T.separator],color:so},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:g2},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:y2},{tag:[T.meta,T.comment],color:Jc},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Jc,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:Yp},{tag:[T.atom,T.bool,T.special(T.variableName)],color:Jp},{tag:[T.processingInstruction,T.string,T.inserted],color:w2},{tag:T.invalid,color:v2}]),E2=[b2,YC(A2)],M2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=wf(t.state,n.from);return r.line?T2(t):r.block?O2(t):!1};function xf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const T2=xf(L2,0),N2=xf(yv,0),O2=xf((t,e)=>yv(t,e,P2(e)),0);function wf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Ki=50;function D2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Ki,r),l=t.sliceDoc(i,i+Ki),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*Ki?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Ki),h=t.sliceDoc(i-Ki,i));let f=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(h)[0].length,g=h.length-p-n.length;return c.slice(f,f+e.length)==e&&h.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-p-n.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function P2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function yv(t,e,n=e.selection.ranges){let r=n.map(s=>wf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>D2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function L2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=wf(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,p=f==h.length,g=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:g,token:u,indent:f,empty:p,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function Mi(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function Qt(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Yt({state:t,dispatch:e},n){let r=Mi(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Qt(t,r)),!0)}function wa(t,e){return E.cursor(e?t.to:t.from)}function vv(t,e){return Yt(t,n=>n.empty?t.moveByChar(n,e):wa(n,e))}function Xe(t){return t.textDirectionAt(t.state.selection.main.head)==Me.LTR}const xv=t=>vv(t,!Xe(t)),wv=t=>vv(t,Xe(t));function kv(t,e){return Yt(t,n=>n.empty?t.moveByGroup(n,e):wa(n,e))}const R2=t=>kv(t,!Xe(t)),j2=t=>kv(t,Xe(t));function B2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ka(t,e,n){let r=St(t).resolveInner(e.head),i=n?Q.closedBy:Q.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;B2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?an(t,r.from,1):an(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const I2=t=>Yt(t,e=>ka(t.state,e,!Xe(t))),F2=t=>Yt(t,e=>ka(t.state,e,Xe(t)));function Sv(t,e){return Yt(t,n=>{if(!n.empty)return wa(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Cv=t=>Sv(t,!1),bv=t=>Sv(t,!0);function Av(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(B.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Ev(t,e){let n=Av(t),{state:r}=t,i=Mi(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):wa(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=B.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Qt(r,i),{effects:s}),!0}const tm=t=>Ev(t,!1),Xc=t=>Ev(t,!0);function ar(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const z2=t=>Yt(t,e=>ar(t,e,!0)),_2=t=>Yt(t,e=>ar(t,e,!1)),H2=t=>Yt(t,e=>ar(t,e,!Xe(t))),W2=t=>Yt(t,e=>ar(t,e,Xe(t))),V2=t=>Yt(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),U2=t=>Yt(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function $2(t,e,n){let r=!1,i=Mi(t.selection,s=>{let l=an(t,s.head,-1)||an(t,s.head,1)||s.head>0&&an(t,s.head-1,1)||s.head<t.doc.length&&an(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e(Qt(t,i)),!0):!1}const K2=({state:t,dispatch:e})=>$2(t,e);function Bt(t,e){let n=Mi(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Qt(t.state,n)),!0)}function Mv(t,e){return Bt(t,n=>t.moveByChar(n,e))}const Tv=t=>Mv(t,!Xe(t)),Nv=t=>Mv(t,Xe(t));function Ov(t,e){return Bt(t,n=>t.moveByGroup(n,e))}const q2=t=>Ov(t,!Xe(t)),G2=t=>Ov(t,Xe(t)),Q2=t=>Bt(t,e=>ka(t.state,e,!Xe(t))),Y2=t=>Bt(t,e=>ka(t.state,e,Xe(t)));function Dv(t,e){return Bt(t,n=>t.moveVertically(n,e))}const Pv=t=>Dv(t,!1),Lv=t=>Dv(t,!0);function Rv(t,e){return Bt(t,n=>t.moveVertically(n,e,Av(t).height))}const nm=t=>Rv(t,!1),rm=t=>Rv(t,!0),J2=t=>Bt(t,e=>ar(t,e,!0)),X2=t=>Bt(t,e=>ar(t,e,!1)),Z2=t=>Bt(t,e=>ar(t,e,!Xe(t))),eb=t=>Bt(t,e=>ar(t,e,Xe(t))),tb=t=>Bt(t,e=>E.cursor(t.lineBlockAt(e.head).from)),nb=t=>Bt(t,e=>E.cursor(t.lineBlockAt(e.head).to)),im=({state:t,dispatch:e})=>(e(Qt(t,{anchor:0})),!0),sm=({state:t,dispatch:e})=>(e(Qt(t,{anchor:t.doc.length})),!0),lm=({state:t,dispatch:e})=>(e(Qt(t,{anchor:t.selection.main.anchor,head:0})),!0),om=({state:t,dispatch:e})=>(e(Qt(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),rb=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),ib=({state:t,dispatch:e})=>{let n=Sa(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},sb=({state:t,dispatch:e})=>{let n=Mi(t.selection,r=>{let i=St(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Qt(t,n)),!0)};function jv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Qt(n,E.create(i,i.length-1))),!0)}const lb=t=>jv(t,!1),ob=t=>jv(t,!0),ab=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(Qt(t,r)),!0):!1};function Zs(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Fl(t,a,!1)):a>l&&(n="delete.forward",a=Fl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Fl(t,l,!1),o=Fl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?B.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Fl(t,e,n){if(t instanceof B)for(let r of t.state.facet(B.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Bv=(t,e,n)=>Zs(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=pa(o,s.tabSize),c=u%Dr(s)||Dr(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=ze(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=ze(l.text,a-l.from,!1,!1)+l.from);return a}),Zc=t=>Bv(t,!1,!0),Iv=t=>Bv(t,!0,!1),Fv=(t,e)=>Zs(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=ze(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),zv=t=>Fv(t,!1),ub=t=>Fv(t,!0),cb=t=>Zs(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),hb=t=>Zs(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),fb=t=>Zs(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),db=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:J.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},pb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:ze(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:ze(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Sa(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function _v(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Sa(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const mb=({state:t,dispatch:e})=>_v(t,e,!1),gb=({state:t,dispatch:e})=>_v(t,e,!0);function Hv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Sa(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const yb=({state:t,dispatch:e})=>Hv(t,e,!1),vb=({state:t,dispatch:e})=>Hv(t,e,!0),xb=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Sa(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Mi(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function wb(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=St(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Q.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const am=Wv(!1),kb=Wv(!0);function Wv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&wb(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new va(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=df(u,s);for(c==null&&(c=pa(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",_s(e,c)];return a&&h.push(_s(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:J.of(h)},range:E.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function kf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Sb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new va(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=kf(t,(s,l,o)=>{let a=df(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=_s(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Cb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(kf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(ff)})}),{userEvent:"input.indent"})),!0),bb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(kf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=pa(i,t.tabSize),l=0,o=_s(t,Math.max(0,s-Dr(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),Ab=t=>(t.setTabFocusMode(),!0),Eb=[{key:"Ctrl-b",run:xv,shift:Tv,preventDefault:!0},{key:"Ctrl-f",run:wv,shift:Nv},{key:"Ctrl-p",run:Cv,shift:Pv},{key:"Ctrl-n",run:bv,shift:Lv},{key:"Ctrl-a",run:V2,shift:tb},{key:"Ctrl-e",run:U2,shift:nb},{key:"Ctrl-d",run:Iv},{key:"Ctrl-h",run:Zc},{key:"Ctrl-k",run:cb},{key:"Ctrl-Alt-h",run:zv},{key:"Ctrl-o",run:db},{key:"Ctrl-t",run:pb},{key:"Ctrl-v",run:Xc}],Mb=[{key:"ArrowLeft",run:xv,shift:Tv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:R2,shift:q2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:H2,shift:Z2,preventDefault:!0},{key:"ArrowRight",run:wv,shift:Nv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:j2,shift:G2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:W2,shift:eb,preventDefault:!0},{key:"ArrowUp",run:Cv,shift:Pv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:im,shift:lm},{mac:"Ctrl-ArrowUp",run:tm,shift:nm},{key:"ArrowDown",run:bv,shift:Lv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sm,shift:om},{mac:"Ctrl-ArrowDown",run:Xc,shift:rm},{key:"PageUp",run:tm,shift:nm},{key:"PageDown",run:Xc,shift:rm},{key:"Home",run:_2,shift:X2,preventDefault:!0},{key:"Mod-Home",run:im,shift:lm},{key:"End",run:z2,shift:J2,preventDefault:!0},{key:"Mod-End",run:sm,shift:om},{key:"Enter",run:am,shift:am},{key:"Mod-a",run:rb},{key:"Backspace",run:Zc,shift:Zc,preventDefault:!0},{key:"Delete",run:Iv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:zv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:ub,preventDefault:!0},{mac:"Mod-Backspace",run:hb,preventDefault:!0},{mac:"Mod-Delete",run:fb,preventDefault:!0}].concat(Eb.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Tb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:I2,shift:Q2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:F2,shift:Y2},{key:"Alt-ArrowUp",run:mb},{key:"Shift-Alt-ArrowUp",run:yb},{key:"Alt-ArrowDown",run:gb},{key:"Shift-Alt-ArrowDown",run:vb},{key:"Mod-Alt-ArrowUp",run:lb},{key:"Mod-Alt-ArrowDown",run:ob},{key:"Escape",run:ab},{key:"Mod-Enter",run:kb},{key:"Alt-l",mac:"Ctrl-l",run:ib},{key:"Mod-i",run:sb,preventDefault:!0},{key:"Mod-[",run:bb},{key:"Mod-]",run:Cb},{key:"Mod-Alt-\\",run:Sb},{key:"Shift-Mod-k",run:xb},{key:"Shift-Mod-\\",run:K2},{key:"Mod-/",run:M2},{key:"Alt-A",run:N2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Ab}].concat(Mb),um=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ws{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(um(o)):um,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return O0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Yw(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=D0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Ws.prototype[Symbol.iterator]=function(){return this});const Vv={from:-1,to:-1,match:/.*/.exec("")},Sf="gm"+(/x/.unicode==null?"":"u");class Uv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Vv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new $v(e,n,r,i,s);this.re=new RegExp(n,Sf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Uo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Uo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const yu=new WeakMap;class ai{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=yu.get(e);if(!i||i.from>=r||i.to<=n){let o=new ai(n,e.sliceString(n,r));return yu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),yu.set(e,new ai(l,s)),new ai(n,s.slice(n-l,r-l))}}class $v{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Vv,this.matchPos=Uo(e,i),this.re=new RegExp(n,Sf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ai.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Uo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ai.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Uv.prototype[Symbol.iterator]=$v.prototype[Symbol.iterator]=function(){return this});function Nb(t){try{return new RegExp(t,Sf),!0}catch{return!1}}function Uo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function eh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=je("input",{class:"cm-textfield",name:"line",value:e}),r=je("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ms.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},je("label",t.state.phrase("Go to line"),": ",n)," ",je("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),je("button",{name:"close",onclick:()=>{t.dispatch({effects:ms.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,p=u?+u:o.number;if(u&&h){let w=p/100;a&&(w=w*(a=="-"?-1:1)+o.number/l.doc.lines),p=Math.round(l.doc.lines*w)}else u&&a&&(p=p*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,p))),v=E.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[ms.of(!1),B.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const ms=oe.define(),cm=Gt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ms)&&(t=n.value);return t},provide:t=>zo.from(t,e=>e?eh:null)}),Ob=t=>{let e=Fo(t,eh);if(!e){let n=[ms.of(!0)];t.state.field(cm,!1)==null&&n.push(oe.appendConfig.of([cm,Db])),t.dispatch({effects:n}),e=Fo(t,eh)}return e&&e.dom.querySelector("input").select(),!0},Db=B.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Pb=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Lb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Ws(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Ws(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Rb=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Pb({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Lb(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:B.scrollIntoView(i.to)})),!0):!1},Ti=I.define({combine(t){return da(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Kb(e),scrollToMatch:e=>B.scrollIntoView(e)})}});class Kv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Nb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Fb(this):new Bb(this)}getCursor(e,n=0,r){let i=e.doc?e:Z.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Ir(this,i,n,r):Br(this,i,n,r)}}class qv{constructor(e){this.spec=e}}function Br(t,e,n,r){return new Ws(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?jb(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function jb(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e($o(i,n-s))!=_e.Word||e(Ko(i,n-s))!=_e.Word)&&(e(Ko(i,r-s))!=_e.Word||e($o(i,r-s))!=_e.Word))}class Bb extends qv{constructor(e){super(e)}nextMatch(e,n,r){let i=Br(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Br(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Br(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Br(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Br(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Ir(t,e,n,r){return new Uv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Ib(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function $o(t,e){return t.slice(ze(t,e,!1),e)}function Ko(t,e){return t.slice(e,ze(t,e))}function Ib(t){return(e,n,r)=>!r[0].length||(t($o(r.input,r.index))!=_e.Word||t(Ko(r.input,r.index))!=_e.Word)&&(t(Ko(r.input,r.index+r[0].length))!=_e.Word||t($o(r.input,r.index+r[0].length))!=_e.Word)}class Fb extends qv{nextMatch(e,n,r){let i=Ir(this.spec,e,r,e.doc.length).next();return i.done&&(i=Ir(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Ir(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Ir(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ir(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Vs=oe.define(),Cf=oe.define(),Yn=Gt.define({create(t){return new vu(th(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Vs)?t=new vu(n.value.create(),t.panel):n.is(Cf)&&(t=new vu(t.query,n.value?bf:null));return t},provide:t=>zo.from(t,e=>e.panel)});class vu{constructor(e,n){this.query=e,this.panel=n}}const zb=$.mark({class:"cm-searchMatch"}),_b=$.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Hb=kt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Yn))}update(t){let e=t.state.field(Yn);(e!=t.startState.field(Yn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return $.none;let{view:n}=this,r=new Mr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?_b:zb)})}return r.finish()}},{decorations:t=>t.decorations});function el(t){return e=>{let n=e.state.field(Yn,!1);return n&&n.query.spec.valid?t(e,n):Yv(e)}}const qo=el((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(Ti);return t.dispatch({selection:i,effects:[Af(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),Qv(t),!0}),Go=el((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(Ti);return t.dispatch({selection:s,effects:[Af(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),Qv(t),!0}),Wb=el((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Vb=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Ws(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},hm=el((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(B.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(h),c.push(Af(t,l)),c.push(n.facet(Ti).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),Ub=el((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:B.announce.of(r),userEvent:"input.replace.all"}),!0});function bf(t){return t.state.facet(Ti).createPanel(t)}function th(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Ti);return new Kv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Gv(t){let e=Fo(t,bf);return e&&e.dom.querySelector("[main-field]")}function Qv(t){let e=Gv(t);e&&e==t.root.activeElement&&e.select()}const Yv=t=>{let e=t.state.field(Yn,!1);if(e&&e.panel){let n=Gv(t);if(n&&n!=t.root.activeElement){let r=th(t.state,e.query.spec);r.valid&&t.dispatch({effects:Vs.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Cf.of(!0),e?Vs.of(th(t.state,e.query.spec)):oe.appendConfig.of(Gb)]});return!0},Jv=t=>{let e=t.state.field(Yn,!1);if(!e||!e.panel)return!1;let n=Fo(t,bf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Cf.of(!1)}),!0},$b=[{key:"Mod-f",run:Yv,scope:"editor search-panel"},{key:"F3",run:qo,shift:Go,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:qo,shift:Go,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Jv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Vb},{key:"Mod-Alt-g",run:Ob},{key:"Mod-d",run:Rb,preventDefault:!0}];class Kb{constructor(e){this.view=e;let n=this.query=e.state.field(Yn).query.spec;this.commit=this.commit.bind(this),this.searchField=je("input",{value:n.search,placeholder:pt(e,"Find"),"aria-label":pt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=je("input",{value:n.replace,placeholder:pt(e,"Replace"),"aria-label":pt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=je("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=je("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=je("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return je("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=je("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>qo(e),[pt(e,"next")]),r("prev",()=>Go(e),[pt(e,"previous")]),r("select",()=>Wb(e),[pt(e,"all")]),je("label",null,[this.caseField,pt(e,"match case")]),je("label",null,[this.reField,pt(e,"regexp")]),je("label",null,[this.wordField,pt(e,"by word")]),...e.state.readOnly?[]:[je("br"),this.replaceField,r("replace",()=>hm(e),[pt(e,"replace")]),r("replaceAll",()=>Ub(e),[pt(e,"replace all")])],je("button",{name:"close",onclick:()=>Jv(e),"aria-label":pt(e,"close"),type:"button"},[""])])}commit(){let e=new Kv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Vs.of(e)}))}keydown(e){$S(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Go:qo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),hm(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Vs)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ti).top}}function pt(t,e){return t.state.phrase(e)}const zl=30,_l=/[\s\.,:;?!]/;function Af(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-zl),l=Math.min(i,n+zl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<zl;a++)if(!_l.test(o[a+1])&&_l.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-zl;a--)if(!_l.test(o[a-1])&&_l.test(o[a])){o=o.slice(0,a);break}}return B.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const qb=B.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Gb=[Yn,ha.low(Hb),qb],Qb=gf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(It.TRANSITION)||t.match(It.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(It.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(It.CHARACTER))||(n=t.match(It.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(It.IMAGE)||t.match(It.AUDIO)?"link":t.match(It.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(It.TITLE))return"def";if(n=t.match(It.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(It.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),Yb=kt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push($.line({class:"cm-keyword"}).range(s.from)),e.push($.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push($.line({class:"cm-header"}).range(s.from)),e.push($.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push($.line({class:"cm-atom"}).range(s.from)),e.push($.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push($.line({class:"cm-synopsis"}).range(s.from)),e.push($.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push($.line({class:"cm-number"}).range(s.from)),e.push($.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push($.line({class:"cm-variable"}).range(s.from)),e.push($.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return $.set(e)}},{decorations:t=>t.decorations}),Xv=P.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=P.useRef(null),l=P.useRef(null);return P.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:B.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),P.useEffect(()=>{if(!s.current)return;const o=[lC(),GS(),qC(),s2(),IC(),B.lineWrapping,Qb,Yb,B.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,p=h.state.doc.lineAt(f);n(p.number-1)},10)}}),E2,Vy.of([...Tb,...$b]),B.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),B.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=Z.create({doc:t,extensions:o}),u=new B({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),P.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),d.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});Xv.displayName="CodeMirrorEditor";function Jb(){const t=()=>{window.location.href="/auth/google"};return d.jsx("div",{className:"login-container",children:d.jsx("div",{className:"login-card",children:d.jsx("div",{className:"login-content",children:d.jsxs("button",{className:"google-login-btn",onClick:t,children:[d.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"20",height:"20",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})})})}function Xb({onSelectScript:t,onCancel:e}){const[n,r]=P.useState([]),[i,s]=P.useState(!0),[l,o]=P.useState(null);P.useEffect(()=>{a()},[]);const a=async()=>{try{s(!0);const c=await fetch("/api/scripts",{credentials:"include"});if(!c.ok)throw new Error("Failed to fetch scripts");const h=await c.json();r(h.scripts||[])}catch(c){o(c.message)}finally{s(!1)}},u=c=>{t(c)};return i?d.jsxs("div",{className:"script-selector",children:[d.jsxs("div",{className:"script-selector-header",children:[d.jsx("h2",{children:"Load Script"}),d.jsx("button",{className:"close-btn",onClick:e,children:""})]}),d.jsx("div",{className:"script-selector-content",children:d.jsx("p",{children:"Loading scripts..."})})]}):l?d.jsxs("div",{className:"script-selector",children:[d.jsxs("div",{className:"script-selector-header",children:[d.jsx("h2",{children:"Load Script"}),d.jsx("button",{className:"close-btn",onClick:e,children:""})]}),d.jsxs("div",{className:"script-selector-content",children:[d.jsxs("p",{className:"error",children:["Error: ",l]}),d.jsx("button",{className:"toolbar-btn",onClick:e,children:"Close"})]})]}):d.jsxs("div",{className:"script-selector",children:[d.jsxs("div",{className:"script-selector-header",children:[d.jsx("h2",{children:"Load Script"}),d.jsx("button",{className:"close-btn",onClick:e,children:""})]}),d.jsx("div",{className:"script-selector-content",children:n.length===0?d.jsxs("div",{className:"no-scripts",children:[d.jsx("p",{children:"No scripts found. Create your first script!"}),d.jsx("button",{className:"toolbar-btn",onClick:e,children:"Close"})]}):d.jsxs("table",{className:"scripts-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Title"}),d.jsx("th",{children:"Last Modified"}),d.jsx("th",{children:"Created"}),d.jsx("th",{children:"Action"})]})}),d.jsx("tbody",{children:n.map(c=>d.jsxs("tr",{children:[d.jsx("td",{className:"script-title",children:c.title}),d.jsx("td",{children:new Date(c.updated_at).toLocaleString()}),d.jsx("td",{children:new Date(c.created_at).toLocaleString()}),d.jsx("td",{children:d.jsx("button",{className:"load-script-btn",onClick:()=>u(c),children:"Load"})})]},c.id))})]})})]})}function Zb(t=""){const[e,n]=P.useState([]),[r,i]=P.useState([]),[s,l]=P.useState(new Map),o=P.useRef(null),[a,u]=P.useState(!0);return P.useEffect(()=>{if(!a){if(t){const h=ba(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D4zT3tr0.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:p,blocks:g,characters:v,characterLineCounts:w}=f.data;p==="result"?(n(g||[]),i(v||[]),l(w||new Map)):p==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),P.useEffect(()=>{if(!a&&t){const h=ba(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=ba(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let eA=1;function tA(){const t=P.useRef(null),e=P.useRef(new Map),[n,r]=P.useState([]),i=P.useRef(!1);P.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=P.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-DfPotGTI.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:p,reject:g}=e.current.get(h);if(e.current.delete(h),u==="panels")try{p(c)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=P.useCallback(o=>{const a=s();if(!a)try{const c=p1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(eA++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const dn=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function nA(){const[t,e]=P.useState(!1),[n,r]=P.useState(null),[i,s]=P.useState(!1),[l,o]=P.useState(""),[a,u]=P.useState(!1),[c,h]=P.useState(!1),[f,p]=P.useState(!1),[g,v]=P.useState("edit"),[w,m]=P.useState(0),[y,x]=P.useState(!1),[S,C]=P.useState(null),[A,b]=P.useState(!1),[N,H]=P.useState(null),[j,W]=P.useState("Untitled Script"),[z,q]=P.useState(null),ee=P.useRef(null),he=P.useRef(null),Ze=P.useRef([]),st=P.useRef(null),[D,_]=P.useState(!1),[U,Y]=P.useState(!1);P.useEffect(()=>{fetch("/api/me",{credentials:"include"}).then(k=>k.json()).then(k=>{k.authenticated&&k.user&&r(k.user),e(!0)}).catch(k=>{console.error("Auth check failed:",k),e(!0)})},[]),P.useEffect(()=>{const k=async()=>{const V=localStorage.getItem("fountain-current-script-id");if(V&&n)try{const re=await fetch(`/api/scripts/${V}`,{credentials:"include"});if(re.ok){const Le=(await re.json()).script;o(Le.source),xe(Le.source);try{typeof Se=="function"&&Se(Le.source)}catch{}H(Le.id),W(Le.title),q(new Date(Le.updated_at));return}}catch(re){console.error("Error loading script from DB:",re),localStorage.removeItem("fountain-current-script-id")}o(dn),xe(dn);try{typeof Se=="function"&&Se(dn)}catch{}};if(n)k();else if(t&&!n){o(dn),xe(dn);try{typeof Se=="function"&&Se(dn)}catch{}}},[n,t]),P.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const V=navigator.userAgent||"",re=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(V),Pe=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,Le=(window.innerWidth||screen.width||0)<1024;(re||Pe&&Le)&&s(!0)}catch{}},[]);const{blocks:G,characters:fe,characterLineCounts:De,processText:xe}=Zb(""),{panels:F,parsePanels:Se}=tA(),[Ve,Ni]=P.useState(0),[Oi,Ef]=P.useState("screenplay"),Ue=P.useRef(null),[Di,Tn]=P.useState(!1),tl=P.useRef(null),dt=P.useRef(null),[Mf,Pi]=P.useState(!1),ur=P.useRef(null),[Tf,nl]=P.useState(!1);P.useEffect(()=>{Ze.current=G},[G]);const Zv=k=>{o(k),xe(k);try{typeof Se=="function"&&Se(k)}catch{}},e1=()=>{!Array.isArray(F)||F.length===0||(Ca(),Pi(!1),ur.current="user",Ni(k=>{const V=F.length;return((k-1)%V+V)%V}))},Nf=(k=!0)=>{!Array.isArray(F)||F.length===0||(ur.current=k?"user":"auto",k&&(Ca(),Pi(!1)),Ni(V=>{const re=F.length;return(V+1)%re}))},t1=async()=>{Mf&&(Ni(0),Pi(!1));try{Ue.current&&Ue.current.paused&&(Ue.current.currentTime=0)}catch{}Tn(!0)},n1=()=>{if(Ue.current){ur.current="user";try{Ue.current.pause()}catch{}Tn(!1)}},r1=()=>{Ca(),Pi(!1);try{Ni(0)}catch{}};function Ca(){try{dt.current&&(clearTimeout(dt.current),dt.current=null)}catch{}try{Ue.current&&(ur.current="user",Ue.current.pause(),Ue.current.currentTime=0)}catch{}Tn(!1)}P.useEffect(()=>{const k=Ue.current;if(!k)return;const V=()=>Tn(!0),re=()=>{ur.current==="user"&&Tn(!1)},Pe=()=>{Nf(!1)};return k.addEventListener("play",V),k.addEventListener("pause",re),k.addEventListener("ended",Pe),()=>{k.removeEventListener("play",V),k.removeEventListener("pause",re),k.removeEventListener("ended",Pe)}},[Ve,F]),P.useEffect(()=>{if(dt.current&&(clearTimeout(dt.current),dt.current=null),!Di)return;const k=F&&F.length>0?F[Ve]||F[0]:null;if(!k){Tn(!1);return}try{Ue.current&&Ue.current.play().catch(()=>{})}catch{}const V=Math.max(1e3,typeof k.duration=="number"?k.duration*1e3:3e3);return dt.current=setTimeout(()=>{!F||Ve>=F.length-1?(Tn(!1),Pi(!0),dt.current=null):Ni(re=>re+1)},V),()=>{dt.current&&(clearTimeout(dt.current),dt.current=null)}},[Di,Ve,F]),P.useEffect(()=>{if(Ue.current)try{ur.current==="user"&&(Ue.current.pause(),Ue.current.currentTime=0,Tn(!1))}catch{}ur.current=null;try{tl.current&&typeof tl.current.scrollTo=="function"&&tl.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[Ve]),P.useEffect(()=>()=>{try{dt.current&&clearTimeout(dt.current)}catch{}},[]),P.useEffect(()=>{try{const k=F&&F.length>0&&F[Ve]?F[Ve]:null}catch{}},[F,Ve]),P.useEffect(()=>{nl(!1)},[Ve]);const i1=async()=>{if(l.trim()){Y(!0);try{if(N){const k=await fetch(`/api/scripts/${N}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:l})});if(k.ok){const V=await k.json();q(new Date(V.script.updated_at))}else alert("Failed to save script")}else{const k=prompt("Enter a title for your script:","Untitled Script");if(!k){Y(!1);return}const V=await fetch("/api/scripts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:k,source:l})});if(V.ok){const re=await V.json();H(re.script.id),W(re.script.title),q(new Date(re.script.updated_at)),localStorage.setItem("fountain-current-script-id",re.script.id.toString())}else alert("Failed to save script")}}catch(k){console.error("Error saving script:",k),alert("Error saving script")}finally{Y(!1)}}},Of=()=>{o(dn),xe(dn);try{typeof Se=="function"&&Se(dn)}catch{}H(null),W("Untitled Script"),q(null),localStorage.removeItem("fountain-current-script-id")},s1=async()=>{if(!(!N||!confirm(`Are you sure you want to delete "${j}"? This cannot be undone.`)))try{(await fetch(`/api/scripts/${N}`,{method:"DELETE",credentials:"include"})).ok?Of():alert("Failed to delete script")}catch(V){console.error("Error deleting script:",V),alert("Error deleting script")}},l1=async()=>{try{await fetch("/auth/logout",{method:"POST",credentials:"include"}),r(null),window.location.href="/"}catch(k){console.error("Logout failed:",k),alert("Logout failed. Please try again.")}},o1=k=>{o(k.source),xe(k.source);try{typeof Se=="function"&&Se(k.source)}catch{}H(k.id),W(k.title),q(new Date(k.updated_at)),localStorage.setItem("fountain-current-script-id",k.id.toString()),b(!1)},a1=P.useCallback(k=>{const V=Ze.current;if(m(k),ee.current&&V.length>0){let re=null;for(let Pe=V.length-1;Pe>=0;Pe--)if(V[Pe].index<=k){re=V[Pe];break}if(re){const Pe=ee.current.querySelector(`[data-line-id="${re.id}"]`);if(Pe){const Le=ee.current,fn=Le.getBoundingClientRect(),Li=Pe.getBoundingClientRect(),rl=Li.top-fn.top,h1=fn.height,f1=Li.height,d1=Le.scrollTop+rl-h1/2+f1/2;Le.scrollTo({top:d1,behavior:"smooth"})}}}},[]),u1=P.useCallback(k=>{he.current&&he.current.scrollToLine&&he.current.scrollToLine(k)},[]);P.useEffect(()=>{const k=V=>{V.key==="Escape"&&(a?u(!1):f&&p(!1))};if(a||f)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[a,f]),P.useEffect(()=>{const k=()=>{_(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]);const c1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),_(!1)):st.current&&st.current.requestFullscreen?(await st.current.requestFullscreen(),_(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),_(!0))}catch(k){console.error("Fullscreen toggle failed",k)}};return t?n?A?d.jsx(Xb,{onSelectScript:o1,onCancel:()=>b(!1)}):d.jsxs("div",{className:"fountain-app",ref:st,children:[i&&d.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),s(!1)},children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),d.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),s(!1)},children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),d.jsxs("p",{style:{marginTop:"1rem"},children:[d.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),d.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:d.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),s(!1)},children:"Got it"})})]})}),d.jsx("div",{className:"persistence-toolbar",children:d.jsxs("div",{className:"toolbar-group",children:[d.jsxs("button",{className:"toolbar-btn",title:"New script",onClick:Of,children:[d.jsx("i",{className:"fas fa-file"}),"New"]}),d.jsxs("button",{className:`toolbar-btn ${U?"disabled":""}`,title:"Save current script",onClick:i1,disabled:U,children:[d.jsx("i",{className:`fas ${U?"fa-spinner fa-spin":"fa-save"}`}),"Save"]}),d.jsxs("button",{className:"toolbar-btn",title:"Load saved script",onClick:()=>b(!0),children:[d.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),N&&d.jsx("button",{className:"toolbar-btn danger",title:"Delete current script",onClick:s1,children:d.jsx("i",{className:"fas fa-trash"})}),d.jsx("div",{className:"toolbar-divider"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",marginLeft:"8px",marginRight:"8px"},children:[d.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#f5f5f5"},children:j}),d.jsx("span",{style:{fontSize:"0.7rem",color:"#999"},children:z?`Last saved: ${z.toLocaleDateString()} ${z.toLocaleTimeString()}`:"Last saved: Never"})]}),d.jsx("div",{className:"toolbar-divider"}),d.jsxs("button",{className:`toolbar-btn character-btn ${fe.length===0?"disabled":""}`,onClick:()=>fe.length>0&&p(!0),title:fe.length>0?"Character List":"No characters found",disabled:fe.length===0,children:[d.jsx("i",{className:"fas fa-user"}),"Characters",fe.length>0&&d.jsx("span",{className:"character-count-badge",children:fe.length})]}),d.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>u(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[d.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),d.jsxs("button",{className:"toolbar-btn demo-btn",onClick:()=>h(!0),title:"Show demo scripts","aria-label":"Open demo scripts modal",style:{backgroundColor:"#e75480",color:"white",marginLeft:0},children:[d.jsx("i",{className:"fas fa-download","aria-hidden":"true"}),"Demo"]}),n&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"toolbar-divider"}),d.jsxs("button",{className:"toolbar-btn",onClick:l1,title:`Logged in as ${n.email}`,"aria-label":"Logout",style:{marginLeft:"auto"},children:[d.jsx("i",{className:"fas fa-sign-out-alt","aria-hidden":"true"}),"Logout"]})]}),S&&d.jsxs("div",{className:"last-saved",style:{marginLeft:8},children:["Last saved: ",S.toLocaleDateString()," at ",S.toLocaleTimeString()]})]})}),c&&d.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,letterSpacing:"0.03em",color:"#fff",marginBottom:"0.5em"},children:"Demo Scripts"}),d.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("style",{children:`
                .modal-content, .modal-header, .modal-body, .demo-section h2, .demo-section p {
                  color: #fff !important;
                }
                .demo-section h2 {
                  font-size: 1.3rem;
                  font-weight: 600;
                  margin-bottom: 0.25em;
                  margin-top: 1.2em;
                  letter-spacing: 0.02em;
                }
                .demo-section p {
                  padding: 0.5em 0 0.75em 0;
                  line-height: 1.6;
                  color: #b0b0b0 !important;
                }
                .demo-section .toolbar-btn {
                  background-color: #e75480;
                  color: #fff;
                  border: none;
                  font-weight: 600;
                  box-shadow: 0 2px 8px rgba(231,84,128,0.08);
                }
                .demo-section .toolbar-btn:hover {
                  background-color: #c63c6e;
                }
              `}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Film"}),d.jsx("p",{children:"A short live-action sample set in a street caf. Demonstrates panels, dialogue, and images."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/film_the_coffee_deal.fountain").then(k=>k.text()).then(k=>{o(k),xe(k),h(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Film Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Animation"}),d.jsx("p",{children:"A musical animation sample featuring a singing squirrel. Shows lyrics, musical cues, and character interaction."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/animation_the_singing_squirrel.fountain").then(k=>k.text()).then(k=>{o(k),xe(k),h(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Animation Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Advertising"}),d.jsx("p",{children:"A playful ad script for Happy Fun Ball. Demonstrates panels, mock disclaimers, and ad-style dialogue."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/ad_happy_fun_ball.fountain").then(k=>k.text()).then(k=>{o(k),xe(k),h(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Advertising Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Documentary"}),d.jsx("p",{children:"A documentary sample with voice-over, captions, and subtitles. Shows non-fiction structure and panel usage."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/documentary_voices_of_the_river.fountain").then(k=>k.text()).then(k=>{o(k),xe(k),h(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Documentary Demo"]})]})]})]})}),d.jsx("div",{className:"mobile-view-toggle",children:d.jsx("div",{className:"tabs is-centered",children:d.jsxs("ul",{children:[d.jsx("li",{className:g==="edit"?"is-active":"",children:d.jsxs("a",{onClick:()=>v("edit"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),d.jsx("span",{children:"Edit"})]})}),d.jsx("li",{className:g==="preview"?"is-active":"",children:d.jsxs("a",{onClick:()=>v("preview"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),d.jsx("span",{children:"Preview"})]})})]})})}),d.jsxs("div",{className:"editor-layout",children:[d.jsx("button",{className:`toolbar-btn fullscreen-btn ${D?"is-active":""}`,onClick:c1,title:D?"Exit fullscreen":"Enter fullscreen","aria-label":D?"Exit fullscreen":"Enter fullscreen",children:d.jsx("i",{className:`fas ${D?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),d.jsxs("div",{className:"columns is-gapless",children:[d.jsx("div",{className:`column is-half-desktop ${g==="preview"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box editor-box",children:[d.jsx("h3",{className:"title is-6",children:"Editor"}),d.jsx(Xv,{ref:he,value:l,onChange:Zv,onCursorChange:a1,placeholder:"Type your fountain screenplay here..."})]})}),d.jsx("div",{className:`column is-half-desktop ${g==="edit"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box preview-box",children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),d.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Oi==="screenplay"?"is-active":""}`,onClick:()=>Ef("screenplay"),"aria-pressed":Oi==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Oi==="player"?"is-active":""}`,onClick:()=>Ef("player"),"aria-pressed":Oi==="player",title:"Show media player",children:"Player"})]})]}),d.jsx("div",{})]}),Oi==="screenplay"?d.jsx("div",{className:"preview-content",ref:ee,children:G.length===0?d.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):G.map(k=>d.jsx("div",{className:`preview-line ${k.className||""} ${k.index===w?"current-line":""}`,"data-type":k.type,"data-line-id":k.id,"data-line-index":k.index,onClick:()=>u1(k.index),style:{cursor:"pointer"},children:k.type==="image"||k.type==="audio"||k.type==="title_page"||k.type==="page_break"||k.type==="page_number"?d.jsx("div",{dangerouslySetInnerHTML:{__html:k.text}}):k.text||""},k.id))}):d.jsxs("div",{className:"media-player",ref:tl,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const k=F&&F.length>0?F[Ve]||F[0]:null,V=k&&typeof k.duration=="number"?k.duration:null,re=F&&F.length?F.length:0,Pe=k&&k.title?String(k.title):"";let Le="untitled";return Pe&&Pe.trim()&&(Le=Pe.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),Le||(Le="untitled")),d.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[d.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[d.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>nl(!0),onMouseLeave:()=>nl(!1),onClick:()=>nl(fn=>!fn),"aria-haspopup":"true","aria-expanded":Tf,children:Le}),k&&k.nesting&&Tf?d.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[k.nesting.act?d.jsxs("div",{children:[d.jsx("strong",{children:"Act:"})," ",k.nesting.act]}):null,k.nesting.scene?d.jsxs("div",{children:[d.jsx("strong",{children:"Scene:"})," ",k.nesting.scene]}):null,k.nesting.sequence?d.jsxs("div",{children:[d.jsx("strong",{children:"Sequence:"})," ",k.nesting.sequence]}):null,!k.nesting.act&&!k.nesting.sequence&&!k.nesting.scene?d.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),d.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${Ve+1} / ${re})`})]}),d.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:d.jsxs("div",{style:{color:"#999"},children:["lines ",k&&typeof k.startLine=="number"?k.startLine:"?","",k&&typeof k.endLine=="number"?k.endLine:"?"]})})]}),d.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[d.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[d.jsx("span",{style:{fontSize:"0.95rem"},children:""}),V?`${V}s`:"n/a"]}),d.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:r1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsxs("button",{className:`toolbar-btn ${Di?"is-active":""}`,title:"Play","aria-label":"Play",onClick:t1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[Di?d.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,""]}),d.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:n1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:e1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:Nf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""})]})]}),Di&&(()=>{const fn=F&&F.length>0?F[Ve]||F[0]:null,Li=fn&&typeof fn.duration=="number"?fn.duration:null,rl=Math.max(1e3,typeof Li=="number"?Li*1e3:3e3);return d.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:d.jsx("div",{className:"player-progress",style:{animationDuration:`${rl}ms`},"aria-hidden":"true"},`player-progress-${Ve}-${rl}`)})})()]})})(),(()=>{if(Mf)return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const k=F&&F.length>0?F[Ve]||F[0]:null,V=k&&k.imageUrl?k.imageUrl:null;return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:V?d.jsx("img",{src:V,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:d.jsx("span",{children:"No image"})})})})(),(()=>{const k=F&&F.length>0?F[Ve]||F[0]:null,V=k&&k.audioUrl?k.audioUrl:null;return d.jsx("div",{style:{marginBottom:"0.75rem"},children:V?d.jsx("audio",{ref:Ue,controls:!0,src:V,style:{width:"100%"}}):d.jsx("audio",{ref:Ue,controls:!0,disabled:!0,style:{width:"100%"}})})})(),d.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!F||F.length===0?d.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const k=F&&F.length>0?F[Ve]||F[0]:null;return d.jsx("div",{children:d.jsx("div",{style:{padding:"0.5rem"},children:d.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:k&&k.blocks&&k.blocks.length>0?k.blocks.map(V=>d.jsx("div",{className:`preview-line ${V.className||""}`,dangerouslySetInnerHTML:{__html:V.text||""}},V.id)):k&&k.snippet?k.snippet.split(/\r?\n/).map((V,re)=>d.jsx("div",{style:{whiteSpace:"pre-wrap"},children:V||""},re)):d.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),a&&d.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Fountain.ext Format Reference"}),d.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Title Page"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",d.jsx("br",{}),"Credit: Written by",d.jsx("br",{}),"Author: John Dope",d.jsx("br",{}),"Authors: John Dope and Jane Smith",d.jsx("br",{}),"Source: Based on the novel by Famous Writer",d.jsx("br",{}),"Draft Date: October 4, 2025",d.jsx("br",{}),"Date: 10/04/2025",d.jsx("br",{}),"Contact:",d.jsx("br",{}),"John Dope",d.jsx("br",{}),"555-123-4567",d.jsx("br",{}),"john@example.com",d.jsx("br",{}),"",d.jsx("br",{}),"Literary Agent",d.jsx("br",{}),"Agency Name",d.jsx("br",{}),"agent@agency.com",d.jsx("br",{}),"Notes: This is a sample script",d.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),d.jsxs("p",{children:["Title page elements appear at the top of your script. All are optional. The parser recognizes a wide range of common title-page keys (case-insensitive). Examples include:",d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"title"}),", ",d.jsx("strong",{children:"credit"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"author"}),", ",d.jsx("strong",{children:"authors"}),", ",d.jsx("strong",{children:"writer"}),", ",d.jsx("strong",{children:"writers"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"written by"}),", ",d.jsx("strong",{children:"screenplay by"}),", ",d.jsx("strong",{children:"teleplay by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"story by"}),", ",d.jsx("strong",{children:"adaptation by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"source"}),", ",d.jsx("strong",{children:"based on"}),", ",d.jsx("strong",{children:"based on characters by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"notes"}),", ",d.jsx("strong",{children:"draft"}),", ",d.jsx("strong",{children:"draft date"}),", ",d.jsx("strong",{children:"draft #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"revision"}),", ",d.jsx("strong",{children:"revision date"}),", ",d.jsx("strong",{children:"revision color"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"date"}),", ",d.jsx("strong",{children:"contact"}),", ",d.jsx("strong",{children:"copyright"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"wga"}),", ",d.jsx("strong",{children:"wga registration"}),", ",d.jsx("strong",{children:"registration"}),", ",d.jsx("strong",{children:"registration #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"series"}),", ",d.jsx("strong",{children:"episode"}),", ",d.jsx("strong",{children:"episode title"}),", ",d.jsx("strong",{children:"showrunner"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"production"}),", ",d.jsx("strong",{children:"production company"})]})]}),"The parser accepts alternate spacing (for example ",d.jsx("code",{children:"written by:"}),') and is case-insensitive. Use "Author" for a single writer and "Authors" for multiple. Contact blocks may be multi-line (indent subsequent lines). End the title page with ',d.jsx("code",{children:"==="})," (page break)."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Scene Headings"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["EXT. PARKING LOT - DAY",d.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",d.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),d.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Characters & Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["MENTOR",d.jsx("br",{}),"Welcome to the team!",d.jsx("br",{}),d.jsx("br",{}),"@MENTOR",d.jsx("br",{}),"(power user syntax)",d.jsx("br",{}),d.jsx("br",{}),"USER #1",d.jsx("br",{}),"Thanks for having me.",d.jsx("br",{}),d.jsx("br",{}),"BOB O'SHAUNNESSY",d.jsx("br",{}),"(whispering)",d.jsx("br",{}),"This is a parenthetical."]}),d.jsxs("p",{children:["Characters are normally written in ALL CAPS (e.g., ",d.jsx("code",{children:"BOB"}),", ",d.jsx("code",{children:"DR. SMITH"}),"), but the editor also supports a power-user ",d.jsx("code",{children:"@"})," prefix for mixed-case or unusual names (for example ",d.jsx("code",{children:"@John Doe"}),"). Character matching is Unicode-aware: a character name must start with an uppercase Unicode letter and may contain Unicode letters, numbers, apostrophes (",d.jsx("code",{children:"'"}),"), hyphens (",d.jsx("code",{children:"-"}),"), spaces or tabs. The power-user ",d.jsx("code",{children:"@"})," form (",d.jsx("code",{children:"@Name"}),") allows mixed case and additional punctuation where needed. Parentheticals (for example ",d.jsx("code",{children:"(whispering)"}),") are recognized when placed immediately after a character name and are rendered as parentheticals; the lines that follow are treated as dialogue. For dual dialogue, append ",d.jsx("code",{children:"^"})," to stacked character namesthese must appear consecutively above the dialogue block. Edge cases: the lexer intentionally requires the name to begin with an uppercase Unicode letter to avoid accidental matches inside action text; use the ",d.jsx("code",{children:"@"})," prefix for names that don't follow the all-caps convention or that start with non-letter characters. This supports non-ASCII names (for example: ",d.jsx("strong",{children:"LODIE"}),", ",d.jsx("strong",{children:"UKASZ"}),", ",d.jsx("strong",{children:""}),") and matches uppercase letters across many scripts."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Dual Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["ALICE^",d.jsx("br",{}),"BOB^",d.jsx("br",{}),"CHARLIE^",d.jsx("br",{}),"I can't believe it!",d.jsx("br",{}),d.jsx("br",{}),"CHARLIE ^",d.jsx("br",{}),"DAVE ^",d.jsx("br",{}),"(disgusted)",d.jsx("br",{}),"Eew. no it's nooot!",d.jsx("br",{}),d.jsx("br",{})]}),d.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Action Lines"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Bob walks into the room and looks around nervously.",d.jsx("br",{}),d.jsx("br",{}),"The computer screen flickers to life."]}),d.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Transitions"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["FADE IN:",d.jsx("br",{}),"CUT TO:",d.jsx("br",{}),"FADE TO BLACK.",d.jsx("br",{}),"> CUT TO BLACK."]}),d.jsxs("p",{children:["Transitions control scene changes. The matcher supports a wider set of transition phrases (for example: ",d.jsx("code",{children:"FADE IN:"}),", ",d.jsx("code",{children:"FADE OUT."}),", ",d.jsx("code",{children:"CUT TO:"}),", ",d.jsx("code",{children:"SMASH CUT TO:"}),", ",d.jsx("code",{children:"MATCH CUT TO:"}),", ",d.jsx("code",{children:"DISSOLVE TO:"}),", ",d.jsx("code",{children:"WIPE TO:"}),", ",d.jsx("code",{children:"BACK TO:"}),", and other common variants). Use ",d.jsx("code",{children:">"})," for the power-user transition syntax."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Centered Text"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:[">INTERMISSION<",d.jsx("br",{}),">THE END<"]}),d.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["# Act I",d.jsx("br",{}),"## Scene 1: The Beginning",d.jsx("br",{}),"### Sequence A: Setup",d.jsx("br",{}),"#### Panel 1",d.jsx("br",{}),"02:30",d.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",d.jsx("br",{}),"[a]https://example.com/dialogue.mp3",d.jsx("br",{}),d.jsx("br",{}),"#### Panel 2",d.jsx("br",{}),"01:15",d.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),d.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Notes & Comments"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["[[This is a note for the writer]]",d.jsx("br",{}),d.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),d.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Special Elements"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["= Synopsis: Brief scene description",d.jsx("br",{}),d.jsx("br",{}),"===",d.jsx("br",{}),"(Page Break)",d.jsx("br",{}),d.jsx("br",{}),"~Lyrics:",d.jsx("br",{}),'~"Happy birthday to you"',d.jsx("br",{}),'~"Happy birthday to you"']}),d.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),f&&d.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Character List"}),d.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:""})]}),d.jsx("div",{className:"modal-body",children:fe.length===0?d.jsx("p",{children:"No characters found in the script."}):d.jsx("div",{className:"character-list",children:fe.map(k=>d.jsxs("div",{className:"character-item",children:[d.jsx("div",{className:"character-name",children:k}),d.jsxs("div",{className:"character-count",children:[De.get(k)||0," dialogue lines"]})]},k))})})]})})]}):d.jsx(Jb,{}):d.jsx("div",{className:"fountain-app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:d.jsx("div",{children:"Loading..."})})}xu.createRoot(document.getElementById("root")).render(d.jsx(D1.StrictMode,{children:d.jsx(nA,{})}));
