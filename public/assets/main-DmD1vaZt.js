import{B as Lt,p as da,a as r1}from"./chunk-B8u9Xqmg.js";function i1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zp={exports:{}},Fo={},em={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rs=Symbol.for("react.element"),s1=Symbol.for("react.portal"),l1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),h1=Symbol.for("react.context"),c1=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),d1=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),vf=Symbol.iterator;function m1(t){return t===null||typeof t!="object"?null:(t=vf&&t[vf]||t["@@iterator"],typeof t=="function"?t:null)}var tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nm=Object.assign,rm={};function yi(t,e,n){this.props=t,this.context=e,this.refs=rm,this.updater=n||tm}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function im(){}im.prototype=yi.prototype;function Kh(t,e,n){this.props=t,this.context=e,this.refs=rm,this.updater=n||tm}var qh=Kh.prototype=new im;qh.constructor=Kh;nm(qh,yi.prototype);qh.isPureReactComponent=!0;var xf=Array.isArray,sm=Object.prototype.hasOwnProperty,Gh={current:null},lm={key:!0,ref:!0,__self:!0,__source:!0};function om(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)sm.call(e,r)&&!lm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Rs,type:t,key:s,ref:l,props:i,_owner:Gh.current}}function g1(t,e){return{$$typeof:Rs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rs}function y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wf=/\/+/g;function pa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y1(""+t.key):e.toString(36)}function Ol(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Rs:case s1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+pa(l,0):r,xf(i)?(n="",t!=null&&(n=t.replace(wf,"$&/")+"/"),Ol(i,e,n,"",function(u){return u})):i!=null&&(Qh(i)&&(i=g1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(wf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",xf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+pa(s,o);l+=Ol(s,e,n,a,i)}else if(a=m1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+pa(s,o++),l+=Ol(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function qs(t,e,n){if(t==null)return t;var r=[],i=0;return Ol(t,r,"","",function(s){return e.call(n,s,i++)}),r}function v1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var et={current:null},Dl={transition:null},x1={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Dl,ReactCurrentOwner:Gh};function am(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:qs,forEach:function(t,e,n){qs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qs(t,function(){e++}),e},toArray:function(t){return qs(t,function(e){return e})||[]},only:function(t){if(!Qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=yi;Q.Fragment=l1;Q.Profiler=a1;Q.PureComponent=Kh;Q.StrictMode=o1;Q.Suspense=f1;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x1;Q.act=am;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Gh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)sm.call(e,a)&&!lm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Rs,type:t.type,key:i,ref:s,props:r,_owner:l}};Q.createContext=function(t){return t={$$typeof:h1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u1,_context:t},t.Consumer=t};Q.createElement=om;Q.createFactory=function(t){var e=om.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:c1,render:t}};Q.isValidElement=Qh;Q.lazy=function(t){return{$$typeof:p1,_payload:{_status:-1,_result:t},_init:v1}};Q.memo=function(t,e){return{$$typeof:d1,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=Dl.transition;Dl.transition={};try{t()}finally{Dl.transition=e}};Q.unstable_act=am;Q.useCallback=function(t,e){return et.current.useCallback(t,e)};Q.useContext=function(t){return et.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return et.current.useDeferredValue(t)};Q.useEffect=function(t,e){return et.current.useEffect(t,e)};Q.useId=function(){return et.current.useId()};Q.useImperativeHandle=function(t,e,n){return et.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return et.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return et.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return et.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return et.current.useReducer(t,e,n)};Q.useRef=function(t){return et.current.useRef(t)};Q.useState=function(t){return et.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return et.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return et.current.useTransition()};Q.version="18.3.1";em.exports=Q;var I=em.exports;const w1=i1(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=I,S1=Symbol.for("react.element"),C1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,A1=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E1={key:!0,ref:!0,__self:!0,__source:!0};function um(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)b1.call(e,r)&&!E1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:S1,type:t,key:s,ref:l,props:i,_owner:A1.current}}Fo.Fragment=C1;Fo.jsx=um;Fo.jsxs=um;Zp.exports=Fo;var d=Zp.exports,uu={},hm={exports:{}},xt={},cm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,W){var F=D.length;D.push(W);e:for(;0<F;){var G=F-1>>>1,q=D[G];if(0<i(q,W))D[G]=W,D[F]=q,F=G;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var W=D[0],F=D.pop();if(F!==W){D[0]=F;e:for(var G=0,q=D.length,ke=q>>>1;G<ke;){var ne=2*(G+1)-1,ut=D[ne],Me=ne+1,Ye=D[Me];if(0>i(ut,F))Me<q&&0>i(Ye,ut)?(D[G]=Ye,D[Me]=F,G=Me):(D[G]=ut,D[ne]=F,G=ne);else if(Me<q&&0>i(Ye,F))D[G]=Ye,D[Me]=F,G=Me;else break e}}return W}function i(D,W){var F=D.sortIndex-W.sortIndex;return F!==0?F:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],h=1,c=null,f=3,p=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=D)r(u),W.sortIndex=W.expirationTime,e(a,W);else break;W=n(u)}}function k(D){if(x=!1,v(D),!g)if(n(a)!==null)g=!0,te(C);else{var W=n(u);W!==null&&Qe(k,W.startTime-D)}}function C(D,W){g=!1,x&&(x=!1,m(N),N=-1),p=!0;var F=f;try{for(v(W),c=n(a);c!==null&&(!(c.expirationTime>W)||D&&!_());){var G=c.callback;if(typeof G=="function"){c.callback=null,f=c.priorityLevel;var q=G(c.expirationTime<=W);W=t.unstable_now(),typeof q=="function"?c.callback=q:c===n(a)&&r(a),v(W)}else r(a);c=n(a)}if(c!==null)var ke=!0;else{var ne=n(u);ne!==null&&Qe(k,ne.startTime-W),ke=!1}return ke}finally{c=null,f=F,p=!1}}var A=!1,b=null,N=-1,V=5,B=-1;function _(){return!(t.unstable_now()-B<V)}function H(){if(b!==null){var D=t.unstable_now();B=D;var W=!0;try{W=b(!0,D)}finally{W?K():(A=!1,b=null)}}else A=!1}var K;if(typeof y=="function")K=function(){y(H)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ce=P.port2;P.port1.onmessage=H,K=function(){ce.postMessage(null)}}else K=function(){w(H,0)};function te(D){b=D,A||(A=!0,K())}function Qe(D,W){N=w(function(){D(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,te(C))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var F=f;f=W;try{return D()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=f;f=D;try{return W()}finally{f=F}},t.unstable_scheduleCallback=function(D,W,F){var G=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=F+q,D={id:h++,callback:W,priorityLevel:D,startTime:F,expirationTime:q,sortIndex:-1},F>G?(D.sortIndex=F,e(u,D),n(a)===null&&D===n(u)&&(x?(m(N),N=-1):x=!0,Qe(k,F-G))):(D.sortIndex=q,e(a,D),g||p||(g=!0,te(C))),D},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(D){var W=f;return function(){var F=f;f=W;try{return D.apply(this,arguments)}finally{f=F}}}})(fm);cm.exports=fm;var M1=cm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=I,gt=M1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dm=new Set,ls={};function Er(t,e){ri(t,e),ri(t+"Capture",e)}function ri(t,e){for(ls[t]=e,t=0;t<e.length;t++)dm.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=Object.prototype.hasOwnProperty,N1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kf={},Sf={};function O1(t){return hu.call(Sf,t)?!0:hu.call(kf,t)?!1:N1.test(t)?Sf[t]=!0:(kf[t]=!0,!1)}function D1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P1(t,e,n,r){if(e===null||typeof e>"u"||D1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tt(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yh,Jh);ze[e]=new tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yh,Jh);ze[e]=new tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yh,Jh);ze[e]=new tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new tt(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xh(t,e,n,r){var i=ze.hasOwnProperty(e)?ze[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P1(e,n,i,r)&&(n=null),r||i===null?O1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=T1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),cu=Symbol.for("react.profiler"),pm=Symbol.for("react.provider"),mm=Symbol.for("react.context"),ec=Symbol.for("react.forward_ref"),fu=Symbol.for("react.suspense"),du=Symbol.for("react.suspense_list"),tc=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),gm=Symbol.for("react.offscreen"),Cf=Symbol.iterator;function bi(t){return t===null||typeof t!="object"?null:(t=Cf&&t[Cf]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,ma;function ji(t){if(ma===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ma=e&&e[1]||""}return`
`+ma+t}var ga=!1;function ya(t,e){if(!t||ga)return"";ga=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{ga=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ji(t):""}function L1(t){switch(t.tag){case 5:return ji(t.type);case 16:return ji("Lazy");case 13:return ji("Suspense");case 19:return ji("SuspenseList");case 0:case 2:case 15:return t=ya(t.type,!1),t;case 11:return t=ya(t.type.render,!1),t;case 1:return t=ya(t.type,!0),t;default:return""}}function pu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lr:return"Fragment";case Pr:return"Portal";case cu:return"Profiler";case Zh:return"StrictMode";case fu:return"Suspense";case du:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mm:return(t.displayName||"Context")+".Consumer";case pm:return(t._context.displayName||"Context")+".Provider";case ec:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tc:return e=t.displayName||null,e!==null?e:pu(t.type)||"Memo";case An:e=t._payload,t=t._init;try{return pu(t(e))}catch{}}return null}function R1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pu(e);case 8:return e===Zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ym(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B1(t){var e=ym(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qs(t){t._valueTracker||(t._valueTracker=B1(t))}function vm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ym(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mu(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xm(t,e){e=e.checked,e!=null&&Xh(t,"checked",e,!1)}function gu(t,e){xm(t,e);var n=Kn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yu(t,e.type,n):e.hasOwnProperty("defaultValue")&&yu(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Af(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yu(t,e,n){(e!=="number"||Ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fi=Array.isArray;function qr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ef(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Fi(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function wm(t,e){var n=Kn(e.value),r=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function km(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?km(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ys,Sm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ys.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function os(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I1=["Webkit","ms","Moz","O"];Object.keys(Ui).forEach(function(t){I1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ui[e]=Ui[t]})});function Cm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ui.hasOwnProperty(t)&&Ui[t]?(""+e).trim():e+"px"}function bm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var j1=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wu(t,e){if(e){if(j1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Su=null;function nc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cu=null,Gr=null,Qr=null;function Tf(t){if(t=js(t)){if(typeof Cu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Vo(e),Cu(t.stateNode,t.type,e))}}function Am(t){Gr?Qr?Qr.push(t):Qr=[t]:Gr=t}function Em(){if(Gr){var t=Gr,e=Qr;if(Qr=Gr=null,Tf(t),e)for(t=0;t<e.length;t++)Tf(e[t])}}function Mm(t,e){return t(e)}function Tm(){}var va=!1;function Nm(t,e,n){if(va)return t(e,n);va=!0;try{return Mm(t,e,n)}finally{va=!1,(Gr!==null||Qr!==null)&&(Tm(),Em())}}function as(t,e){var n=t.stateNode;if(n===null)return null;var r=Vo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var bu=!1;if(yn)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{bu=!1}function F1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var $i=!1,Yl=null,Jl=!1,Au=null,z1={onError:function(t){$i=!0,Yl=t}};function _1(t,e,n,r,i,s,l,o,a){$i=!1,Yl=null,F1.apply(z1,arguments)}function H1(t,e,n,r,i,s,l,o,a){if(_1.apply(this,arguments),$i){if($i){var u=Yl;$i=!1,Yl=null}else throw Error(M(198));Jl||(Jl=!0,Au=u)}}function Mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Om(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nf(t){if(Mr(t)!==t)throw Error(M(188))}function W1(t){var e=t.alternate;if(!e){if(e=Mr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Nf(i),t;if(s===r)return Nf(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Dm(t){return t=W1(t),t!==null?Pm(t):null}function Pm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pm(t);if(e!==null)return e;t=t.sibling}return null}var Lm=gt.unstable_scheduleCallback,Of=gt.unstable_cancelCallback,V1=gt.unstable_shouldYield,U1=gt.unstable_requestPaint,we=gt.unstable_now,$1=gt.unstable_getCurrentPriorityLevel,rc=gt.unstable_ImmediatePriority,Rm=gt.unstable_UserBlockingPriority,Xl=gt.unstable_NormalPriority,K1=gt.unstable_LowPriority,Bm=gt.unstable_IdlePriority,zo=null,ln=null;function q1(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(zo,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Y1,G1=Math.log,Q1=Math.LN2;function Y1(t){return t>>>=0,t===0?32:31-(G1(t)/Q1|0)|0}var Js=64,Xs=4194304;function zi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=zi(o):(s&=l,s!==0&&(r=zi(s)))}else l=n&~i,l!==0?r=zi(l):s!==0&&(r=zi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),i=1<<n,r|=t[n],e&=~i;return r}function J1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-zt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=J1(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Eu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Im(){var t=Js;return Js<<=1,!(Js&4194240)&&(Js=64),t}function xa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function Z1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ic(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var re=0;function jm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fm,sc,zm,_m,Hm,Mu=!1,Zs=[],jn=null,Fn=null,zn=null,us=new Map,hs=new Map,Nn=[],ex="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Df(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(e.pointerId)}}function Ei(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=js(e),e!==null&&sc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tx(t,e,n,r,i){switch(e){case"focusin":return jn=Ei(jn,t,e,n,r,i),!0;case"dragenter":return Fn=Ei(Fn,t,e,n,r,i),!0;case"mouseover":return zn=Ei(zn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return us.set(s,Ei(us.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hs.set(s,Ei(hs.get(s)||null,t,e,n,r,i)),!0}return!1}function Wm(t){var e=ar(t.target);if(e!==null){var n=Mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Om(n),e!==null){t.blockedOn=e,Hm(t.priority,function(){zm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Su=r,n.target.dispatchEvent(r),Su=null}else return e=js(n),e!==null&&sc(e),t.blockedOn=n,!1;e.shift()}return!0}function Pf(t,e,n){Pl(t)&&n.delete(e)}function nx(){Mu=!1,jn!==null&&Pl(jn)&&(jn=null),Fn!==null&&Pl(Fn)&&(Fn=null),zn!==null&&Pl(zn)&&(zn=null),us.forEach(Pf),hs.forEach(Pf)}function Mi(t,e){t.blockedOn===e&&(t.blockedOn=null,Mu||(Mu=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,nx)))}function cs(t){function e(i){return Mi(i,t)}if(0<Zs.length){Mi(Zs[0],t);for(var n=1;n<Zs.length;n++){var r=Zs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&Mi(jn,t),Fn!==null&&Mi(Fn,t),zn!==null&&Mi(zn,t),us.forEach(e),hs.forEach(e),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Wm(n),n.blockedOn===null&&Nn.shift()}var Yr=Sn.ReactCurrentBatchConfig,eo=!0;function rx(t,e,n,r){var i=re,s=Yr.transition;Yr.transition=null;try{re=1,lc(t,e,n,r)}finally{re=i,Yr.transition=s}}function ix(t,e,n,r){var i=re,s=Yr.transition;Yr.transition=null;try{re=4,lc(t,e,n,r)}finally{re=i,Yr.transition=s}}function lc(t,e,n,r){if(eo){var i=Tu(t,e,n,r);if(i===null)Na(t,e,r,to,n),Df(t,r);else if(tx(i,t,e,n,r))r.stopPropagation();else if(Df(t,r),e&4&&-1<ex.indexOf(t)){for(;i!==null;){var s=js(i);if(s!==null&&Fm(s),s=Tu(t,e,n,r),s===null&&Na(t,e,r,to,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Na(t,e,r,null,n)}}var to=null;function Tu(t,e,n,r){if(to=null,t=nc(r),t=ar(t),t!==null)if(e=Mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Om(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return to=t,null}function Vm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($1()){case rc:return 1;case Rm:return 4;case Xl:case K1:return 16;case Bm:return 536870912;default:return 16}default:return 16}}var Pn=null,oc=null,Ll=null;function Um(){if(Ll)return Ll;var t,e=oc,n=e.length,r,i="value"in Pn?Pn.value:Pn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Ll=i.slice(t,1<r?1-r:void 0)}function Rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function el(){return!0}function Lf(){return!1}function wt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?el:Lf,this.isPropagationStopped=Lf,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=wt(vi),Is=ye({},vi,{view:0,detail:0}),sx=wt(Is),wa,ka,Ti,_o=ye({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ti&&(Ti&&t.type==="mousemove"?(wa=t.screenX-Ti.screenX,ka=t.screenY-Ti.screenY):ka=wa=0,Ti=t),wa)},movementY:function(t){return"movementY"in t?t.movementY:ka}}),Rf=wt(_o),lx=ye({},_o,{dataTransfer:0}),ox=wt(lx),ax=ye({},Is,{relatedTarget:0}),Sa=wt(ax),ux=ye({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=wt(ux),cx=ye({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fx=wt(cx),dx=ye({},vi,{data:0}),Bf=wt(dx),px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gx[t])?!!e[t]:!1}function uc(){return yx}var vx=ye({},Is,{key:function(t){if(t.key){var e=px[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(t){return t.type==="keypress"?Rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xx=wt(vx),wx=ye({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),If=wt(wx),kx=ye({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),Sx=wt(kx),Cx=ye({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=wt(Cx),Ax=ye({},_o,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ex=wt(Ax),Mx=[9,13,27,32],hc=yn&&"CompositionEvent"in window,Ki=null;yn&&"documentMode"in document&&(Ki=document.documentMode);var Tx=yn&&"TextEvent"in window&&!Ki,$m=yn&&(!hc||Ki&&8<Ki&&11>=Ki),jf=" ",Ff=!1;function Km(t,e){switch(t){case"keyup":return Mx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rr=!1;function Nx(t,e){switch(t){case"compositionend":return qm(e);case"keypress":return e.which!==32?null:(Ff=!0,jf);case"textInput":return t=e.data,t===jf&&Ff?null:t;default:return null}}function Ox(t,e){if(Rr)return t==="compositionend"||!hc&&Km(t,e)?(t=Um(),Ll=oc=Pn=null,Rr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $m&&e.locale!=="ko"?null:e.data;default:return null}}var Dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dx[t.type]:e==="textarea"}function Gm(t,e,n,r){Am(r),e=no(e,"onChange"),0<e.length&&(n=new ac("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qi=null,fs=null;function Px(t){sg(t,0)}function Ho(t){var e=jr(t);if(vm(e))return t}function Lx(t,e){if(t==="change")return e}var Qm=!1;if(yn){var Ca;if(yn){var ba="oninput"in document;if(!ba){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),ba=typeof _f.oninput=="function"}Ca=ba}else Ca=!1;Qm=Ca&&(!document.documentMode||9<document.documentMode)}function Hf(){qi&&(qi.detachEvent("onpropertychange",Ym),fs=qi=null)}function Ym(t){if(t.propertyName==="value"&&Ho(fs)){var e=[];Gm(e,fs,t,nc(t)),Nm(Px,e)}}function Rx(t,e,n){t==="focusin"?(Hf(),qi=e,fs=n,qi.attachEvent("onpropertychange",Ym)):t==="focusout"&&Hf()}function Bx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(fs)}function Ix(t,e){if(t==="click")return Ho(e)}function jx(t,e){if(t==="input"||t==="change")return Ho(e)}function Fx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:Fx;function ds(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hu.call(e,i)||!Ht(t[i],e[i]))return!1}return!0}function Wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vf(t,e){var n=Wf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wf(n)}}function Jm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xm(){for(var t=window,e=Ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ql(t.document)}return e}function cc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zx(t){var e=Xm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jm(n.ownerDocument.documentElement,n)){if(r!==null&&cc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Vf(n,s);var l=Vf(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _x=yn&&"documentMode"in document&&11>=document.documentMode,Br=null,Nu=null,Gi=null,Ou=!1;function Uf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ou||Br==null||Br!==Ql(r)||(r=Br,"selectionStart"in r&&cc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gi&&ds(Gi,r)||(Gi=r,r=no(Nu,"onSelect"),0<r.length&&(e=new ac("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Br)))}function tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ir={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},Aa={},Zm={};yn&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Wo(t){if(Aa[t])return Aa[t];if(!Ir[t])return t;var e=Ir[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zm)return Aa[t]=e[n];return t}var eg=Wo("animationend"),tg=Wo("animationiteration"),ng=Wo("animationstart"),rg=Wo("transitionend"),ig=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(t,e){ig.set(t,e),Er(e,[t])}for(var Ea=0;Ea<$f.length;Ea++){var Ma=$f[Ea],Hx=Ma.toLowerCase(),Wx=Ma[0].toUpperCase()+Ma.slice(1);er(Hx,"on"+Wx)}er(eg,"onAnimationEnd");er(tg,"onAnimationIteration");er(ng,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(rg,"onTransitionEnd");ri("onMouseEnter",["mouseout","mouseover"]);ri("onMouseLeave",["mouseout","mouseover"]);ri("onPointerEnter",["pointerout","pointerover"]);ri("onPointerLeave",["pointerout","pointerover"]);Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Er("onBeforeInput",["compositionend","keypress","textInput","paste"]);Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(_i));function Kf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,H1(r,e,void 0,t),t.currentTarget=null}function sg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;Kf(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;Kf(i,o,u),s=a}}}if(Jl)throw t=Au,Jl=!1,Au=null,t}function ae(t,e){var n=e[Bu];n===void 0&&(n=e[Bu]=new Set);var r=t+"__bubble";n.has(r)||(lg(e,t,2,!1),n.add(r))}function Ta(t,e,n){var r=0;e&&(r|=4),lg(n,t,r,e)}var nl="_reactListening"+Math.random().toString(36).slice(2);function ps(t){if(!t[nl]){t[nl]=!0,dm.forEach(function(n){n!=="selectionchange"&&(Vx.has(n)||Ta(n,!1,t),Ta(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nl]||(e[nl]=!0,Ta("selectionchange",!1,e))}}function lg(t,e,n,r){switch(Vm(e)){case 1:var i=rx;break;case 4:i=ix;break;default:i=lc}n=i.bind(null,e,n,t),i=void 0,!bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Na(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=ar(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Nm(function(){var u=s,h=nc(n),c=[];e:{var f=ig.get(t);if(f!==void 0){var p=ac,g=t;switch(t){case"keypress":if(Rl(n)===0)break e;case"keydown":case"keyup":p=xx;break;case"focusin":g="focus",p=Sa;break;case"focusout":g="blur",p=Sa;break;case"beforeblur":case"afterblur":p=Sa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ox;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Sx;break;case eg:case tg:case ng:p=hx;break;case rg:p=bx;break;case"scroll":p=sx;break;case"wheel":p=Ex;break;case"copy":case"cut":case"paste":p=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=If}var x=(e&4)!==0,w=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var y=u,v;y!==null;){v=y;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,m!==null&&(k=as(y,m),k!=null&&x.push(ms(y,k,v)))),w)break;y=y.return}0<x.length&&(f=new p(f,g,null,n,h),c.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Su&&(g=n.relatedTarget||n.fromElement)&&(ar(g)||g[vn]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?ar(g):null,g!==null&&(w=Mr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(x=Rf,k="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=If,k="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?f:jr(p),v=g==null?f:jr(g),f=new x(k,y+"leave",p,n,h),f.target=w,f.relatedTarget=v,k=null,ar(h)===u&&(x=new x(m,y+"enter",g,n,h),x.target=v,x.relatedTarget=w,k=x),w=k,p&&g)t:{for(x=p,m=g,y=0,v=x;v;v=Tr(v))y++;for(v=0,k=m;k;k=Tr(k))v++;for(;0<y-v;)x=Tr(x),y--;for(;0<v-y;)m=Tr(m),v--;for(;y--;){if(x===m||m!==null&&x===m.alternate)break t;x=Tr(x),m=Tr(m)}x=null}else x=null;p!==null&&qf(c,f,p,x,!1),g!==null&&w!==null&&qf(c,w,g,x,!0)}}e:{if(f=u?jr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Lx;else if(zf(f))if(Qm)C=jx;else{C=Bx;var A=Rx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Ix);if(C&&(C=C(t,u))){Gm(c,C,n,h);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&yu(f,"number",f.value)}switch(A=u?jr(u):window,t){case"focusin":(zf(A)||A.contentEditable==="true")&&(Br=A,Nu=u,Gi=null);break;case"focusout":Gi=Nu=Br=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Uf(c,n,h);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":Uf(c,n,h)}var b;if(hc)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Rr?Km(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&($m&&n.locale!=="ko"&&(Rr||N!=="onCompositionStart"?N==="onCompositionEnd"&&Rr&&(b=Um()):(Pn=h,oc="value"in Pn?Pn.value:Pn.textContent,Rr=!0)),A=no(u,N),0<A.length&&(N=new Bf(N,t,null,n,h),c.push({event:N,listeners:A}),b?N.data=b:(b=qm(n),b!==null&&(N.data=b)))),(b=Tx?Nx(t,n):Ox(t,n))&&(u=no(u,"onBeforeInput"),0<u.length&&(h=new Bf("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=b))}sg(c,e)})}function ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function no(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=as(t,n),s!=null&&r.unshift(ms(t,s,i)),s=as(t,e),s!=null&&r.push(ms(t,s,i))),t=t.return}return r}function Tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=as(n,s),a!=null&&l.unshift(ms(n,a,o))):i||(a=as(n,s),a!=null&&l.push(ms(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Ux=/\r\n?/g,$x=/\u0000|\uFFFD/g;function Gf(t){return(typeof t=="string"?t:""+t).replace(Ux,`
`).replace($x,"")}function rl(t,e,n){if(e=Gf(e),Gf(t)!==e&&n)throw Error(M(425))}function ro(){}var Du=null,Pu=null;function Lu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ru=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,Qf=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Qf<"u"?function(t){return Qf.resolve(null).then(t).catch(Gx)}:Ru;function Gx(t){setTimeout(function(){throw t})}function Oa(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),cs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);cs(e)}function _n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xi=Math.random().toString(36).slice(2),en="__reactFiber$"+xi,gs="__reactProps$"+xi,vn="__reactContainer$"+xi,Bu="__reactEvents$"+xi,Qx="__reactListeners$"+xi,Yx="__reactHandles$"+xi;function ar(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yf(t);t!==null;){if(n=t[en])return n;t=Yf(t)}return e}t=n,n=t.parentNode}return null}function js(t){return t=t[en]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Vo(t){return t[gs]||null}var Iu=[],Fr=-1;function tr(t){return{current:t}}function he(t){0>Fr||(t.current=Iu[Fr],Iu[Fr]=null,Fr--)}function le(t,e){Fr++,Iu[Fr]=t.current,t.current=e}var qn={},qe=tr(qn),st=tr(!1),gr=qn;function ii(t,e){var n=t.type.contextTypes;if(!n)return qn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function io(){he(st),he(qe)}function Jf(t,e,n){if(qe.current!==qn)throw Error(M(168));le(qe,e),le(st,n)}function og(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,R1(t)||"Unknown",i));return ye({},n,r)}function so(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,gr=qe.current,le(qe,t),le(st,st.current),!0}function Xf(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=og(t,e,gr),r.__reactInternalMemoizedMergedChildContext=t,he(st),he(qe),le(qe,t)):he(st),le(st,n)}var hn=null,Uo=!1,Da=!1;function ag(t){hn===null?hn=[t]:hn.push(t)}function Jx(t){Uo=!0,ag(t)}function nr(){if(!Da&&hn!==null){Da=!0;var t=0,e=re;try{var n=hn;for(re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,Uo=!1}catch(i){throw hn!==null&&(hn=hn.slice(t+1)),Lm(rc,nr),i}finally{re=e,Da=!1}}return null}var zr=[],_r=0,lo=null,oo=0,kt=[],St=0,yr=null,fn=1,dn="";function sr(t,e){zr[_r++]=oo,zr[_r++]=lo,lo=t,oo=e}function ug(t,e,n){kt[St++]=fn,kt[St++]=dn,kt[St++]=yr,yr=t;var r=fn;t=dn;var i=32-zt(r)-1;r&=~(1<<i),n+=1;var s=32-zt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,fn=1<<32-zt(e)+i|n<<i|r,dn=s+t}else fn=1<<s|n<<i|r,dn=t}function fc(t){t.return!==null&&(sr(t,1),ug(t,1,0))}function dc(t){for(;t===lo;)lo=zr[--_r],zr[_r]=null,oo=zr[--_r],zr[_r]=null;for(;t===yr;)yr=kt[--St],kt[St]=null,dn=kt[--St],kt[St]=null,fn=kt[--St],kt[St]=null}var mt=null,pt=null,fe=!1,jt=null;function hg(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mt=t,pt=_n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mt=t,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yr!==null?{id:fn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mt=t,pt=null,!0):!1;default:return!1}}function ju(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fu(t){if(fe){var e=pt;if(e){var n=e;if(!Zf(t,e)){if(ju(t))throw Error(M(418));e=_n(n.nextSibling);var r=mt;e&&Zf(t,e)?hg(r,n):(t.flags=t.flags&-4097|2,fe=!1,mt=t)}}else{if(ju(t))throw Error(M(418));t.flags=t.flags&-4097|2,fe=!1,mt=t}}}function ed(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mt=t}function il(t){if(t!==mt)return!1;if(!fe)return ed(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lu(t.type,t.memoizedProps)),e&&(e=pt)){if(ju(t))throw cg(),Error(M(418));for(;e;)hg(t,e),e=_n(e.nextSibling)}if(ed(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pt=_n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pt=null}}else pt=mt?_n(t.stateNode.nextSibling):null;return!0}function cg(){for(var t=pt;t;)t=_n(t.nextSibling)}function si(){pt=mt=null,fe=!1}function pc(t){jt===null?jt=[t]:jt.push(t)}var Xx=Sn.ReactCurrentBatchConfig;function Ni(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function sl(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function td(t){var e=t._init;return e(t._payload)}function fg(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Un(m,y),m.index=0,m.sibling=null,m}function s(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function l(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,y,v,k){return y===null||y.tag!==6?(y=Fa(v,m.mode,k),y.return=m,y):(y=i(y,v),y.return=m,y)}function a(m,y,v,k){var C=v.type;return C===Lr?h(m,y,v.props.children,k,v.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&td(C)===y.type)?(k=i(y,v.props),k.ref=Ni(m,y,v),k.return=m,k):(k=Hl(v.type,v.key,v.props,null,m.mode,k),k.ref=Ni(m,y,v),k.return=m,k)}function u(m,y,v,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=za(v,m.mode,k),y.return=m,y):(y=i(y,v.children||[]),y.return=m,y)}function h(m,y,v,k,C){return y===null||y.tag!==7?(y=pr(v,m.mode,k,C),y.return=m,y):(y=i(y,v),y.return=m,y)}function c(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fa(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gs:return v=Hl(y.type,y.key,y.props,null,m.mode,v),v.ref=Ni(m,null,y),v.return=m,v;case Pr:return y=za(y,m.mode,v),y.return=m,y;case An:var k=y._init;return c(m,k(y._payload),v)}if(Fi(y)||bi(y))return y=pr(y,m.mode,v,null),y.return=m,y;sl(m,y)}return null}function f(m,y,v,k){var C=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:o(m,y,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gs:return v.key===C?a(m,y,v,k):null;case Pr:return v.key===C?u(m,y,v,k):null;case An:return C=v._init,f(m,y,C(v._payload),k)}if(Fi(v)||bi(v))return C!==null?null:h(m,y,v,k,null);sl(m,v)}return null}function p(m,y,v,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(v)||null,o(y,m,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gs:return m=m.get(k.key===null?v:k.key)||null,a(y,m,k,C);case Pr:return m=m.get(k.key===null?v:k.key)||null,u(y,m,k,C);case An:var A=k._init;return p(m,y,v,A(k._payload),C)}if(Fi(k)||bi(k))return m=m.get(v)||null,h(y,m,k,C,null);sl(y,k)}return null}function g(m,y,v,k){for(var C=null,A=null,b=y,N=y=0,V=null;b!==null&&N<v.length;N++){b.index>N?(V=b,b=null):V=b.sibling;var B=f(m,b,v[N],k);if(B===null){b===null&&(b=V);break}t&&b&&B.alternate===null&&e(m,b),y=s(B,y,N),A===null?C=B:A.sibling=B,A=B,b=V}if(N===v.length)return n(m,b),fe&&sr(m,N),C;if(b===null){for(;N<v.length;N++)b=c(m,v[N],k),b!==null&&(y=s(b,y,N),A===null?C=b:A.sibling=b,A=b);return fe&&sr(m,N),C}for(b=r(m,b);N<v.length;N++)V=p(b,m,N,v[N],k),V!==null&&(t&&V.alternate!==null&&b.delete(V.key===null?N:V.key),y=s(V,y,N),A===null?C=V:A.sibling=V,A=V);return t&&b.forEach(function(_){return e(m,_)}),fe&&sr(m,N),C}function x(m,y,v,k){var C=bi(v);if(typeof C!="function")throw Error(M(150));if(v=C.call(v),v==null)throw Error(M(151));for(var A=C=null,b=y,N=y=0,V=null,B=v.next();b!==null&&!B.done;N++,B=v.next()){b.index>N?(V=b,b=null):V=b.sibling;var _=f(m,b,B.value,k);if(_===null){b===null&&(b=V);break}t&&b&&_.alternate===null&&e(m,b),y=s(_,y,N),A===null?C=_:A.sibling=_,A=_,b=V}if(B.done)return n(m,b),fe&&sr(m,N),C;if(b===null){for(;!B.done;N++,B=v.next())B=c(m,B.value,k),B!==null&&(y=s(B,y,N),A===null?C=B:A.sibling=B,A=B);return fe&&sr(m,N),C}for(b=r(m,b);!B.done;N++,B=v.next())B=p(b,m,N,B.value,k),B!==null&&(t&&B.alternate!==null&&b.delete(B.key===null?N:B.key),y=s(B,y,N),A===null?C=B:A.sibling=B,A=B);return t&&b.forEach(function(H){return e(m,H)}),fe&&sr(m,N),C}function w(m,y,v,k){if(typeof v=="object"&&v!==null&&v.type===Lr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Gs:e:{for(var C=v.key,A=y;A!==null;){if(A.key===C){if(C=v.type,C===Lr){if(A.tag===7){n(m,A.sibling),y=i(A,v.props.children),y.return=m,m=y;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&td(C)===A.type){n(m,A.sibling),y=i(A,v.props),y.ref=Ni(m,A,v),y.return=m,m=y;break e}n(m,A);break}else e(m,A);A=A.sibling}v.type===Lr?(y=pr(v.props.children,m.mode,k,v.key),y.return=m,m=y):(k=Hl(v.type,v.key,v.props,null,m.mode,k),k.ref=Ni(m,y,v),k.return=m,m=k)}return l(m);case Pr:e:{for(A=v.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=i(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=za(v,m.mode,k),y.return=m,m=y}return l(m);case An:return A=v._init,w(m,y,A(v._payload),k)}if(Fi(v))return g(m,y,v,k);if(bi(v))return x(m,y,v,k);sl(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,v),y.return=m,m=y):(n(m,y),y=Fa(v,m.mode,k),y.return=m,m=y),l(m)):n(m,y)}return w}var li=fg(!0),dg=fg(!1),ao=tr(null),uo=null,Hr=null,mc=null;function gc(){mc=Hr=uo=null}function yc(t){var e=ao.current;he(ao),t._currentValue=e}function zu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jr(t,e){uo=t,mc=Hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(mc!==t)if(t={context:t,memoizedValue:e,next:null},Hr===null){if(uo===null)throw Error(M(308));Hr=t,uo.dependencies={lanes:0,firstContext:t}}else Hr=Hr.next=t;return e}var ur=null;function vc(t){ur===null?ur=[t]:ur.push(t)}function pg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vc(e)):(n.next=i.next,i.next=n),e.interleaved=n,xn(t,r)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var En=!1;function xc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xn(t,n)}return i=r.interleaved,i===null?(e.next=e,vc(r)):(e.next=i.next,i.next=e),r.interleaved=e,xn(t,n)}function Bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ic(t,n)}}function nd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ho(t,e,n,r){var i=t.updateQueue;En=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;l=0,h=u=a=null,o=s;do{var f=o.lane,p=o.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,x=o;switch(f=e,p=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){c=g.call(p,c,f);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(p,c,f):g,f==null)break e;c=ye({},c,f);break e;case 2:En=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,a=c):h=h.next=p,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xr|=l,t.lanes=l,t.memoizedState=c}}function rd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Fs={},on=tr(Fs),ys=tr(Fs),vs=tr(Fs);function hr(t){if(t===Fs)throw Error(M(174));return t}function wc(t,e){switch(le(vs,e),le(ys,t),le(on,Fs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xu(e,t)}he(on),le(on,e)}function oi(){he(on),he(ys),he(vs)}function gg(t){hr(vs.current);var e=hr(on.current),n=xu(e,t.type);e!==n&&(le(ys,t),le(on,n))}function kc(t){ys.current===t&&(he(on),he(ys))}var pe=tr(0);function co(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pa=[];function Sc(){for(var t=0;t<Pa.length;t++)Pa[t]._workInProgressVersionPrimary=null;Pa.length=0}var Il=Sn.ReactCurrentDispatcher,La=Sn.ReactCurrentBatchConfig,vr=0,ge=null,be=null,Te=null,fo=!1,Qi=!1,xs=0,Zx=0;function He(){throw Error(M(321))}function Cc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function bc(t,e,n,r,i,s){if(vr=s,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Il.current=t===null||t.memoizedState===null?rw:iw,t=n(r,i),Qi){s=0;do{if(Qi=!1,xs=0,25<=s)throw Error(M(301));s+=1,Te=be=null,e.updateQueue=null,Il.current=sw,t=n(r,i)}while(Qi)}if(Il.current=po,e=be!==null&&be.next!==null,vr=0,Te=be=ge=null,fo=!1,e)throw Error(M(300));return t}function Ac(){var t=xs!==0;return xs=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ge.memoizedState=Te=t:Te=Te.next=t,Te}function Ot(){if(be===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Te===null?ge.memoizedState:Te.next;if(e!==null)Te=e,be=t;else{if(t===null)throw Error(M(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Te===null?ge.memoizedState=Te=t:Te=Te.next=t}return Te}function ws(t,e){return typeof e=="function"?e(t):e}function Ra(t){var e=Ot(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var h=u.lane;if((vr&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=c,l=r):a=a.next=c,ge.lanes|=h,xr|=h}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Ht(r,e.memoizedState)||(it=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ge.lanes|=s,xr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ba(t){var e=Ot(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Ht(s,e.memoizedState)||(it=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yg(){}function vg(t,e){var n=ge,r=Ot(),i=e(),s=!Ht(r.memoizedState,i);if(s&&(r.memoizedState=i,it=!0),r=r.queue,Ec(kg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(n.flags|=2048,ks(9,wg.bind(null,n,r,i,e),void 0,null),Oe===null)throw Error(M(349));vr&30||xg(n,e,i)}return i}function xg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wg(t,e,n,r){e.value=n,e.getSnapshot=r,Sg(e)&&Cg(t)}function kg(t,e,n){return n(function(){Sg(e)&&Cg(t)})}function Sg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Cg(t){var e=xn(t,1);e!==null&&_t(e,t,1,-1)}function id(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:t},e.queue=t,t=t.dispatch=nw.bind(null,ge,t),[e.memoizedState,t]}function ks(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bg(){return Ot().memoizedState}function jl(t,e,n,r){var i=Zt();ge.flags|=t,i.memoizedState=ks(1|e,n,void 0,r===void 0?null:r)}function $o(t,e,n,r){var i=Ot();r=r===void 0?null:r;var s=void 0;if(be!==null){var l=be.memoizedState;if(s=l.destroy,r!==null&&Cc(r,l.deps)){i.memoizedState=ks(e,n,s,r);return}}ge.flags|=t,i.memoizedState=ks(1|e,n,s,r)}function sd(t,e){return jl(8390656,8,t,e)}function Ec(t,e){return $o(2048,8,t,e)}function Ag(t,e){return $o(4,2,t,e)}function Eg(t,e){return $o(4,4,t,e)}function Mg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tg(t,e,n){return n=n!=null?n.concat([t]):null,$o(4,4,Mg.bind(null,e,t),n)}function Mc(){}function Ng(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Og(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dg(t,e,n){return vr&21?(Ht(n,e)||(n=Im(),ge.lanes|=n,xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=n)}function ew(t,e){var n=re;re=n!==0&&4>n?n:4,t(!0);var r=La.transition;La.transition={};try{t(!1),e()}finally{re=n,La.transition=r}}function Pg(){return Ot().memoizedState}function tw(t,e,n){var r=Vn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lg(t))Rg(e,n);else if(n=pg(t,e,n,r),n!==null){var i=Xe();_t(n,t,r,i),Bg(n,e,r)}}function nw(t,e,n){var r=Vn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lg(t))Rg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Ht(o,l)){var a=e.interleaved;a===null?(i.next=i,vc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=pg(t,e,i,r),n!==null&&(i=Xe(),_t(n,t,r,i),Bg(n,e,r))}}function Lg(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function Rg(t,e){Qi=fo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ic(t,n)}}var po={readContext:Nt,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useInsertionEffect:He,useLayoutEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useMutableSource:He,useSyncExternalStore:He,useId:He,unstable_isNewReconciler:!1},rw={readContext:Nt,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:sd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jl(4194308,4,Mg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jl(4194308,4,t,e)},useInsertionEffect:function(t,e){return jl(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tw.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:id,useDebugValue:Mc,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=id(!1),e=t[0];return t=ew.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,i=Zt();if(fe){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Oe===null)throw Error(M(349));vr&30||xg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sd(kg.bind(null,r,s,t),[t]),r.flags|=2048,ks(9,wg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zt(),e=Oe.identifierPrefix;if(fe){var n=dn,r=fn;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iw={readContext:Nt,useCallback:Ng,useContext:Nt,useEffect:Ec,useImperativeHandle:Tg,useInsertionEffect:Ag,useLayoutEffect:Eg,useMemo:Og,useReducer:Ra,useRef:bg,useState:function(){return Ra(ws)},useDebugValue:Mc,useDeferredValue:function(t){var e=Ot();return Dg(e,be.memoizedState,t)},useTransition:function(){var t=Ra(ws)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Pg,unstable_isNewReconciler:!1},sw={readContext:Nt,useCallback:Ng,useContext:Nt,useEffect:Ec,useImperativeHandle:Tg,useInsertionEffect:Ag,useLayoutEffect:Eg,useMemo:Og,useReducer:Ba,useRef:bg,useState:function(){return Ba(ws)},useDebugValue:Mc,useDeferredValue:function(t){var e=Ot();return be===null?e.memoizedState=t:Dg(e,be.memoizedState,t)},useTransition:function(){var t=Ba(ws)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Pg,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _u(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ko={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xe(),i=Vn(t),s=pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(_t(e,t,i,r),Bl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xe(),i=Vn(t),s=pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(_t(e,t,i,r),Bl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xe(),r=Vn(t),i=pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hn(t,i,r),e!==null&&(_t(e,t,r,n),Bl(e,t,r))}};function ld(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!ds(n,r)||!ds(i,s):!0}function Ig(t,e,n){var r=!1,i=qn,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=lt(e)?gr:qe.current,r=e.contextTypes,s=(r=r!=null)?ii(t,i):qn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ko,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function od(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ko.enqueueReplaceState(e,e.state,null)}function Hu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},xc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=lt(e)?gr:qe.current,i.context=ii(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_u(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ko.enqueueReplaceState(i,i.state,null),ho(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ai(t,e){try{var n="",r=e;do n+=L1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ia(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lw=typeof WeakMap=="function"?WeakMap:Map;function jg(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){go||(go=!0,Xu=r),Wu(t,e)},n}function Fg(t,e,n){n=pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wu(t,e),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ad(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ww.bind(null,t,e,n),e.then(t,t))}function ud(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var ow=Sn.ReactCurrentOwner,it=!1;function Je(t,e,n,r){e.child=t===null?dg(e,null,n,r):li(e,t.child,n,r)}function cd(t,e,n,r,i){n=n.render;var s=e.ref;return Jr(e,i),r=bc(t,e,n,r,s,i),n=Ac(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(fe&&n&&fc(e),e.flags|=1,Je(t,e,r,i),e.child)}function fd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zg(t,e,s,r,i)):(t=Hl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:ds,n(l,r)&&t.ref===e.ref)return wn(t,e,i)}return e.flags|=1,t=Un(s,r),t.ref=e.ref,t.return=e,e.child=t}function zg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ds(s,r)&&t.ref===e.ref)if(it=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,wn(t,e,i)}return Vu(t,e,n,r,i)}function _g(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Vr,ct),ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(Vr,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,le(Vr,ct),ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,le(Vr,ct),ct|=r;return Je(t,e,i,n),e.child}function Hg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vu(t,e,n,r,i){var s=lt(n)?gr:qe.current;return s=ii(e,s),Jr(e,i),n=bc(t,e,n,r,s,i),r=Ac(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(fe&&r&&fc(e),e.flags|=1,Je(t,e,n,i),e.child)}function dd(t,e,n,r,i){if(lt(n)){var s=!0;so(e)}else s=!1;if(Jr(e,i),e.stateNode===null)Fl(t,e),Ig(e,n,r),Hu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Nt(u):(u=lt(n)?gr:qe.current,u=ii(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&od(e,l,r,u),En=!1;var f=e.memoizedState;l.state=f,ho(e,r,l,i),a=e.memoizedState,o!==r||f!==a||st.current||En?(typeof h=="function"&&(_u(e,n,h,r),a=e.memoizedState),(o=En||ld(e,n,o,r,f,a,u))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,mg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Bt(e.type,o),l.props=u,c=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Nt(a):(a=lt(n)?gr:qe.current,a=ii(e,a));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==c||f!==a)&&od(e,l,r,a),En=!1,f=e.memoizedState,l.state=f,ho(e,r,l,i);var g=e.memoizedState;o!==c||f!==g||st.current||En?(typeof p=="function"&&(_u(e,n,p,r),g=e.memoizedState),(u=En||ld(e,n,u,r,f,g,a)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Uu(t,e,n,r,s,i)}function Uu(t,e,n,r,i,s){Hg(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Xf(e,n,!1),wn(t,e,s);r=e.stateNode,ow.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=li(e,t.child,null,s),e.child=li(e,null,o,s)):Je(t,e,o,s),e.memoizedState=r.state,i&&Xf(e,n,!0),e.child}function Wg(t){var e=t.stateNode;e.pendingContext?Jf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jf(t,e.context,!1),wc(t,e.containerInfo)}function pd(t,e,n,r,i){return si(),pc(i),e.flags|=256,Je(t,e,n,r),e.child}var $u={dehydrated:null,treeContext:null,retryLane:0};function Ku(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vg(t,e,n){var r=e.pendingProps,i=pe.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),le(pe,i&1),t===null)return Fu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Qo(l,r,0,null),t=pr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ku(n),e.memoizedState=$u,t):Tc(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return aw(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Un(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Un(o,s):(s=pr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Ku(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=$u,r}return s=t.child,t=s.sibling,r=Un(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tc(t,e){return e=Qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ll(t,e,n,r){return r!==null&&pc(r),li(e,t.child,null,n),t=Tc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aw(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ia(Error(M(422))),ll(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qo({mode:"visible",children:r.children},i,0,null),s=pr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&li(e,t.child,null,l),e.child.memoizedState=Ku(l),e.memoizedState=$u,s);if(!(e.mode&1))return ll(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=Ia(s,r,void 0),ll(t,e,l,r)}if(o=(l&t.childLanes)!==0,it||o){if(r=Oe,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xn(t,i),_t(r,t,i,-1))}return Rc(),r=Ia(Error(M(421))),ll(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pt=_n(i.nextSibling),mt=e,fe=!0,jt=null,t!==null&&(kt[St++]=fn,kt[St++]=dn,kt[St++]=yr,fn=t.id,dn=t.overflow,yr=e),e=Tc(e,r.children),e.flags|=4096,e)}function md(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zu(t.return,e,n)}function ja(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ug(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Je(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&md(t,n,e);else if(t.tag===19)md(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&co(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ja(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&co(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ja(e,!0,n,null,s);break;case"together":ja(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uw(t,e,n){switch(e.tag){case 3:Wg(e),si();break;case 5:gg(e);break;case 1:lt(e.type)&&so(e);break;case 4:wc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;le(ao,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?Vg(t,e,n):(le(pe,pe.current&1),t=wn(t,e,n),t!==null?t.sibling:null);le(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ug(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),le(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,_g(t,e,n)}return wn(t,e,n)}var $g,qu,Kg,qg;$g=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qu=function(){};Kg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hr(on.current);var s=null;switch(n){case"input":i=mu(t,i),r=mu(t,r),s=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),s=[];break;case"textarea":i=vu(t,i),r=vu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ro)}wu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ls.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ls.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ae("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oi(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hw(t,e,n){var r=e.pendingProps;switch(dc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return lt(e.type)&&io(),We(e),null;case 3:return r=e.stateNode,oi(),he(st),he(qe),Sc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(th(jt),jt=null))),qu(t,e),We(e),null;case 5:kc(e);var i=hr(vs.current);if(n=e.type,t!==null&&e.stateNode!=null)Kg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return We(e),null}if(t=hr(on.current),il(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[en]=e,r[gs]=s,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(i=0;i<_i.length;i++)ae(_i[i],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":bf(r,s),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ae("invalid",r);break;case"textarea":Ef(r,s),ae("invalid",r)}wu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&rl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&rl(r.textContent,o,t),i=["children",""+o]):ls.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ae("scroll",r)}switch(n){case"input":Qs(r),Af(r,s,!0);break;case"textarea":Qs(r),Mf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ro)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=km(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[en]=e,t[gs]=r,$g(t,e,!1,!1),e.stateNode=t;e:{switch(l=ku(n,r),n){case"dialog":ae("cancel",t),ae("close",t),i=r;break;case"iframe":case"object":case"embed":ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<_i.length;i++)ae(_i[i],t);i=r;break;case"source":ae("error",t),i=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),i=r;break;case"details":ae("toggle",t),i=r;break;case"input":bf(t,r),i=mu(t,r),ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),ae("invalid",t);break;case"textarea":Ef(t,r),i=vu(t,r),ae("invalid",t);break;default:i=r}wu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?bm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Sm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&os(t,a):typeof a=="number"&&os(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ls.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ae("scroll",t):a!=null&&Xh(t,s,a,l))}switch(n){case"input":Qs(t),Af(t,r,!1);break;case"textarea":Qs(t),Mf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qr(t,!!r.multiple,s,!1):r.defaultValue!=null&&qr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)qg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=hr(vs.current),hr(on.current),il(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(s=r.nodeValue!==n)&&(t=mt,t!==null))switch(t.tag){case 3:rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return We(e),null;case 13:if(he(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&pt!==null&&e.mode&1&&!(e.flags&128))cg(),si(),e.flags|=98560,s=!1;else if(s=il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[en]=e}else si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),s=!1}else jt!==null&&(th(jt),jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Ae===0&&(Ae=3):Rc())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return oi(),qu(t,e),t===null&&ps(e.stateNode.containerInfo),We(e),null;case 10:return yc(e.type._context),We(e),null;case 17:return lt(e.type)&&io(),We(e),null;case 19:if(he(pe),s=e.memoizedState,s===null)return We(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Oi(s,!1);else{if(Ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=co(t),l!==null){for(e.flags|=128,Oi(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(pe,pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&we()>ui&&(e.flags|=128,r=!0,Oi(s,!1),e.lanes=4194304)}else{if(!r)if(t=co(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!fe)return We(e),null}else 2*we()-s.renderingStartTime>ui&&n!==1073741824&&(e.flags|=128,r=!0,Oi(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=we(),e.sibling=null,n=pe.current,le(pe,r?n&1|2:n&1),e):(We(e),null);case 22:case 23:return Lc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ct&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function cw(t,e){switch(dc(e),e.tag){case 1:return lt(e.type)&&io(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oi(),he(st),he(qe),Sc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kc(e),null;case 13:if(he(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(pe),null;case 4:return oi(),null;case 10:return yc(e.type._context),null;case 22:case 23:return Lc(),null;case 24:return null;default:return null}}var ol=!1,Ue=!1,fw=typeof WeakSet=="function"?WeakSet:Set,R=null;function Wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function Gu(t,e,n){try{n()}catch(r){ve(t,e,r)}}var gd=!1;function dw(t,e){if(Du=eo,t=Xm(),cc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,h=0,c=t,f=null;t:for(;;){for(var p;c!==n||i!==0&&c.nodeType!==3||(o=l+i),c!==s||r!==0&&c.nodeType!==3||(a=l+r),c.nodeType===3&&(l+=c.nodeValue.length),(p=c.firstChild)!==null;)f=c,c=p;for(;;){if(c===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++h===r&&(a=l),(p=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=p}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pu={focusedElem:t,selectionRange:n},eo=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:Bt(e.type,x),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){ve(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return g=gd,gd=!1,g}function Yi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gu(e,n,s)}i=i.next}while(i!==r)}}function qo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gg(t){var e=t.alternate;e!==null&&(t.alternate=null,Gg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[gs],delete e[Bu],delete e[Qx],delete e[Yx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qg(t){return t.tag===5||t.tag===3||t.tag===4}function yd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ro));else if(r!==4&&(t=t.child,t!==null))for(Yu(t,e,n),t=t.sibling;t!==null;)Yu(t,e,n),t=t.sibling}function Ju(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ju(t,e,n),t=t.sibling;t!==null;)Ju(t,e,n),t=t.sibling}var De=null,It=!1;function bn(t,e,n){for(n=n.child;n!==null;)Yg(t,e,n),n=n.sibling}function Yg(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(zo,n)}catch{}switch(n.tag){case 5:Ue||Wr(n,e);case 6:var r=De,i=It;De=null,bn(t,e,n),De=r,It=i,De!==null&&(It?(t=De,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(It?(t=De,n=n.stateNode,t.nodeType===8?Oa(t.parentNode,n):t.nodeType===1&&Oa(t,n),cs(t)):Oa(De,n.stateNode));break;case 4:r=De,i=It,De=n.stateNode.containerInfo,It=!0,bn(t,e,n),De=r,It=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Gu(n,e,l),i=i.next}while(i!==r)}bn(t,e,n);break;case 1:if(!Ue&&(Wr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ve(n,e,o)}bn(t,e,n);break;case 21:bn(t,e,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,bn(t,e,n),Ue=r):bn(t,e,n);break;default:bn(t,e,n)}}function vd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fw),e.forEach(function(r){var i=Sw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:De=o.stateNode,It=!1;break e;case 3:De=o.stateNode.containerInfo,It=!0;break e;case 4:De=o.stateNode.containerInfo,It=!0;break e}o=o.return}if(De===null)throw Error(M(160));Yg(s,l,i),De=null,It=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ve(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jg(e,t),e=e.sibling}function Jg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rt(e,t),Gt(t),r&4){try{Yi(3,t,t.return),qo(3,t)}catch(x){ve(t,t.return,x)}try{Yi(5,t,t.return)}catch(x){ve(t,t.return,x)}}break;case 1:Rt(e,t),Gt(t),r&512&&n!==null&&Wr(n,n.return);break;case 5:if(Rt(e,t),Gt(t),r&512&&n!==null&&Wr(n,n.return),t.flags&32){var i=t.stateNode;try{os(i,"")}catch(x){ve(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&xm(i,s),ku(o,l);var u=ku(o,s);for(l=0;l<a.length;l+=2){var h=a[l],c=a[l+1];h==="style"?bm(i,c):h==="dangerouslySetInnerHTML"?Sm(i,c):h==="children"?os(i,c):Xh(i,h,c,u)}switch(o){case"input":gu(i,s);break;case"textarea":wm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?qr(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?qr(i,!!s.multiple,s.defaultValue,!0):qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[gs]=s}catch(x){ve(t,t.return,x)}}break;case 6:if(Rt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){ve(t,t.return,x)}}break;case 3:if(Rt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cs(e.containerInfo)}catch(x){ve(t,t.return,x)}break;case 4:Rt(e,t),Gt(t);break;case 13:Rt(e,t),Gt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dc=we())),r&4&&vd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||h,Rt(e,t),Ue=u):Rt(e,t),Gt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(c=R=h;R!==null;){switch(f=R,p=f.child,f.tag){case 0:case 11:case 14:case 15:Yi(4,f,f.return);break;case 1:Wr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){ve(r,n,x)}}break;case 5:Wr(f,f.return);break;case 22:if(f.memoizedState!==null){wd(c);continue}}p!==null?(p.return=f,R=p):wd(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,a=c.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Cm("display",l))}catch(x){ve(t,t.return,x)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(x){ve(t,t.return,x)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Rt(e,t),Gt(t),r&4&&vd(t);break;case 21:break;default:Rt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qg(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(os(i,""),r.flags&=-33);var s=yd(t);Ju(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=yd(t);Yu(t,o,l);break;default:throw Error(M(161))}}catch(a){ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pw(t,e,n){R=t,Xg(t)}function Xg(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||ol;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ue;o=ol;var u=Ue;if(ol=l,(Ue=a)&&!u)for(R=i;R!==null;)l=R,a=l.child,l.tag===22&&l.memoizedState!==null?kd(i):a!==null?(a.return=l,R=a):kd(i);for(;s!==null;)R=s,Xg(s),s=s.sibling;R=i,ol=o,Ue=u}xd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):xd(t)}}function xd(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||qo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&cs(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ue||e.flags&512&&Qu(e)}catch(f){ve(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function wd(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function kd(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qo(4,e)}catch(a){ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ve(e,i,a)}}var s=e.return;try{Qu(e)}catch(a){ve(e,s,a)}break;case 5:var l=e.return;try{Qu(e)}catch(a){ve(e,l,a)}}}catch(a){ve(e,e.return,a)}if(e===t){R=null;break}var o=e.sibling;if(o!==null){o.return=e.return,R=o;break}R=e.return}}var mw=Math.ceil,mo=Sn.ReactCurrentDispatcher,Nc=Sn.ReactCurrentOwner,At=Sn.ReactCurrentBatchConfig,X=0,Oe=null,Ce=null,Fe=0,ct=0,Vr=tr(0),Ae=0,Ss=null,xr=0,Go=0,Oc=0,Ji=null,nt=null,Dc=0,ui=1/0,un=null,go=!1,Xu=null,Wn=null,al=!1,Ln=null,yo=0,Xi=0,Zu=null,zl=-1,_l=0;function Xe(){return X&6?we():zl!==-1?zl:zl=we()}function Vn(t){return t.mode&1?X&2&&Fe!==0?Fe&-Fe:Xx.transition!==null?(_l===0&&(_l=Im()),_l):(t=re,t!==0||(t=window.event,t=t===void 0?16:Vm(t.type)),t):1}function _t(t,e,n,r){if(50<Xi)throw Xi=0,Zu=null,Error(M(185));Bs(t,n,r),(!(X&2)||t!==Oe)&&(t===Oe&&(!(X&2)&&(Go|=n),Ae===4&&On(t,Fe)),ot(t,r),n===1&&X===0&&!(e.mode&1)&&(ui=we()+500,Uo&&nr()))}function ot(t,e){var n=t.callbackNode;X1(t,e);var r=Zl(t,t===Oe?Fe:0);if(r===0)n!==null&&Of(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Of(n),e===1)t.tag===0?Jx(Sd.bind(null,t)):ag(Sd.bind(null,t)),qx(function(){!(X&6)&&nr()}),n=null;else{switch(jm(r)){case 1:n=rc;break;case 4:n=Rm;break;case 16:n=Xl;break;case 536870912:n=Bm;break;default:n=Xl}n=l0(n,Zg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zg(t,e){if(zl=-1,_l=0,X&6)throw Error(M(327));var n=t.callbackNode;if(Xr()&&t.callbackNode!==n)return null;var r=Zl(t,t===Oe?Fe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vo(t,r);else{e=r;var i=X;X|=2;var s=t0();(Oe!==t||Fe!==e)&&(un=null,ui=we()+500,dr(t,e));do try{vw();break}catch(o){e0(t,o)}while(!0);gc(),mo.current=s,X=i,Ce!==null?e=0:(Oe=null,Fe=0,e=Ae)}if(e!==0){if(e===2&&(i=Eu(t),i!==0&&(r=i,e=eh(t,i))),e===1)throw n=Ss,dr(t,0),On(t,r),ot(t,we()),n;if(e===6)On(t,r);else{if(i=t.current.alternate,!(r&30)&&!gw(i)&&(e=vo(t,r),e===2&&(s=Eu(t),s!==0&&(r=s,e=eh(t,s))),e===1))throw n=Ss,dr(t,0),On(t,r),ot(t,we()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:lr(t,nt,un);break;case 3:if(On(t,r),(r&130023424)===r&&(e=Dc+500-we(),10<e)){if(Zl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ru(lr.bind(null,t,nt,un),e);break}lr(t,nt,un);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-zt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mw(r/1960))-r,10<r){t.timeoutHandle=Ru(lr.bind(null,t,nt,un),r);break}lr(t,nt,un);break;case 5:lr(t,nt,un);break;default:throw Error(M(329))}}}return ot(t,we()),t.callbackNode===n?Zg.bind(null,t):null}function eh(t,e){var n=Ji;return t.current.memoizedState.isDehydrated&&(dr(t,e).flags|=256),t=vo(t,e),t!==2&&(e=nt,nt=n,e!==null&&th(e)),t}function th(t){nt===null?nt=t:nt.push.apply(nt,t)}function gw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Oc,e&=~Go,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function Sd(t){if(X&6)throw Error(M(327));Xr();var e=Zl(t,0);if(!(e&1))return ot(t,we()),null;var n=vo(t,e);if(t.tag!==0&&n===2){var r=Eu(t);r!==0&&(e=r,n=eh(t,r))}if(n===1)throw n=Ss,dr(t,0),On(t,e),ot(t,we()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lr(t,nt,un),ot(t,we()),null}function Pc(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(ui=we()+500,Uo&&nr())}}function wr(t){Ln!==null&&Ln.tag===0&&!(X&6)&&Xr();var e=X;X|=1;var n=At.transition,r=re;try{if(At.transition=null,re=1,t)return t()}finally{re=r,At.transition=n,X=e,!(X&6)&&nr()}}function Lc(){ct=Vr.current,he(Vr)}function dr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kx(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(dc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&io();break;case 3:oi(),he(st),he(qe),Sc();break;case 5:kc(r);break;case 4:oi();break;case 13:he(pe);break;case 19:he(pe);break;case 10:yc(r.type._context);break;case 22:case 23:Lc()}n=n.return}if(Oe=t,Ce=t=Un(t.current,null),Fe=ct=e,Ae=0,Ss=null,Oc=Go=xr=0,nt=Ji=null,ur!==null){for(e=0;e<ur.length;e++)if(n=ur[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}ur=null}return t}function e0(t,e){do{var n=Ce;try{if(gc(),Il.current=po,fo){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fo=!1}if(vr=0,Te=be=ge=null,Qi=!1,xs=0,Nc.current=null,n===null||n.return===null){Ae=1,Ss=e,Ce=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=Fe,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ud(l);if(p!==null){p.flags&=-257,hd(p,l,o,s,e),p.mode&1&&ad(s,u,e),e=p,a=u;var g=e.updateQueue;if(g===null){var x=new Set;x.add(a),e.updateQueue=x}else g.add(a);break e}else{if(!(e&1)){ad(s,u,e),Rc();break e}a=Error(M(426))}}else if(fe&&o.mode&1){var w=ud(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),hd(w,l,o,s,e),pc(ai(a,o));break e}}s=a=ai(a,o),Ae!==4&&(Ae=2),Ji===null?Ji=[s]:Ji.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=jg(s,a,e);nd(s,m);break e;case 1:o=a;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wn===null||!Wn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Fg(s,o,e);nd(s,k);break e}}s=s.return}while(s!==null)}r0(n)}catch(C){e=C,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function t0(){var t=mo.current;return mo.current=po,t===null?po:t}function Rc(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Oe===null||!(xr&268435455)&&!(Go&268435455)||On(Oe,Fe)}function vo(t,e){var n=X;X|=2;var r=t0();(Oe!==t||Fe!==e)&&(un=null,dr(t,e));do try{yw();break}catch(i){e0(t,i)}while(!0);if(gc(),X=n,mo.current=r,Ce!==null)throw Error(M(261));return Oe=null,Fe=0,Ae}function yw(){for(;Ce!==null;)n0(Ce)}function vw(){for(;Ce!==null&&!V1();)n0(Ce)}function n0(t){var e=s0(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?r0(t):Ce=e,Nc.current=null}function r0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cw(n,e),n!==null){n.flags&=32767,Ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ae=6,Ce=null;return}}else if(n=hw(n,e,ct),n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);Ae===0&&(Ae=5)}function lr(t,e,n){var r=re,i=At.transition;try{At.transition=null,re=1,xw(t,e,n,r)}finally{At.transition=i,re=r}return null}function xw(t,e,n,r){do Xr();while(Ln!==null);if(X&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z1(t,s),t===Oe&&(Ce=Oe=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,l0(Xl,function(){return Xr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=At.transition,At.transition=null;var l=re;re=1;var o=X;X|=4,Nc.current=null,dw(t,n),Jg(n,t),zx(Pu),eo=!!Du,Pu=Du=null,t.current=n,pw(n),U1(),X=o,re=l,At.transition=s}else t.current=n;if(al&&(al=!1,Ln=t,yo=i),s=t.pendingLanes,s===0&&(Wn=null),q1(n.stateNode),ot(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(go)throw go=!1,t=Xu,Xu=null,t;return yo&1&&t.tag!==0&&Xr(),s=t.pendingLanes,s&1?t===Zu?Xi++:(Xi=0,Zu=t):Xi=0,nr(),null}function Xr(){if(Ln!==null){var t=jm(yo),e=At.transition,n=re;try{if(At.transition=null,re=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,yo=0,X&6)throw Error(M(331));var i=X;for(X|=4,R=t.current;R!==null;){var s=R,l=s.child;if(R.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Yi(8,h,s)}var c=h.child;if(c!==null)c.return=h,R=c;else for(;R!==null;){h=R;var f=h.sibling,p=h.return;if(Gg(h),h===u){R=null;break}if(f!==null){f.return=p,R=f;break}R=p}}}var g=s.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}R=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,R=l;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,R=m;break e}R=s.return}}var y=t.current;for(R=y;R!==null;){l=R;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,R=v;else e:for(l=y;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:qo(9,o)}}catch(C){ve(o,o.return,C)}if(o===l){R=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,R=k;break e}R=o.return}}if(X=i,nr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(zo,t)}catch{}r=!0}return r}finally{re=n,At.transition=e}}return!1}function Cd(t,e,n){e=ai(n,e),e=jg(t,e,1),t=Hn(t,e,1),e=Xe(),t!==null&&(Bs(t,1,e),ot(t,e))}function ve(t,e,n){if(t.tag===3)Cd(t,t,n);else for(;e!==null;){if(e.tag===3){Cd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){t=ai(n,t),t=Fg(e,t,1),e=Hn(e,t,1),t=Xe(),e!==null&&(Bs(e,1,t),ot(e,t));break}}e=e.return}}function ww(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xe(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&(Fe&n)===n&&(Ae===4||Ae===3&&(Fe&130023424)===Fe&&500>we()-Dc?dr(t,0):Oc|=n),ot(t,e)}function i0(t,e){e===0&&(t.mode&1?(e=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):e=1);var n=Xe();t=xn(t,e),t!==null&&(Bs(t,e,n),ot(t,n))}function kw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),i0(t,n)}function Sw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),i0(t,n)}var s0;s0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)it=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return it=!1,uw(t,e,n);it=!!(t.flags&131072)}else it=!1,fe&&e.flags&1048576&&ug(e,oo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var i=ii(e,qe.current);Jr(e,n),i=bc(null,e,r,t,i,n);var s=Ac();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(r)?(s=!0,so(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xc(e),i.updater=Ko,e.stateNode=i,i._reactInternals=e,Hu(e,r,t,n),e=Uu(null,e,r,!0,s,n)):(e.tag=0,fe&&s&&fc(e),Je(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bw(r),t=Bt(r,t),i){case 0:e=Vu(null,e,r,t,n);break e;case 1:e=dd(null,e,r,t,n);break e;case 11:e=cd(null,e,r,t,n);break e;case 14:e=fd(null,e,r,Bt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Vu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),dd(t,e,r,i,n);case 3:e:{if(Wg(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mg(t,e),ho(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ai(Error(M(423)),e),e=pd(t,e,r,n,i);break e}else if(r!==i){i=ai(Error(M(424)),e),e=pd(t,e,r,n,i);break e}else for(pt=_n(e.stateNode.containerInfo.firstChild),mt=e,fe=!0,jt=null,n=dg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(si(),r===i){e=wn(t,e,n);break e}Je(t,e,r,n)}e=e.child}return e;case 5:return gg(e),t===null&&Fu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Lu(r,i)?l=null:s!==null&&Lu(r,s)&&(e.flags|=32),Hg(t,e),Je(t,e,l,n),e.child;case 6:return t===null&&Fu(e),null;case 13:return Vg(t,e,n);case 4:return wc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=li(e,null,r,n):Je(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),cd(t,e,r,i,n);case 7:return Je(t,e,e.pendingProps,n),e.child;case 8:return Je(t,e,e.pendingProps.children,n),e.child;case 12:return Je(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,le(ao,r._currentValue),r._currentValue=l,s!==null)if(Ht(s.value,l)){if(s.children===i.children&&!st.current){e=wn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=pn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),zu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Je(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jr(e,n),i=Nt(i),r=r(i),e.flags|=1,Je(t,e,r,n),e.child;case 14:return r=e.type,i=Bt(r,e.pendingProps),i=Bt(r.type,i),fd(t,e,r,i,n);case 15:return zg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Fl(t,e),e.tag=1,lt(r)?(t=!0,so(e)):t=!1,Jr(e,n),Ig(e,r,i),Hu(e,r,i,n),Uu(null,e,r,!0,t,n);case 19:return Ug(t,e,n);case 22:return _g(t,e,n)}throw Error(M(156,e.tag))};function l0(t,e){return Lm(t,e)}function Cw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,r){return new Cw(t,e,n,r)}function Bc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bw(t){if(typeof t=="function")return Bc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ec)return 11;if(t===tc)return 14}return 2}function Un(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Bc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Lr:return pr(n.children,i,s,e);case Zh:l=8,i|=8;break;case cu:return t=bt(12,n,e,i|2),t.elementType=cu,t.lanes=s,t;case fu:return t=bt(13,n,e,i),t.elementType=fu,t.lanes=s,t;case du:return t=bt(19,n,e,i),t.elementType=du,t.lanes=s,t;case gm:return Qo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pm:l=10;break e;case mm:l=9;break e;case ec:l=11;break e;case tc:l=14;break e;case An:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=bt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pr(t,e,n,r){return t=bt(7,t,r,e),t.lanes=n,t}function Qo(t,e,n,r){return t=bt(22,t,r,e),t.elementType=gm,t.lanes=n,t.stateNode={isHidden:!1},t}function Fa(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function za(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Aw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xa(0),this.expirationTimes=xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ic(t,e,n,r,i,s,l,o,a){return t=new Aw(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xc(s),t}function Ew(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function o0(t){if(!t)return qn;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(lt(n))return og(t,n,e)}return e}function a0(t,e,n,r,i,s,l,o,a){return t=Ic(n,r,!0,t,i,s,l,o,a),t.context=o0(null),n=t.current,r=Xe(),i=Vn(n),s=pn(r,i),s.callback=e??null,Hn(n,s,i),t.current.lanes=i,Bs(t,i,r),ot(t,r),t}function Yo(t,e,n,r){var i=e.current,s=Xe(),l=Vn(i);return n=o0(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(i,e,l),t!==null&&(_t(t,i,l,s),Bl(t,i,l)),l}function xo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jc(t,e){bd(t,e),(t=t.alternate)&&bd(t,e)}function Mw(){return null}var u0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fc(t){this._internalRoot=t}Jo.prototype.render=Fc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Yo(t,e,null,null)};Jo.prototype.unmount=Fc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wr(function(){Yo(null,t,null,null)}),e[vn]=null}};function Jo(t){this._internalRoot=t}Jo.prototype.unstable_scheduleHydration=function(t){if(t){var e=_m();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nn.length&&e!==0&&e<Nn[n].priority;n++);Nn.splice(n,0,t),n===0&&Wm(t)}};function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function Tw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=xo(l);s.call(u)}}var l=a0(e,r,t,0,null,!1,!1,"",Ad);return t._reactRootContainer=l,t[vn]=l.current,ps(t.nodeType===8?t.parentNode:t),wr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=xo(a);o.call(u)}}var a=Ic(t,0,!1,null,null,!1,!1,"",Ad);return t._reactRootContainer=a,t[vn]=a.current,ps(t.nodeType===8?t.parentNode:t),wr(function(){Yo(e,a,n,r)}),a}function Zo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=xo(l);o.call(a)}}Yo(e,l,t,i)}else l=Tw(n,e,t,i,r);return xo(l)}Fm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zi(e.pendingLanes);n!==0&&(ic(e,n|1),ot(e,we()),!(X&6)&&(ui=we()+500,nr()))}break;case 13:wr(function(){var r=xn(t,1);if(r!==null){var i=Xe();_t(r,t,1,i)}}),jc(t,1)}};sc=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=Xe();_t(e,t,134217728,n)}jc(t,134217728)}};zm=function(t){if(t.tag===13){var e=Vn(t),n=xn(t,e);if(n!==null){var r=Xe();_t(n,t,e,r)}jc(t,e)}};_m=function(){return re};Hm=function(t,e){var n=re;try{return re=t,e()}finally{re=n}};Cu=function(t,e,n){switch(e){case"input":if(gu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vo(r);if(!i)throw Error(M(90));vm(r),gu(r,i)}}}break;case"textarea":wm(t,n);break;case"select":e=n.value,e!=null&&qr(t,!!n.multiple,e,!1)}};Mm=Pc;Tm=wr;var Nw={usingClientEntryPoint:!1,Events:[js,jr,Vo,Am,Em,Pc]},Di={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ow={bundleType:Di.bundleType,version:Di.version,rendererPackageName:Di.rendererPackageName,rendererConfig:Di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dm(t),t===null?null:t.stateNode},findFiberByHostInstance:Di.findFiberByHostInstance||Mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{zo=ul.inject(Ow),ln=ul}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nw;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zc(e))throw Error(M(200));return Ew(t,e,null,n)};xt.createRoot=function(t,e){if(!zc(t))throw Error(M(299));var n=!1,r="",i=u0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ic(t,1,!1,null,null,n,!1,r,i),t[vn]=e.current,ps(t.nodeType===8?t.parentNode:t),new Fc(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Dm(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return wr(t)};xt.hydrate=function(t,e,n){if(!Xo(e))throw Error(M(200));return Zo(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!zc(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=u0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=a0(e,null,t,1,n??null,i,!1,s,l),t[vn]=e.current,ps(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Jo(e)};xt.render=function(t,e,n){if(!Xo(e))throw Error(M(200));return Zo(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!Xo(t))throw Error(M(40));return t._reactRootContainer?(wr(function(){Zo(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};xt.unstable_batchedUpdates=Pc;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xo(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Zo(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function h0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h0)}catch(t){console.error(t)}}h0(),hm.exports=xt;var Dw=hm.exports,Ed=Dw;uu.createRoot=Ed.createRoot,uu.hydrateRoot=Ed.hydrateRoot;let nh=[],c0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?c0:nh).push(n=n+t[e])})();function Pw(t){if(t<768)return!1;for(let e=0,n=nh.length;;){let r=e+n>>1;if(t<nh[r])n=r;else if(t>=c0[r])e=r+1;else return!0;if(e==n)return!1}}function Md(t){return t>=127462&&t<=127487}const Td=8205;function Lw(t,e,n=!0,r=!0){return(n?f0:Rw)(t,e,r)}function f0(t,e,n){if(e==t.length)return e;e&&d0(t.charCodeAt(e))&&p0(t.charCodeAt(e-1))&&e--;let r=_a(t,e);for(e+=Nd(r);e<t.length;){let i=_a(t,e);if(r==Td||i==Td||n&&Pw(i))e+=Nd(i),r=i;else if(Md(i)){let s=0,l=e-2;for(;l>=0&&Md(_a(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function Rw(t,e,n){for(;e>0;){let r=f0(t,e-2,n);if(r<e)return r;e--}return 0}function _a(t,e){let n=t.charCodeAt(e);if(!p0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return d0(r)?(n-55296<<10)+(r-56320)+65536:n}function d0(t){return t>=56320&&t<57344}function p0(t){return t>=55296&&t<56320}function Nd(t){return t<65536?1:2}class J{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=hi(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),tn.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=hi(this,e,n);let r=[];return this.decompose(e,n,r,0),tn.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Zi(this),s=new Zi(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new Zi(this,e)}iterRange(e,n=this.length){return new m0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new g0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?J.empty:e.length<=32?new xe(e):tn.from(xe.split(e,[]))}}class xe extends J{constructor(e,n=Bw(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new Iw(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new xe(Od(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Wl(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new xe(o,l.length+s.length));else{let a=o.length>>1;r.push(new xe(o.slice(0,a)),new xe(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof xe))return super.replace(e,n,r);[e,n]=hi(this,e,n);let i=Wl(this.text,Wl(r.text,Od(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new xe(i,s):tn.from(xe.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=hi(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new xe(r,i)),r=[],i=-1);return i>-1&&n.push(new xe(r,i)),n}}class tn extends J{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=hi(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let h=this.children.slice();return h[i]=a,new tn(h,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=hi(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof tn))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let g of e)g.flatten(p);return new xe(p,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,h=[];function c(p){let g;if(p.lines>s&&p instanceof tn)for(let x of p.children)c(x);else p.lines>l&&(a>l||!a)?(f(),o.push(p)):p instanceof xe&&a&&(g=h[h.length-1])instanceof xe&&p.lines+g.lines<=32?(a+=p.lines,u+=p.length+1,h[h.length-1]=new xe(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>i&&f(),a+=p.lines,u+=p.length+1,h.push(p))}function f(){a!=0&&(o.push(h.length==1?h[0]:tn.from(h,u)),u=-1,a=h.length=0)}for(let p of e)c(p);return f(),o.length==1?o[0]:new tn(o,n)}}J.empty=new xe([""],0);function Bw(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Wl(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Od(t,e,n){return Wl(t,[""],e,n)}class Zi{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof xe?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof xe?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof xe){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof xe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class m0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Zi(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class g0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=function(){return this.iter()},Zi.prototype[Symbol.iterator]=m0.prototype[Symbol.iterator]=g0.prototype[Symbol.iterator]=function(){return this});class Iw{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function hi(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Ie(t,e,n=!0,r=!0){return Lw(t,e,n,r)}function jw(t){return t>=56320&&t<57344}function Fw(t){return t>=55296&&t<56320}function y0(t,e){let n=t.charCodeAt(e);if(!Fw(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return jw(r)?(n-55296<<10)+(r-56320)+65536:n}function zw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function v0(t){return t<65536?1:2}const rh=/\r\n?|\n/;var dt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(dt||(dt={}));class mn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){ih(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new mn(e)}composeDesc(e){return this.empty?e:e.empty?this:x0(this,e)}mapDesc(e,n=!1){return e.empty?this:sh(this,e,n)}mapPos(e,n=-1,r=dt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=dt.Simple&&u>=e&&(r==dt.TrackDel&&i<e&&u>e||r==dt.TrackBefore&&i<e||r==dt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mn(e)}static create(e){return new mn(e)}}class Ne extends mn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ih(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return sh(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(J.empty);r.push(l?e.slice(s,s+l):J.empty)}s+=l}return new Ne(n,r)}compose(e){return this.empty?e:e.empty?this:x0(this,e,!0)}map(e,n=!1){return e.empty?this:sh(this,e,n,!0)}iterChanges(e,n=!1){ih(this,e,n)}get desc(){return mn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Cs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-o);Ve(i,h,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;Ve(n,h,c),c>0&&Rn(r,n,s.text),s.forward(h),o+=h}let u=e[l++];for(;o<u;){if(s.done)break e;let h=Math.min(s.len,u-o);Ve(n,h,-1),Ve(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),o+=h}}return{changes:new Ne(n,r),filtered:mn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(h=!1){if(!h&&!i.length)return;l<n&&Ve(i,n-l,-1);let c=new Ne(i,s);o=o?o.compose(c.map(o)):c,i=[],s=[],l=0}function u(h){if(Array.isArray(h))for(let c of h)u(c);else if(h instanceof Ne){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);a(),o=o?o.compose(h.map(o)):h}else{let{from:c,to:f=c,insert:p}=h;if(c>f||c<0||f>n)throw new RangeError(`Invalid change range ${c} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?J.of(p.split(r||rh)):p:J.empty,x=g.length;if(c==f&&x==0)return;c<l&&a(),c>l&&Ve(i,c-l,-1),Ve(i,f-c,x),Rn(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Ne(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(J.empty);r[i]=J.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ne(n,r)}static createSet(e,n){return new Ne(e,n)}}function Ve(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Rn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(J.empty);t.push(n)}}function ih(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,h=s,c=J.empty;for(;u+=o,h+=a,a&&r&&(c=c.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,h,c),i=u,s=h}}}function sh(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Cs(t),o=new Cs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Ve(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Ve(i,o.ins,-1);u;){let h=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=h&&(Ve(i,0,l.ins),s&&Rn(s,i,l.text),a=l.i),l.forward(h),u-=h}o.next()}else if(l.ins>=0){let u=0,h=l.len;for(;h;)if(o.ins==-1){let c=Math.min(h,o.len);u+=c,h-=c,o.forward(c)}else if(o.ins==0&&o.len<h)h-=o.len,o.next();else break;Ve(i,u,a<l.i?l.ins:0),s&&a<l.i&&Rn(s,i,l.text),a=l.i,l.forward(l.len-h)}else{if(l.done&&o.done)return s?Ne.createSet(i,s):mn.create(i);throw new Error("Mismatched change set lengths")}}}function x0(t,e,n=!1){let r=[],i=n?[]:null,s=new Cs(t),l=new Cs(e);for(let o=!1;;){if(s.done&&l.done)return i?Ne.createSet(r,i):mn.create(r);if(s.ins==0)Ve(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ve(r,0,l.ins,o),i&&Rn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let h=l.ins==-1?-1:l.off?0:l.ins;Ve(r,a,h,o),i&&h&&Rn(i,r,l.text)}else l.ins==-1?(Ve(r,s.off?0:s.len,a,o),i&&Rn(i,r,s.textBit(a))):(Ve(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Rn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Cs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?J.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?J.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class cr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new cr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new cr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>cr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return cr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?cr.create(n,e,48|s):cr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function w0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let _c=0;class z{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=_c++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new z(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Hc),!!e.static,e.enables)}of(e){return new Vl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Hc(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Vl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=_c++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,h=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?u=!0:((n=e[c.id])!==null&&n!==void 0?n:1)&1||h.push(e[c.id]);return{create(c){return c.values[l]=r(c),1},update(c,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||lh(c,h)){let p=r(c);if(o?!Dd(p,c.values[l],i):!i(p,c.values[l]))return c.values[l]=p,1}return 0},reconfigure:(c,f)=>{let p,g=f.config.address[s];if(g!=null){let x=ko(f,g);if(this.dependencies.every(w=>w instanceof z?f.facet(w)===c.facet(w):w instanceof Ut?f.field(w,!1)==c.field(w,!1):!0)||(o?Dd(p=r(c),x,i):i(p=r(c),x)))return c.values[l]=x,0}else p=r(c);return c.values[l]=p,1}}}}function Dd(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function lh(t,e){let n=!1;for(let r of e)es(t,r)&1&&(n=!0);return n}function _w(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let h=0;h<r.length;h++){let c=ko(a,r[h]);if(i[h]==2)for(let f of c)u.push(f);else u.push(c)}return e.combine(u)}return{create(a){for(let u of r)es(a,u);return a.values[l]=o(a),1},update(a,u){if(!lh(a,s))return 0;let h=o(a);return e.compare(h,a.values[l])?0:(a.values[l]=h,1)},reconfigure(a,u){let h=lh(a,r),c=u.config.facets[e.id],f=u.facet(e);if(c&&!h&&Hc(n,c))return a.values[l]=f,0;let p=o(a);return e.compare(p,f)?(a.values[l]=f,0):(a.values[l]=p,1)}}}const hl=z.define({static:!0});class Ut{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Ut(_c++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(hl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(hl),l=i.facet(hl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,hl.of({field:this,create:e})]}get extension(){return this}}const or={lowest:4,low:3,default:2,high:1,highest:0};function Pi(t){return e=>new k0(e,t)}const ea={highest:Pi(or.highest),high:Pi(or.high),default:Pi(or.default),low:Pi(or.low),lowest:Pi(or.lowest)};class k0{constructor(e,n){this.inner=e,this.prec=n}}class ta{of(e){return new oh(this,e)}reconfigure(e){return ta.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class oh{constructor(e,n){this.compartment=e,this.inner=n}}class wo{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of Hw(e,n,l))f instanceof Ut?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(p=>f.slot(p));let h=r==null?void 0:r.config.facets;for(let f in s){let p=s[f],g=p[0].facet,x=h&&h[f]||[];if(p.every(w=>w.type==0))if(o[g.id]=a.length<<1|1,Hc(x,p))a.push(r.facet(g));else{let w=g.combine(p.map(m=>m.value));a.push(r&&g.compare(w,r.facet(g))?r.facet(g):w)}else{for(let w of p)w.type==0?(o[w.id]=a.length<<1|1,a.push(w.value)):(o[w.id]=u.length<<1,u.push(m=>w.dynamicSlot(m)));o[g.id]=u.length<<1,u.push(w=>_w(w,g,p))}}let c=u.map(f=>f(o));return new wo(e,l,c,o,a,s)}}function Hw(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof oh&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof oh){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof k0)s(l.inner,l.prec);else if(l instanceof Ut)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof Vl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,or.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,or.default),r.reduce((l,o)=>l.concat(o))}function es(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function ko(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const S0=z.define(),ah=z.define({combine:t=>t.some(e=>e),static:!0}),C0=z.define({combine:t=>t.length?t[0]:void 0,static:!0}),b0=z.define(),A0=z.define(),E0=z.define(),M0=z.define({combine:t=>t.length?t[0]:!1});class wi{constructor(e,n){this.type=e,this.value=n}static define(){return new Ww}}class Ww{of(e){return new wi(this,e)}}class Vw{constructor(e){this.map=e}of(e){return new oe(this,e)}}class oe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new oe(this.type,n)}is(e){return this.type==e}static define(e={}){return new Vw(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}oe.reconfigure=oe.define();oe.appendConfig=oe.define();class Ke{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&w0(r,n.newLength),s.some(o=>o.type==Ke.time)||(this.annotations=s.concat(Ke.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Ke(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ke.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ke.time=wi.define();Ke.userEvent=wi.define();Ke.addToHistory=wi.define();Ke.remote=wi.define();function Uw(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function T0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Ne.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:oe.mapEffects(t.effects,i).concat(oe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function uh(t,e,n){let r=e.selection,i=Zr(e.annotations);return e.userEvent&&(i=i.concat(Ke.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ne?e.changes:Ne.of(e.changes||[],n,t.facet(C0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:Zr(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function N0(t,e,n){let r=uh(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=T0(r,uh(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Ke.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Kw(n?$w(i):i)}function $w(t){let e=t.startState,n=!0;for(let i of e.facet(b0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Uw(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ne.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Ke.create(e,i,t.selection&&t.selection.map(s),oe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(A0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Ke?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ke?t=s[0]:t=N0(e,Zr(s),!1)}return t}function Kw(t){let e=t.startState,n=e.facet(E0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=T0(r,uh(e,s,t.changes.newLength),!0))}return r==t?t:Ke.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const qw=[];function Zr(t){return t==null?qw:Array.isArray(t)?t:[t]}var je=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(je||(je={}));const Gw=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let hh;try{hh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Qw(t){if(hh)return hh.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Gw.test(n)))return!0}return!1}function Yw(t){return e=>{if(!/\S/.test(e))return je.Space;if(Qw(e))return je.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return je.Word;return je.Other}}class Z{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)es(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return es(this,r),ko(this,r)}update(...e){return N0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(ta.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(oe.reconfigure)?(n=null,r=o.value):o.is(oe.appendConfig)&&(n=null,r=Zr(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=wo.resolve(r,i,this),s=new Z(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(ah)?e.newSelection:e.newSelection.asSingle();new Z(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=Zr(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),h=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(h);let c=i.mapDesc(u,!0);s.push(a.range.map(c)),i=i.compose(h),l=oe.mapEffects(l,h).concat(oe.mapEffects(Zr(a.effects),c))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Ne?e:Ne.of(e,this.doc.length,this.facet(Z.lineSeparator))}toText(e){return J.of(e.split(this.facet(Z.lineSeparator)||rh))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(es(this,n),ko(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ut&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return Z.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=wo.resolve(e.extensions||[],new Map),r=e.doc instanceof J?e.doc:J.of((e.doc||"").split(n.staticFacet(Z.lineSeparator)||rh)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return w0(i,r.length),n.staticFacet(ah)||(i=i.asSingle()),new Z(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(Z.tabSize)}get lineBreak(){return this.facet(Z.lineSeparator)||`
`}get readOnly(){return this.facet(M0)}phrase(e,...n){for(let r of this.facet(Z.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(S0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return Yw(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=Ie(n,l,!1);if(s(n.slice(a,l))!=je.Word)break;l=a}for(;o<i;){let a=Ie(n,o);if(s(n.slice(o,a))!=je.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}Z.allowMultipleSelections=ah;Z.tabSize=z.define({combine:t=>t.length?t[0]:4});Z.lineSeparator=C0;Z.readOnly=M0;Z.phrases=z.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Z.languageData=S0;Z.changeFilter=b0;Z.transactionFilter=A0;Z.transactionExtender=E0;ta.reconfigure=oe.define();function na(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class ci{eq(e){return this==e}range(e,n=e){return ch.create(e,n,this)}}ci.prototype.startSide=ci.prototype.endSide=0;ci.prototype.point=!1;ci.prototype.mapMode=dt.TrackDel;let ch=class O0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new O0(e,n,r)}};function fh(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Wc{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],h=this.from[a]+e,c=this.to[a]+e,f,p;if(h==c){let g=n.mapPos(h,u.startSide,u.mapMode);if(g==null||(f=p=g,u.startSide!=u.endSide&&(p=n.mapPos(h,u.endSide),p<f)))continue}else if(f=n.mapPos(h,u.startSide),p=n.mapPos(c,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,p-f)),r.push(u),i.push(f-l),s.push(p-l))}return{mapped:r.length?new Wc(i,s,r,o):null,pos:l}}}class ee{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ee(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(fh)),this.isEmpty)return n.length?ee.of(n):this;let o=new D0(this,null,-1).goto(0),a=0,u=[],h=new kr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let c=n[a++];h.addInner(c.from,c.to,c.value)||u.push(c)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||u.push(ch.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?ee.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:h,pos:c}=a.map(o,e);h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(c))}}let s=this.nextLayer.map(e);return n.length==0?s:new ee(r,n,s||ee.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return bs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return bs.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),o=n.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=Pd(l,o,r),u=new Li(l,a,s),h=new Li(o,a,s);r.iterGaps((c,f,p)=>Ld(u,c,h,f,p,i)),r.empty&&r.length==0&&Ld(u,0,h,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),l=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Pd(s,l),a=new Li(s,o,0).goto(r),u=new Li(l,o,0).goto(r);for(;;){if(a.to!=u.to||!dh(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Li(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let h=l.activeForPoint(l.to),c=l.pointFrom<n?h.length+1:l.point.startSide<0?h.length:Math.min(h.length,a);i.point(o,u,l.point,h,c,l.pointRank),a=Math.min(l.openEnd(u),h.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new kr;for(let i of e instanceof ch?[e]:n?Jw(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ee.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ee.empty;i=i.nextLayer)n=new ee(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ee.empty=new ee([],[],null,-1);function Jw(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(fh(e,r)>0)return t.slice().sort(fh);e=r}return t}ee.empty.nextLayer=ee.empty;class kr{finishChunk(e){this.chunks.push(new Wc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new kr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Pd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class D0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class bs{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new D0(l,n,r,s));return i.length==1?i[0]:new bs(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ha(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ha(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ha(this.heap,0)}}}function Ha(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Li{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=bs.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){cl(this.active,e),cl(this.activeTo,e),cl(this.activeRank,e),this.minActive=Rd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;fl(this.active,n,r),fl(this.activeTo,n,i),fl(this.activeRank,n,s),e&&fl(e,n,this.cursor.from),this.minActive=Rd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&cl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Ld(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,h=u||t.endSide-n.endSide,c=h<0?t.to+a:n.to,f=Math.min(c,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&dh(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!dh(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),c>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(c),o=c,h<=0&&t.next(),h>=0&&n.next()}}function dh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function cl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function fl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Rd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ra(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Ie(t,i));return r}function Xw(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Ie(t,i)}return t.length}const ph="",Bd=typeof Symbol>"u"?"__"+ph:Symbol.for(ph),mh=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Gn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let h=[],c=/^@(\w+)\b/.exec(l[0]),f=c&&c[1]=="keyframes";if(c&&o==null)return a.push(l[0]+";");for(let p in o){let g=o[p];if(/&/.test(p))s(p.split(/,\s*/).map(x=>l.map(w=>x.replace(/&/,w))).reduce((x,w)=>x.concat(w)),g,a);else if(g&&typeof g=="object"){if(!c)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),g,h,f)}else g!=null&&h.push(p.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+g+";")}(h.length||f)&&a.push((r&&!c&&!u?l.map(r):l).join(", ")+" {"+h.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Id[Bd]||1;return Id[Bd]=e+1,ph+e.toString(36)}static mount(e,n,r){let i=e[mh],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Zw(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let jd=new Map;class Zw{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=jd.get(r);if(s)return e[mh]=s;this.sheet=new i.CSSStyleSheet,jd.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[mh]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Qn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},As={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ek=typeof navigator<"u"&&/Mac/.test(navigator.platform),tk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Re=0;Re<10;Re++)Qn[48+Re]=Qn[96+Re]=String(Re);for(var Re=1;Re<=24;Re++)Qn[Re+111]="F"+Re;for(var Re=65;Re<=90;Re++)Qn[Re]=String.fromCharCode(Re+32),As[Re]=String.fromCharCode(Re);for(var Wa in Qn)As.hasOwnProperty(Wa)||(As[Wa]=Qn[Wa]);function nk(t){var e=ek&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||tk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?As:Qn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Pe(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)P0(t,arguments[e]);return t}function P0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)P0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Es(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function gh(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Ul(t,e){if(!e.anchorNode)return!1;try{return gh(t,e.anchorNode)}catch{return!1}}function Ms(t){return t.nodeType==3?Cr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ts(t,e,n,r){return n?Fd(t,e,n,r,-1)||Fd(t,e,n,r,1):!1}function Sr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function So(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Fd(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:an(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Sr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?an(t):0}else return!1}}function an(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ia(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function rk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function L0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function ik(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let h=t,c=!1;h&&!c;)if(h.nodeType==1){let f,p=h==a.body,g=1,x=1;if(p)f=rk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(c=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let y=h.getBoundingClientRect();({scaleX:g,scaleY:x}=L0(h,y)),f={left:y.left,right:y.left+h.clientWidth*g,top:y.top,bottom:y.top+h.clientHeight*x}}let w=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+l),n>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+l,n<0&&e.top-m<f.top&&(m=e.top-(f.top+l)));else{let y=e.bottom-e.top,v=f.bottom-f.top;m=(i=="center"&&y<=v?e.top+y/2-v/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-v+l)-f.top}if(r=="nearest"?e.left<f.left?(w=e.left-(f.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=e.left-(f.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||m)if(p)u.scrollBy(w,m);else{let y=0,v=0;if(m){let k=h.scrollTop;h.scrollTop+=m/x,v=(h.scrollTop-k)*x}if(w){let k=h.scrollLeft;h.scrollLeft+=w/g,y=(h.scrollLeft-k)*g}e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v},y&&Math.abs(y-w)<1&&(r="nearest"),v&&Math.abs(v-m)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function sk(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class lk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?an(n):0),r,Math.min(e.focusOffset,r?an(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Nr=null;function R0(t){if(t.setActive)return t.setActive();if(Nr)return t.focus(Nr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Nr==null?{get preventScroll(){return Nr={preventScroll:!0},!0}}:void 0),!Nr){Nr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let zd;function Cr(t,e,n=e){let r=zd||(zd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function ei(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function ok(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function B0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function ak(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,an(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=an(n))}else{if(n==t)return!0;r=Sr(n),n=n.parentNode}}function I0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function j0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=an(n)}else if(n.parentNode&&!So(n))r=Sr(n),n=n.parentNode;else return null}}function F0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!So(n))r=Sr(n)+1,n=n.parentNode;else return null}}class $e{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new $e(e.parentNode,Sr(e),n)}static after(e,n){return new $e(e.parentNode,Sr(e)+1,n)}}const Vc=[];class se{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=se.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=_d(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=_d(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=an(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!se.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,h=r;a<this.children.length;a++){let c=this.children[a],f=u+c.length;if(u<e&&f>n)return c.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&c.dom.parentNode==this.dom){l=a,o=h;break}h=f,u=f+c.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Vc){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new z0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}se.prototype.breakAfter=0;function _d(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class z0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function _0(t,e,n,r,i,s,l,o,a){let{children:u}=t,h=u.length?u[e]:null,c=s.length?s[s.length-1]:null,f=c?c.breakAfter:l;if(!(e==r&&h&&!l&&!f&&s.length<2&&h.merge(n,i,s.length?c:null,n==0,o,a))){if(r<u.length){let p=u[r];p&&(i<p.length||p.breakAfter&&(c!=null&&c.breakAfter))?(e==r&&(p=p.split(i),i=0),!f&&c&&p.merge(0,i,c,!0,0,a)?s[s.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),s.push(p))):p!=null&&p.breakAfter&&(c?c.breakAfter=1:l=1),r++}for(h&&(h.breakAfter=l,n>0&&(!l&&s.length&&h.merge(n,h.length,s[0],!1,o,0)?h.breakAfter=s.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function H0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:h}=l.findPos(e,-1),c=e-n;for(let f of r)c+=f.length;t.length+=c,_0(t,u,h,o,a,r,0,i,s)}let rt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},yh=typeof document<"u"?document:{documentElement:{style:{}}};const vh=/Edge\/(\d+)/.exec(rt.userAgent),W0=/MSIE \d/.test(rt.userAgent),xh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt.userAgent),sa=!!(W0||xh||vh),Hd=!sa&&/gecko\/(\d+)/i.test(rt.userAgent),Va=!sa&&/Chrome\/(\d+)/.exec(rt.userAgent),uk="webkitFontSmoothing"in yh.documentElement.style,V0=!sa&&/Apple Computer/.test(rt.vendor),Wd=V0&&(/Mobile\/\w+/.test(rt.userAgent)||rt.maxTouchPoints>2);var L={mac:Wd||/Mac/.test(rt.platform),windows:/Win/.test(rt.platform),linux:/Linux|X11/.test(rt.platform),ie:sa,ie_version:W0?yh.documentMode||6:xh?+xh[1]:vh?+vh[1]:0,gecko:Hd,gecko_version:Hd?+(/Firefox\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,chrome:!!Va,chrome_version:Va?+Va[1]:0,ios:Wd,android:/Android\b/.test(rt.userAgent),safari:V0,webkit_version:uk?+(/\bAppleWebKit\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,tabSize:yh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const hk=256;class Wt extends se{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Wt)||this.length-(n-e)+r.length>hk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Wt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new $e(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return ck(this.dom,e,n)}}class kn extends se{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(B0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof kn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(H0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new kn(this.mark,n,l)}domAtPos(e){return U0(this,e)}coordsAt(e,n){return K0(this,e,n)}}function ck(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?L.chrome||L.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Cr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return L.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ia(a,l<0):a||null}class fr extends se{static create(e,n,r){return new fr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=fr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof fr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof fr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return J.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):J.empty}domAtPos(e){return(this.length?e==0:this.side>0)?$e.before(this.dom):$e.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ia(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fi extends se{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof fi&&e.side==this.side}split(){return new fi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?$e.before(this.dom):$e.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return J.empty}get isHidden(){return!0}}Wt.prototype.children=fr.prototype.children=fi.prototype.children=Vc;function U0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new $e(n,0)}function $0(t,e,n){let r,{children:i}=t;n>0&&e instanceof kn&&i.length&&(r=i[i.length-1])instanceof kn&&r.mark.eq(e.mark)?$0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function K0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,h){for(let c=0,f=0;c<u.children.length&&f<=h;c++){let p=u.children[c],g=f+p.length;g>=h&&(p.children.length?o(p,h-f):(!s||s.isHidden&&(n>0||dk(s,p)))&&(g>h||f==g&&p.getSide()>0)?(s=p,l=h-f):(f<h||f==g&&p.getSide()<0&&!p.isHidden)&&(r=p,i=h-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):fk(t)}function fk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ms(e);return n[n.length-1]||null}function dk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function wh(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Vd=Object.create(null);function Co(t,e,n){if(t==e)return!0;t||(t=Vd),e||(e=Vd);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function kh(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function pk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class zs{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Et=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Et||(Et={}));class $ extends ci{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new _s(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Yn(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=q0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Yn(e,r,i,n,e.widget||null,!0)}static line(e){return new Hs(e)}static set(e,n=!1){return ee.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}$.none=ee.empty;class _s extends ${constructor(e){let{start:n,end:r}=q0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof _s&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Co(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}_s.prototype.point=!1;class Hs extends ${constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Hs&&this.spec.class==e.spec.class&&Co(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Hs.prototype.mapMode=dt.TrackBefore;Hs.prototype.point=!0;class Yn extends ${constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?dt.TrackBefore:dt.TrackAfter:dt.TrackDel}get type(){return this.startSide!=this.endSide?Et.WidgetRange:this.startSide<=0?Et.WidgetBefore:Et.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Yn&&mk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Yn.prototype.point=!0;function q0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function mk(t,e){return t==e||!!(t&&e&&t.compare(e))}function $l(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Se extends se{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Se))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),H0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Se;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Co(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){$0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=wh(n,this.attrs||{})),r&&(this.attrs=wh({class:r},this.attrs||{}))}domAtPos(e){return U0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(B0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(kh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&se.get(i)instanceof kn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=se.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!L.ios||!this.children.some(s=>s instanceof Wt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Wt)||/[^ -~]/.test(r.text))return null;let i=Ms(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=K0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Se&&this.children.length==0&&e.children.length==0&&Co(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Se)return s;if(l>n)break}i=l+s.breakAfter}return null}}class gn extends se{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof gn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?$e.before(this.dom):$e.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new gn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Vc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):J.empty}domBoundsAround(){return null}become(e){return e instanceof gn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Sh?null:ia(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Sh extends zs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ns{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Se),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(dl(new fi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof gn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(dl(new Wt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Yn){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Yn)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gn(r.widget||di.block,o,r));else{let a=fr.create(r.widget||di.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),h=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(dl(new fi(1),i),s),s=i.length+Math.max(0,s-i.length)),c.append(dl(a,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new ns(e,n,r,s);return l.openEnd=ee.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function dl(t,e){for(let n of e)t=new kn(n,[t],t.length);return t}class di extends zs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}di.inline=new di("span");di.block=new di("div");var Ee=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ee||(Ee={}));const br=Ee.LTR,Uc=Ee.RTL;function G0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const gk=G0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),yk=G0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ch=Object.create(null),Qt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Ch[e]=n,Ch[n]=-e}function Q0(t){return t<=247?gk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?yk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const vk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Bn{get dir(){return this.level%2?Uc:br}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function Y0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Y0(r.inner,i.inner))return!1}return!0}const ie=[];function xk(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,h=a,c=a;u<o;u++){let f=Q0(t.charCodeAt(u));f==512?f=h:f==8&&c==4&&(f=16),ie[u]=f==4?2:f,f&7&&(c=f),h=f}for(let u=l,h=a,c=a;u<o;u++){let f=ie[u];if(f==128)u<o-1&&h==ie[u+1]&&h&24?f=ie[u]=h:ie[u]=256;else if(f==64){let p=u+1;for(;p<o&&ie[p]==64;)p++;let g=u&&h==8||p<n&&ie[p]==8?c==1?1:8:256;for(let x=u;x<p;x++)ie[x]=g;u=p-1}else f==8&&c==1&&(ie[u]=1);h=f,f&7&&(c=f)}}}function wk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,h=l<r.length?r[l].from:n;for(let c=u,f,p,g;c<h;c++)if(p=Ch[f=t.charCodeAt(c)])if(p<0){for(let x=o-3;x>=0;x-=3)if(Qt[x+1]==-p){let w=Qt[x+2],m=w&2?i:w&4?w&1?s:i:0;m&&(ie[c]=ie[Qt[x]]=m),o=x;break}}else{if(Qt.length==189)break;Qt[o++]=c,Qt[o++]=f,Qt[o++]=a}else if((g=ie[c])==2||g==1){let x=g==i;a=x?0:1;for(let w=o-3;w>=0;w-=3){let m=Qt[w+2];if(m&2)break;if(x)Qt[w+2]|=2;else{if(m&4)break;Qt[w+2]|=4}}}}}function kk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=ie[a];if(u==256){let h=a+1;for(;;)if(h==o){if(i==n.length)break;h=n[i++].to,o=i<n.length?n[i].from:e}else if(ie[h]==256)h++;else break;let c=s==1,f=(h<e?ie[h]:r)==1,p=c==f?c?1:2:r;for(let g=h,x=i,w=x?n[x-1].to:t;g>a;)g==w&&(g=n[--x].from,w=x?n[x-1].to:t),ie[--g]=p;a=h}else s=u,a++}}}function bh(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let h=!0,c=!1;if(u==s.length||a<s[u].from){let x=ie[a];x!=o&&(h=!1,c=x==16)}let f=!h&&o==1?[]:null,p=h?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(c)break e;let x=s[u];if(!h)for(let w=x.to,m=u+1;;){if(w==n)break e;if(m<s.length&&s[m].from==w)w=s[m++].to;else{if(ie[w]==o)break e;break}}if(u++,f)f.push(x);else{x.from>a&&l.push(new Bn(a,x.from,p));let w=x.direction==br!=!(p%2);Ah(t,w?r+1:r,i,x.inner,x.from,x.to,l),a=x.to}g=x.to}else{if(g==n||(h?ie[g]!=o:ie[g]==o))break;g++}f?bh(t,a,g,r+1,i,f,l):a<g&&l.push(new Bn(a,g,p)),a=g}else for(let a=n,u=s.length;a>e;){let h=!0,c=!1;if(!u||a>s[u-1].to){let x=ie[a-1];x!=o&&(h=!1,c=x==16)}let f=!h&&o==1?[]:null,p=h?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(c)break e;let x=s[--u];if(!h)for(let w=x.from,m=u;;){if(w==e)break e;if(m&&s[m-1].to==w)w=s[--m].from;else{if(ie[w-1]==o)break e;break}}if(f)f.push(x);else{x.to<a&&l.push(new Bn(x.to,a,p));let w=x.direction==br!=!(p%2);Ah(t,w?r+1:r,i,x.inner,x.from,x.to,l),a=x.from}g=x.from}else{if(g==e||(h?ie[g-1]!=o:ie[g-1]==o))break;g--}f?bh(t,g,a,r+1,i,f,l):g<a&&l.push(new Bn(g,a,p)),a=g}}function Ah(t,e,n,r,i,s,l){let o=e%2?2:1;xk(t,i,s,r,o),wk(t,i,s,r,o),kk(i,s,r,o),bh(t,i,s,e,n,r,l)}function Sk(t,e,n){if(!t)return[new Bn(0,0,e==Uc?1:0)];if(e==br&&!n.length&&!vk.test(t))return J0(t.length);if(n.length)for(;t.length>ie.length;)ie[ie.length]=256;let r=[],i=e==br?0:1;return Ah(t,i,i,n,0,t.length,r),r}function J0(t){return[new Bn(0,t,0)]}let X0="";function Ck(t,e,n,r,i){var s;let l=r.head-t.from,o=Bn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let h=Ie(t.text,l,a.forward(i,n));(h<a.from||h>a.to)&&(h=u),X0=t.text.slice(Math.min(l,h),Math.max(l,h));let c=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return c&&h==u&&c.level+(i?0:1)<a.level?E.cursor(c.side(!i,n)+t.from,c.forward(i,n)?1:-1,c.level):E.cursor(h+t.from,a.forward(i,n)?-1:1,a.level)}function bk(t,e,n){for(let r=e;r<n;r++){let i=Q0(t.charCodeAt(r));if(i==1)return br;if(i==2||i==4)return Uc}return br}const Z0=z.define(),ey=z.define(),ty=z.define(),ny=z.define(),Eh=z.define(),ry=z.define(),iy=z.define(),$c=z.define(),Kc=z.define(),sy=z.define({combine:t=>t.some(e=>e)}),Ak=z.define({combine:t=>t.some(e=>e)}),ly=z.define();class ti{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new ti(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ti(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const pl=oe.define({map:(t,e)=>t.map(e)}),oy=oe.define();function rn(t,e,n){let r=t.facet(ny);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const cn=z.define({combine:t=>t.length?t[0]:!0});let Ek=0;const Ur=z.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class yt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Ur.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ur.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new yt(Ek++,e,r,i,o=>{let a=[];return l&&a.push(Ts.of(u=>{let h=u.plugin(o);return h?l(h):$.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return yt.define((r,i)=>new e(r,i),n)}}class Ua{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(rn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){rn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){rn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ay=z.define(),qc=z.define(),Ts=z.define(),uy=z.define(),Ws=z.define(),hy=z.define();function Ud(t,e){let n=t.state.facet(hy);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ee.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,h=l-e.from,c=i;for(let f=o.length-1;f>=0;f--,a--){let p=o[f].spec.bidiIsolate,g;if(p==null&&(p=bk(e.text,u,h)),a>0&&c.length&&(g=c[c.length-1]).to==u&&g.direction==p)g.to=h,c=g.inner;else{let x={from:u,to:h,direction:p,inner:[]};c.push(x),c=x.inner}}}}),i}const cy=z.define();function fy(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(cy)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Hi=z.define();class Mt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Mt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,h=a?a.fromB:1e9;for(;s<n.length&&n[s]<h;){let c=n[s],f=n[s+1],p=Math.max(o,c),g=Math.min(h,f);if(p<=g&&new Mt(p+u,g+u,p,g).addToSet(r),f>h)break;s+=2}if(!a)return r;new Mt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class bo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ne.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Mt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new bo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class $d extends se{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=$.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Se],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Mt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Lk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Tk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:h}=this.hasComposition;r=new Mt(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(L.ie||L.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Dk(l,o,e.changes);return r=Mt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=L.chrome||L.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof gn&&l.widget instanceof Sh&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:h,toB:c}=o,f,p,g,x;if(r&&r.range.fromB<c&&r.range.toB>h){let k=ns.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=ns.build(this.view.state.doc,r.range.toB,c,this.decorations,this.dynamicDecorationMap);p=k.breakAtStart,g=k.openStart,x=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),k.content.length&&A.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(A).concat(C.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:x}=ns.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap));let{i:w,off:m}=s.findPos(u,1),{i:y,off:v}=s.findPos(a,-1);_0(this,y,v,w,m,f,p,g,x)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(oy)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Wt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new kn(i,[n],n.length);let r=new Se;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=se.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(cn)||this.dom.tabIndex>-1)&&Ul(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(L.gecko&&o.empty&&!this.hasComposition&&Mk(a)){let c=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(c,a.node.childNodes[a.offset]||null)),a=u=new $e(c,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||(!ts(a.node,a.offset,h.anchorNode,h.anchorOffset)||!ts(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,o))&&(this.view.observer.ignore(()=>{L.android&&L.chrome&&this.dom.contains(h.focusNode)&&Pk(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=Es(this.view.root);if(c)if(o.empty){if(L.gecko){let f=Nk(a.node,a.offset);if(f&&f!=3){let p=(f==1?j0:F0)(a.node,a.offset);p&&(a=new $e(p.node,p.offset))}}c.collapse(a.node,a.offset),o.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=o.bidiLevel)}else if(c.extend){c.collapse(a.node,a.offset);try{c.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new $e(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new $e(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&ts(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Es(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Se.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let h=this.domAtPos(n.head+n.assoc);r.collapse(h.node,h.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=se.get(n.childNodes[i]);s instanceof Se&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=se.get(n.childNodes[i]);s instanceof Se&&(r=s.domAtPos(s.length))}return r?new $e(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=se.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Se)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Se&&!(r instanceof Se&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof gn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Se))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Wt))return null;let s=Ie(i.text,r);if(s==r)return null;let l=Cr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Ee.LTR;for(let u=0,h=0;h<this.children.length;h++){let c=this.children[h],f=u+c.length;if(f>i)break;if(u>=r){let p=c.dom.getBoundingClientRect();if(n.push(p.height),l){let g=c.dom.lastChild,x=g?Ms(g):[];if(x.length){let w=x[x.length-1],m=a?w.right-p.left:p.right-w.left;m>o&&(o=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ee.RTL:Ee.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Se){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ms(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new z0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push($.replace({widget:new Sh(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return $.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ts).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(uy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ee.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(ly))try{if(u(this.view,e.range,e))return!0}catch(h){rn(this.view.state,h,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=fy(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;ik(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ee.LTR)}}function Mk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function dy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=j0(n.focusNode,n.focusOffset),i=F0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=se.get(i.node);if(!o||o instanceof Wt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=se.get(r.node);!a||a instanceof Wt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Tk(t,e,n){let r=dy(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Mt(a.mapPos(s),a.mapPos(l),s,l),h=[];for(let c=i.parentNode;;c=c.parentNode){let f=se.get(c);if(f instanceof kn)h.push({node:c,deco:f.mark});else{if(f instanceof Se||c.nodeName=="DIV"&&c.parentNode==t.contentDOM)return{range:u,text:i,marks:h,line:c};if(c!=t.contentDOM)h.push({node:c,deco:new _s({inclusive:!0,attributes:pk(c),tagName:c.tagName.toLowerCase()})});else return null}}}function Nk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Ok=class{constructor(){this.changes=[]}compareRange(e,n){$l(e,n,this.changes)}comparePoint(e,n){$l(e,n,this.changes)}boundChange(e){$l(e,e,this.changes)}};function Dk(t,e,n){let r=new Ok;return ee.compare(t,e,n,r),r.changes}function Pk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Lk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Rk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=Ie(i.text,s,!1):o=Ie(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=Ie(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=Ie(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function Bk(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ik(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function $a(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Kd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function qd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Mh(t,e,n){let r,i,s,l,o=!1,a,u,h,c;for(let g=t.firstChild;g;g=g.nextSibling){let x=Ms(g);for(let w=0;w<x.length;w++){let m=x[w];i&&$a(i,m)&&(m=Kd(qd(m,i.bottom),i.top));let y=Bk(e,m),v=Ik(n,m);if(y==0&&v==0)return g.nodeType==3?Gd(g,e,n):Mh(g,e,n);(!r||l>v||l==v&&s>y)&&(r=g,i=m,s=y,l=v,o=y?e<m.left?w>0:w<x.length-1:!0),y==0?n>m.bottom&&(!h||h.bottom<m.bottom)?(a=g,h=m):n<m.top&&(!c||c.top>m.top)&&(u=g,c=m):h&&$a(h,m)?h=qd(h,m.bottom):c&&$a(c,m)&&(c=Kd(c,m.top))}}if(h&&h.bottom>=n?(r=a,i=h):c&&c.top<=n&&(r=u,i=c),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Gd(r,f,n);if(o&&r.contentEditable!="false")return Mh(r,f,n);let p=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:p}}function Gd(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Cr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(h.top==h.bottom)continue;l||(l=e-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<s){let f=e>=(h.left+h.right)/2,p=f;if((L.chrome||L.gecko)&&Cr(t,o).getBoundingClientRect().left==h.right&&(p=!f),c<=0)return{node:t,offset:o+(p?1:0)};i=o+(p?1:0),s=c}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function py(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:h,y:c}=e,f=c-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Et.Text;)for(;f=r>0?a.bottom+k:a.top-k,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}c=o+f;let p=a.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:Qd(t,l,a,h,c);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Qd(t,l,a,h,c);let g=t.dom.ownerDocument,x=t.root.elementFromPoint?t.root:g,w=x.elementFromPoint(h,c);w&&!t.contentDOM.contains(w)&&(w=null),w||(h=Math.max(l.left+1,Math.min(l.right-1,h)),w=x.elementFromPoint(h,c),w&&!t.contentDOM.contains(w)&&(w=null));let m,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let k=g.caretPositionFromPoint(h,c);k&&({offsetNode:m,offset:y}=k)}else if(g.caretRangeFromPoint){let k=g.caretRangeFromPoint(h,c);k&&({startContainer:m,startOffset:y}=k)}m&&(!t.contentDOM.contains(m)||L.safari&&jk(m,y,h)||L.chrome&&Fk(m,y,h))&&(m=void 0),m&&(y=Math.min(an(m),y))}if(!m||!t.docView.dom.contains(m)){let k=Se.find(t.docView,p);if(!k)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=Mh(k.dom,h,c))}let v=t.docView.nearest(m);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=v.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(m,y)+v.posAtStart}function Qd(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+Xw(l,s,t.state.tabSize)}function my(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Cr(t,r-1,r).getBoundingClientRect().right>n}function jk(t,e,n){return my(t,e,n)}function Fk(t,e,n){if(e!=0)return my(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Cr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function zk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Et.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function _k(t,e,n,r){let i=zk(t,e.head,e.assoc||-1),s=!r||i.type!=Et.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Ee.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function Yd(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Ck(i,s,l,o,n),h=X0;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;h=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(h))return o}else{if(!r)return u;a=r(h)}o=u}}function Hk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==je.Space&&(i=l),i==l}}function Wk(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),h=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let p=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-p.from))),o=(s<0?p.top:p.bottom)+h}let c=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=o+(f+p)*s,x=py(t,{x:c,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?x<i:x>i)){let w=t.docView.coordsForChar(x),m=!w||g<w.top?-1:1;return E.cursor(x,m,void 0,l)}}}function rs(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function gy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=rs(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=rs(t,i.from,-1),o=rs(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function Ka(t,e,n){let r=rs(t.state.facet(Ws).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const Wi="";class Vk{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Wi}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=se.get(i),a=se.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:So(i))||So(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=se.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Uk(e,r.node,r.offset)?n:0))}}function Uk(t,e,n){for(;;){if(!e||n<an(e))return!1;if(e==t)return!0;n=Sr(e)+1,e=e.parentNode}}class Jd{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class $k{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:Gk(e),a=new Vk(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Qk(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!gh(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!gh(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),h=e.viewport;if((L.ios||L.chrome)&&e.state.selection.main.empty&&a!=u&&(h.from>0||h.to<e.state.doc.length)){let c=Math.min(a,u),f=Math.max(a,u),p=h.from-c,g=h.to-f;(p==0||p==1||c==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function yy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||L.android&&e.text.length<o-l)&&(a=i.to,u="end");let h=qk(t.state.doc.sliceString(l,o,Wi),e.text,a-l,u);h&&(L.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Wi+Wi&&h.toB--,n={from:l+h.from,to:l+h.toA,insert:J.of(e.text.slice(h.from,h.toB).split(Wi))})}else r&&(!t.hasFocus&&t.state.facet(cn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(L.mac||L.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:J.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:L.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:J.of([" "])}),n)return Gc(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=gy(t.state.facet(Ws).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function Gc(t,e,n,r=-1){if(L.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(L.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ei(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&ei(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&ei(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=Kk(t,e,n));return t.state.facet(ry).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function Kk(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,h=rs(i.facet(Ws).map(c=>c(t)),u,a);e.from==h&&(l=h)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),c,f=n&&dy(t,n.main.head);if(f){let x=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-x}}else c=t.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;r=i.changeByRange(x=>{if(x.from==s.from&&x.to==s.to)return{changes:a,range:u||x.map(a)};let w=x.to-p,m=w-h.length;if(x.to-x.from!=g||t.state.sliceDoc(m,w)!=h||x.to>=c.from&&x.from<=c.to)return{range:x};let y=i.changes({from:m,to:w,insert:e.insert}),v=x.to-s.to;return{changes:y,range:u?E.range(Math.max(0,u.anchor+v),Math.max(0,u.head+v)):x.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function qk(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function Gk(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Jd(n,r)),(i!=n||s!=r)&&e.push(new Jd(i,s))),e}function Qk(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class Yk{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,L.safari&&e.contentDOM.addEventListener("input",()=>null),L.gecko&&fS(e.contentDOM.ownerDocument)}handleEvent(e){!iS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Jk(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&xy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),L.android&&L.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return L.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=vy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Xk.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ei(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:L.safari&&!L.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Xd(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){rn(n.state,i)}}}function Jk(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(Xd(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(Xd(r.value,a))}}for(let r in Vt)n(r).handlers.push(Vt[r]);for(let r in Dt)n(r).observers.push(Dt[r]);return e}const vy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Xk="dthko",xy=[16,17,18,20,91,92,224,225],ml=6;function gl(t){return Math.max(0,t)*.7+8}function Zk(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class eS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=sk(e.contentDOM),this.atoms=e.state.facet(Ws).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Z.allowMultipleSelections)&&tS(e,n),this.dragging=rS(e,n)&&Sy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Zk(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=fy(this.view);e.clientX-a.left<=i+ml?n=-gl(i-e.clientX):e.clientX+a.right>=l-ml&&(n=gl(e.clientX-l)),e.clientY-a.top<=s+ml?r=-gl(s-e.clientY):e.clientY+a.bottom>=o-ml&&(r=gl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=gy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function tS(t,e){let n=t.state.facet(Z0);return n.length?n[0](e):L.mac?e.metaKey:e.ctrlKey}function nS(t,e){let n=t.state.facet(ey);return n.length?n[0](e):L.mac?!e.altKey:!e.ctrlKey}function rS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Es(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function iS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=se.get(n))&&r.ignoreEvent(e))return!1;return!0}const Vt=Object.create(null),Dt=Object.create(null),wy=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;function sS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),ky(t,n.value)},50)}function la(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function ky(t,e){e=la(t.state,$c,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Th!=null&&n.selection.ranges.every(a=>a.empty)&&Th==s.toString()){let a=-1;r=n.changeByRange(u=>{let h=n.doc.lineAt(u.from);if(h.from==a)return{range:u};a=h.from;let c=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:c},range:E.cursor(u.from+c.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Dt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Vt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Dt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Dt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Vt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(ty))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=aS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new eS(t,e,n,r)),r&&t.observer.ignore(()=>{R0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Zd(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return Rk(t.state,e,n);{let i=Se.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let ep=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function lS(t,e,n,r){let i=Se.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&ep(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&ep(n,r,o)?1:l&&l.bottom>=r?-1:1}function tp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:lS(t,n,e.clientX,e.clientY)}}const oS=L.ie&&L.ie_version<=11;let np=null,rp=0,ip=0;function Sy(t){if(!oS)return t.detail;let e=np,n=ip;return np=t,ip=Date.now(),rp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(rp+1)%3:1}function aS(t,e){let n=tp(t,e),r=Sy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=tp(t,s),u,h=Zd(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let c=Zd(t,n.pos,n.bias,r),f=Math.min(c.from,h.from),p=Math.max(c.to,h.to);h=f<h.from?E.range(f,p):E.range(p,f)}return l?i.replaceRange(i.main.extend(h.from,h.to)):o&&r==1&&i.ranges.length>1&&(u=uS(i,a.pos))?u:o?i.addRange(h):E.create([h])}}}function uS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Vt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",la(t.state,Kc,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Vt.dragend=t=>(t.inputState.draggedContent=null,!1);function sp(t,e,n,r){if(n=la(t.state,$c,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&nS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Vt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&sp(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return sp(t,e,r,!0),!0}return!1};Vt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=wy?null:e.clipboardData;return n?(ky(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(sS(t),!1)};function hS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function cS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:la(t,Kc,e.join(t.lineBreak)),ranges:n,linewise:r}}let Th=null;Vt.copy=Vt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=cS(t.state);if(!n&&!i)return!1;Th=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=wy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(hS(t,n),!1)};const Cy=wi.define();function by(t,e){let n=[];for(let r of t.facet(iy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Cy.of(!0)}):null}function Ay(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=by(t.state,e);n?t.dispatch(n):t.update([])}},10)}Dt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ay(t)};Dt.blur=t=>{t.observer.clearSelectionRange(),Ay(t)};Dt.compositionstart=Dt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Dt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,L.chrome&&L.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Dt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Vt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return Gc(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(L.chrome&&L.android&&(i=vy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return L.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),L.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Dt.compositionend(t,e),20),!1};const lp=new Set;function fS(t){lp.has(t)||(lp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const op=["pre-wrap","normal","pre-line","break-spaces"];let pi=!1;function ap(){pi=!1}class dS{constructor(e){this.lineWrapping=e,this.doc=J.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return op.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=op.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let h=l[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class pS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class nn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Et.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Yn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new nn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ue=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ue||(ue={}));const Kl=.001;class Ze{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Kl&&(pi=!0),this.height=e)}replace(e,n,r){return Ze.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:h,toB:c}=i[o],f=s.lineAt(a,ue.ByPosNoHeight,r.setDoc(n),0,0),p=f.to>=u?f:s.lineAt(u,ue.ByPosNoHeight,r,0,0);for(c+=p.to-u,u=p.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ue.ByPosNoHeight,r,0,0));h+=f.from-a,a=f.from;let g=Qc.build(r.setDoc(l),e,h,c);s=Ao(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new ft(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new mS(Ze.of(e.slice(0,n)),l,Ze.of(e.slice(r)))}}function Ao(t,e){return t==e?t:(t.constructor!=e.constructor&&(pi=!0),e)}Ze.prototype.size=1;class Ey extends Ze{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new nn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ft extends Ey{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new nn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ft||i instanceof Le&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Le?i=new ft(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ze.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Le extends Ze{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=n.doc.lineAt(u),c=o+h.length*a,f=Math.max(r,e-c/2);return new nn(h.from,h.length,f,c,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:h,length:c}=n.doc.line(s+u);return new nn(h,c,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ue.ByHeight)return this.blockAt(e,r,i,s);if(n==ue.ByPosNoHeight){let{from:p,to:g}=r.doc.lineAt(e);return new nn(p,g-p,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),h=o+u.length*a,c=u.number-l,f=i+o*c+a*(u.from-s-c);return new nn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let h=e,c=i;h<=n;){let f=r.doc.lineAt(h);if(h==e){let g=f.number-o;c+=a*g+u*(e-s-g)}let p=a+u*f.length;l(new nn(f.from,f.length,c,p,0)),c+=p,h=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Le?r[r.length-1]=new Le(s.length+i):r.push(null,new Le(i-1))}if(e>0){let s=r[0];s instanceof Le?r[0]=new Le(e+s.length):r.unshift(new Le(e-1),null)}return Ze.of(r)}decomposeLeft(e,n){n.push(new Le(e-1),null)}decomposeRight(e,n){n.push(null,new Le(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Le(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let h=e.doc.lineAt(o).length;l.length&&l.push(null);let c=i.heights[i.index++];a==-1?a=c:Math.abs(c-a)>=Kl&&(a=-2);let f=new ft(h,c);f.outdated=!1,l.push(f),o+=h+1}o<=s&&l.push(null,new Le(s-o).updateHeight(e,o));let u=Ze.of(l);return(a<0||Math.abs(u.height-this.height)>=Kl||Math.abs(a-this.heightMetrics(e,n).perLine)>=Kl)&&(pi=!0),Ao(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class mS extends Ze{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ue.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let h=n==ue.ByPosNoHeight?ue.ByPosNoHeight:ue.ByPos;return a?u.join(this.right.lineAt(o,h,r,l,o)):this.left.lineAt(o,h,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ue.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&up(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),up(s,o)}return Ze.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ze.of(this.break?[e,null,n]:[e,n]):(this.left=Ao(this.left,e),this.right=Ao(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function up(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Le&&(r=t[e+1])instanceof Le&&t.splice(e-1,3,new Le(n.length+1+r.length))}const gS=5;class Qc{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ft?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ft(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Ey(l,i,r)):(l||s||i>=gS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ft(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Le(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ft)return e;let n=new ft(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ft)&&!this.isCovered?this.nodes.push(new ft(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ft&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Qc(r,e);return ee.spans(n,r,i,s,0),s.finish(r)}}function yS(t,e,n){let r=new vS;return ee.compare(t,e,n,r,0),r.changes}class vS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&$l(e,n,this.changes,5)}}function xS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let h=u,c=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&c.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=c.position=="absolute"||c.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function wS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function kS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class qa{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return $.replace({widget:new SS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class SS extends zs{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class hp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=cp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ee.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(qc).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new dS(n),this.stateDeco=e.facet(Ts).filter(r=>typeof r!="function"),this.heightMap=Ze.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle.setDoc(e.doc),[new Mt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=$.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new yl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?cp:new Yc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Vi(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Ts).filter(h=>typeof h!="function");let i=e.changedRanges,s=Mt.extendWithRanges(i,yS(r,this.stateDeco,e?e.changes:Ne.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);ap(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||pi)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ak)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ee.RTL:Ee.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,h=0;if(o.width&&o.height){let{scaleX:k,scaleY:C}=L0(n,o);(k>.005&&Math.abs(this.scaleX-k)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=k,this.scaleY=C,u|=16,l=a=!0)}let c=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=f)&&(this.paddingTop=c,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=I0(e.scrollDOM);let g=(this.printing?kS:xS)(n,this.paddingTop),x=g.top-this.pixelViewport.top,w=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!wS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,y/A),k),l&&(e.docView.minWidth=0,u|=16)}x>0&&w>0?h=Math.max(x,w):x<0&&w<0&&(h=Math.min(x,w)),ap();for(let C of this.viewports){let A=C.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?Ze.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle,[new Mt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new pS(C.from,A))}pi&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new yl(i.lineAt(l-r*1e3,ue.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ue.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,ue.ByPos,s,0,0),f;n.y=="center"?f=(c.top+c.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=c.top:f=c.bottom-h,a=new yl(i.lineAt(f-1e3/2,ue.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,ue.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new yl(this.heightMap.lineAt(r,ue.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ue.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ue.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ue.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new qa(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Ee.LTR&&!r)return[];let o=[],a=(h,c,f,p)=>{if(c-h<s)return;let g=this.state.selection.main,x=[g.from];g.empty||x.push(g.to);for(let m of x)if(m>h&&m<c){a(h,m-10,f,p),a(m+10,c,f,p);return}let w=bS(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-h)<s&&Math.abs(m.to-c)<s&&!x.some(y=>m.from<y&&m.to>y));if(!w){if(c<f.to&&n&&r&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(E.cursor(c),!1,!0).head;v>h&&(c=v)}let m=this.gapSize(f,h,c,p),y=r||m<2e6?m:2e6;w=new qa(h,c,m,y)}o.push(w)},u=h=>{if(h.length<l||h.type!=Et.Text)return;let c=CS(h.from,h.to,this.stateDeco);if(c.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(r){let x=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,m;if(f!=null){let y=xl(c,f),v=((this.visibleBottom-this.visibleTop)/2+x)/h.height;w=y-v,m=y+v}else w=(this.visibleTop-h.top-x)/h.height,m=(this.visibleBottom-h.top+x)/h.height;p=vl(c,w),g=vl(c,m)}else{let x=c.total*this.heightOracle.charWidth,w=i*this.heightOracle.charWidth,m=0;if(x>2e6)for(let A of e)A.from>=h.from&&A.from<h.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=A.size-A.displaySize);let y=this.pixelViewport.left+m,v=this.pixelViewport.right+m,k,C;if(f!=null){let A=xl(c,f),b=((v-y)/2+w)/x;k=A-b,C=A+b}else k=(y-w)/x,C=(v+w)/x;p=vl(c,k),g=vl(c,C)}p>h.from&&a(h.from,p,h,c),g<h.to&&a(g,h.to,h,c)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(u):u(h);return o}gapSize(e,n,r,i){let s=xl(i,r)-xl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){qa.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=$.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ee.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Vi(this.heightMap.lineAt(e,ue.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Vi(this.heightMap.lineAt(this.scaler.fromDOM(e),ue.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Vi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yl{constructor(e,n){this.from=e,this.to=n}}function CS(t,e,n){let r=[],i=t,s=0;return ee.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function vl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function xl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function bS(t,e){for(let n of t)if(e(n))return n}const cp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Yc{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ue.ByPos,e,0,0).top,h=n.lineAt(a,ue.ByPos,e,0,0).bottom;return i+=h-u,{from:o,to:a,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Yc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Vi(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new nn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Vi(i,e)):t._content)}const wl=z.define({combine:t=>t.join(" ")}),Nh=z.define({combine:t=>t.indexOf(!0)>-1}),Oh=Gn.newName(),My=Gn.newName(),Ty=Gn.newName(),Ny={"&light":"."+My,"&dark":"."+Ty};function Dh(t,e,n){return new Gn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const AS=Dh("."+Oh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ny),ES={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ga=L.ie&&L.ie_version<=11;class MS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new lk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(L.ie&&L.ie_version<=11||L.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&L.android&&e.constructor.EDIT_CONTEXT!==!1&&!(L.chrome&&L.chrome_version<126)&&(this.editContext=new NS(e),e.state.facet(cn)&&(e.contentDOM.editContext=this.editContext.editContext)),Ga&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(cn)?r.root.activeElement!=this.dom:!Ul(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(L.ie&&L.ie_version<=11||L.android&&L.chrome)&&!r.state.selection.main.empty&&i.focusNode&&ts(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Es(e.root);if(!n)return!1;let r=L.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&TS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Ul(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ak(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ES),Ga&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ga&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ei(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Ul(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new $k(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=yy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=fp(n,e.previousSibling||e.target.previousSibling,-1),i=fp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(cn)!=e.state.facet(cn)&&(e.view.contentDOM.editContext=e.state.facet(cn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function fp(t,e,n){for(;e;){let r=se.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function dp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return ts(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function TS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return dp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?dp(t,n):null}class NS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:J.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let h=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((L.mac||L.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:J.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let h=this.to-this.from+(u.to-u.from+u.insert.length);Gc(e,u,E.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let h=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push($.mark({attributes:{style:h}}).range(a,u))}}}e.dispatch({effects:oy.of($.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Es(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let h=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=h}n+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class j{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ok(e.parent)||document,this.viewState=new hp(e.state||Z.create(e)),e.scrollTo&&e.scrollTo.is(pl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ur).map(i=>new Ua(i));for(let i of this.plugins)i.update(this);this.observer=new MS(this),this.inputState=new Yk(this),this.inputState.ensureHandlers(this.plugins),this.docView=new $d(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ke?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(Cy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=by(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Z.phrases)!=this.state.facet(Z.phrases))return this.setState(s);i=bo.create(this,s,e),i.flags|=o;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(c&&(c=c.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;c=new ti(p.empty?p:E.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(pl)&&(c=p.value.clip(this.state))}this.viewState.update(i,c),this.bidiCache=Eo.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Hi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(wl)!=i.state.facet(wl)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Eh))try{f(i)}catch(p){rn(this.state,p,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!yy(this,h)&&u.force&&ei(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new hp(e),this.plugins=e.facet(Ur).map(r=>new Ua(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new $d(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ur),r=e.state.facet(Ur);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new Ua(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){rn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(I0(r))s=-1,l=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);s=p.from,l=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(p=>{try{return p.read(this)}catch(g){return rn(this.state,g),pp}}),c=bo.create(this,this.state,[]),f=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),f=this.docView.update(c),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(h[p]!=pp)try{let g=u[p];g.write&&g.write(h[p],this)}catch(g){rn(this.state,g)}if(f&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Eh))o(n)}get themeClasses(){return Oh+" "+(this.state.facet(Nh)?Ty:My)+" "+this.state.facet(wl)}updateAttrs(){let e=mp(this,ay,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(cn)?"true":"false",class:"cm-content",style:`${L.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),mp(this,qc,n);let r=this.observer.ignore(()=>{let i=kh(this.contentDOM,this.contentAttrs,n),s=kh(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(j.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Hi);let e=this.state.facet(j.cspNonce);Gn.mount(this.root,this.styleModules.concat(AS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Ka(this,e,Yd(this,e,n,r))}moveByGroup(e,n){return Ka(this,e,Yd(this,e,n,r=>Hk(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return _k(this,e,n,r)}moveVertically(e,n,r){return Ka(this,e,Wk(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),py(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Bn.find(s,e-i.from,-1,n)];return ia(r,l.dir==Ee.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(sy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>OS)return J0(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Y0(s.isolates,r=Ud(this,e))))return s.order;r||(r=Ud(this,e));let i=Sk(e.text,n,r);return this.bidiCache.push(new Eo(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||L.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{R0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return pl.of(new ti(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return pl.of(new ti(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return yt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return yt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Gn.newName(),i=[wl.of(r),Hi.of(Dh(`.${r}`,e))];return n&&n.dark&&i.push(Nh.of(!0)),i}static baseTheme(e){return ea.lowest(Hi.of(Dh("."+Oh,e,Ny)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&se.get(r)||se.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}j.styleModule=Hi;j.inputHandler=ry;j.clipboardInputFilter=$c;j.clipboardOutputFilter=Kc;j.scrollHandler=ly;j.focusChangeEffect=iy;j.perLineTextDirection=sy;j.exceptionSink=ny;j.updateListener=Eh;j.editable=cn;j.mouseSelectionStyle=ty;j.dragMovesSelection=ey;j.clickAddsSelectionRange=Z0;j.decorations=Ts;j.outerDecorations=uy;j.atomicRanges=Ws;j.bidiIsolatedRanges=hy;j.scrollMargins=cy;j.darkTheme=Nh;j.cspNonce=z.define({combine:t=>t.length?t[0]:""});j.contentAttributes=qc;j.editorAttributes=ay;j.lineWrapping=j.contentAttributes.of({class:"cm-lineWrapping"});j.announce=oe.define();const OS=4096,pp={};class Eo{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Ee.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Eo(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function mp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&wh(l,n)}return n}const DS=L.mac?"mac":L.windows?"win":L.linux?"linux":"key";function PS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function kl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const LS=ea.default(j.domEventHandlers({keydown(t,e){return Py(Dy(e.state),t,e,"editor")}})),Oy=z.define({enables:LS}),gp=new WeakMap;function Dy(t){let e=t.facet(Oy),n=gp.get(e);return n||gp.set(e,n=IS(e.reduce((r,i)=>r.concat(i),[]))),n}function RS(t,e,n){return Py(Dy(t.state),e,t,n)}let Dn=null;const BS=4e3;function IS(t,e=DS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,h)=>{var c,f;let p=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(m=>PS(m,e));for(let m=1;m<g.length;m++){let y=g.slice(0,m).join(" ");i(y,!0),p[y]||(p[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let k=Dn={view:v,prefix:y,scope:l};return setTimeout(()=>{Dn==k&&(Dn=null)},BS),!0}]})}let x=g.join(" ");i(x,!1);let w=p[x]||(p[x]={preventDefault:!1,stopPropagation:!1,run:((f=(c=p._any)===null||c===void 0?void 0:c.run)===null||f===void 0?void 0:f.slice())||[]});a&&w.run.push(a),u&&(w.preventDefault=!0),h&&(w.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let h=n[u]||(n[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=l;for(let f in h)h[f].run.push(p=>c(p,Ph))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Ph=null;function Py(t,e,n,r){Ph=e;let i=nk(e),s=y0(i,0),l=v0(s)==i.length&&i!=" ",o="",a=!1,u=!1,h=!1;Dn&&Dn.view==n&&Dn.scope==r&&(o=Dn.prefix+" ",xy.indexOf(e.keyCode)<0&&(u=!0,Dn=null));let c=new Set,f=w=>{if(w){for(let m of w.run)if(!c.has(m)&&(c.add(m),m(n)))return w.stopPropagation&&(h=!0),!0;w.preventDefault&&(w.stopPropagation&&(h=!0),u=!0)}return!1},p=t[r],g,x;return p&&(f(p[o+kl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(L.windows&&e.ctrlKey&&e.altKey)&&!(L.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=Qn[e.keyCode])&&g!=i?(f(p[o+kl(g,e,!0)])||e.shiftKey&&(x=As[e.keyCode])!=i&&x!=g&&f(p[o+kl(x,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(p[o+kl(i,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&h&&e.stopPropagation(),Ph=null,a}function jS(){return zS}const FS=$.line({class:"cm-activeLine"}),zS=yt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(FS.range(i.from)),e=i.from)}return $.set(n)}},{decorations:t=>t.decorations}),yp=z.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Mo(t,e){let n=t.plugin(Ly),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Ly=yt.fromClass(class{constructor(t){this.input=t.state.facet(To),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(yp);this.top=new Sl(t,!0,e.topContainer),this.bottom=new Sl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(yp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Sl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Sl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(To);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),h;u<0?(h=a(t.view),o.push(h)):(h=this.panels[u],h.update&&h.update(t)),i.push(h),(h.top?s:l).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Sl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=vp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=vp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function vp(t){let e=t.nextSibling;return t.remove(),e}const To=z.define({enables:Ly});class Jn extends ci{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Jn.prototype.elementClass="";Jn.prototype.toDOM=void 0;Jn.prototype.mapMode=dt.TrackBefore;Jn.prototype.startSide=Jn.prototype.endSide=-1;Jn.prototype.point=!0;const Qa=z.define(),_S=z.define(),HS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ee.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},is=z.define();function WS(t){return[Ry(),is.of({...HS,...t})]}const xp=z.define({combine:t=>t.some(e=>e)});function Ry(t){return[VS]}const VS=yt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(is).map(e=>new kp(t,e)),this.fixed=!t.state.facet(xp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(xp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ee.iter(this.view.state.facet(Qa),this.view.viewport.from),r=[],i=this.gutters.map(s=>new US(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Et.Text&&l){Lh(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Et.Text){Lh(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(is),n=t.state.facet(is),r=t.docChanged||t.heightChanged||t.viewportChanged||!ee.eq(t.startState.facet(Qa),t.state.facet(Qa),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new kp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ee.LTR?{left:r,right:i}:{right:r,left:i}})});function wp(t){return Array.isArray(t)?t:[t]}function Lh(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class US{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ee.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new By(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Lh(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(_S)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class kp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=wp(n.markers(e)),n.initialSpacer&&(this.spacer=new By(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=wp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ee.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class By{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),$S(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let h=a.elementClass;h&&(r+=" "+h);for(let c=l;c<this.markers.length;c++)if(this.markers[c].compare(a)){o=c,u=!0;break}}else o=this.markers.length;for(;l<o;){let h=this.markers[l++];if(h.toDOM){h.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function $S(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const KS=z.define(),qS=z.define(),$r=z.define({combine(t){return na(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class Ya extends Jn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ja(t,e){return t.state.facet($r).formatNumber(e,t.state)}const GS=is.compute([$r],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(KS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Ya(Ja(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(qS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet($r)!=e.state.facet($r),initialSpacer(e){return new Ya(Ja(e,Sp(e.state.doc.lines)))},updateSpacer(e,n){let r=Ja(n.view,Sp(n.view.state.doc.lines));return r==e.number?e:new Ya(r)},domEventHandlers:t.facet($r).domEventHandlers,side:"before"}));function QS(t={}){return[$r.of(t),Ry(),GS]}function Sp(t){let e=9;for(;e<t;)e=e*10+9;return e}const YS=1024;let JS=0;class Xa{constructor(e,n){this.from=e,this.to=n}}class Y{constructor(e={}){this.id=JS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=at.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Y.closedBy=new Y({deserialize:t=>t.split(" ")});Y.openedBy=new Y({deserialize:t=>t.split(" ")});Y.group=new Y({deserialize:t=>t.split(" ")});Y.isolate=new Y({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Y.contextHash=new Y({perNode:!0});Y.lookAhead=new Y({perNode:!0});Y.mounted=new Y({perNode:!0});class No{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Y.mounted.id]}}const XS=Object.create(null);class at{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):XS,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new at(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Y.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Y.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}at.none=new at("",Object.create(null),0,8);class Jc{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new at(r.name,i,r.id,r.flags):r)}return new Jc(n)}}const Cl=new WeakMap,Cp=new WeakMap;var Be;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Be||(Be={}));class me{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=No.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Bh(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Cl.get(this)||this.topNode,s=new Bh(i);return s.moveTo(e,n),Cl.set(this,s._tree),s}get topNode(){return new Tt(this,0,0,null)}resolve(e,n=0){let r=Ns(Cl.get(this)||this.topNode,e,n,!1);return Cl.set(this,r),r}resolveInner(e,n=0){let r=Ns(Cp.get(this)||this.topNode,e,n,!0);return Cp.set(this,r),r}resolveStack(e,n=0){return tC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Be.IncludeAnonymous)>0;for(let a=this.cursor(l|Be.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:ef(at.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new me(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new me(at.none,n,r,i)))}static build(e){return nC(e)}}me.empty=new me(at.none,[],[],0);class Xc{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Xc(this.buffer,this.index)}}class Xn{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return at.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(Iy(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new Xn(s,l,this.set)}}function Iy(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ns(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Tt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Be.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Tt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class jy{cursor(e=0){return new Bh(this,e)}getChild(e,n=null,r=null){let i=bp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return bp(this,e,n,r)}resolve(e,n=0){return Ns(this,e,n,!1)}resolveInner(e,n=0){return Ns(this,e,n,!0)}matchContext(e){return Rh(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Tt extends jy{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let h=o[e],c=a[e]+l.from;if(Iy(i,r,c,c+h.length)){if(h instanceof Xn){if(s&Be.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,n,r-c,i);if(f>-1)return new In(new ZS(l,h,e,c),null,f)}else if(s&Be.IncludeAnonymous||!h.type.isAnonymous||Zc(h)){let f;if(!(s&Be.IgnoreMounts)&&(f=No.get(h))&&!f.overlay)return new Tt(f.tree,c,e,l);let p=new Tt(h,c,e,l);return s&Be.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(s&Be.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Be.IgnoreOverlays)&&(i=No.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Tt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function bp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Rh(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class ZS{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class In extends jy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new In(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Be.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new In(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new In(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new In(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new me(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Fy(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Tt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new eC(i,n)}class eC{constructor(e,n){this.heads=e,this.node=n}get next(){return Fy(this.heads)}}function tC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Tt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=No.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Tt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ns(o,e,n,!1))}}return i?Fy(i):r}class Bh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Tt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Be.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Be.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Be.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Be.IncludeAnonymous||o instanceof Xn||!o.type.isAnonymous||Zc(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new In(this.buffer,n,this.stack[i]);return this.bufferNode=new In(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Rh(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Rh(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function Zc(t){return t.children.some(e=>e instanceof Xn||!e.type.isAnonymous||Zc(e))}function nC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=YS,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new Xc(n,n.length):n,a=r.types,u=0,h=0;function c(C,A,b,N,V,B){let{id:_,start:H,end:K,size:P}=o,ce=h,te=u;for(;P<0;)if(o.next(),P==-1){let G=s[_];b.push(G),N.push(H-C);return}else if(P==-3){u=_;return}else if(P==-4){h=_;return}else throw new RangeError(`Unrecognized record size: ${P}`);let Qe=a[_],D,W,F=H-C;if(K-H<=i&&(W=w(o.pos-A,V))){let G=new Uint16Array(W.size-W.skip),q=o.pos-W.size,ke=G.length;for(;o.pos>q;)ke=m(W.start,G,ke);D=new Xn(G,K-W.start,r),F=W.start-C}else{let G=o.pos-P;o.next();let q=[],ke=[],ne=_>=l?_:-1,ut=0,Me=K;for(;o.pos>G;)ne>=0&&o.id==ne&&o.size>=0?(o.end<=Me-i&&(g(q,ke,H,ut,o.end,Me,ne,ce,te),ut=q.length,Me=o.end),o.next()):B>2500?f(H,G,q,ke):c(H,G,q,ke,ne,B+1);if(ne>=0&&ut>0&&ut<q.length&&g(q,ke,H,ut,H,Me,ne,ce,te),q.reverse(),ke.reverse(),ne>-1&&ut>0){let Ye=p(Qe,te);D=ef(Qe,q,ke,0,q.length,0,K-H,Ye,Ye)}else D=x(Qe,q,ke,K-H,ce-K,te)}b.push(D),N.push(F)}function f(C,A,b,N){let V=[],B=0,_=-1;for(;o.pos>A;){let{id:H,start:K,end:P,size:ce}=o;if(ce>4)o.next();else{if(_>-1&&K<_)break;_<0&&(_=P-i),V.push(H,K,P),B++,o.next()}}if(B){let H=new Uint16Array(B*4),K=V[V.length-2];for(let P=V.length-3,ce=0;P>=0;P-=3)H[ce++]=V[P],H[ce++]=V[P+1]-K,H[ce++]=V[P+2]-K,H[ce++]=ce;b.push(new Xn(H,V[2]-K,r)),N.push(K-C)}}function p(C,A){return(b,N,V)=>{let B=0,_=b.length-1,H,K;if(_>=0&&(H=b[_])instanceof me){if(!_&&H.type==C&&H.length==V)return H;(K=H.prop(Y.lookAhead))&&(B=N[_]+H.length+K)}return x(C,b,N,V,B,A)}}function g(C,A,b,N,V,B,_,H,K){let P=[],ce=[];for(;C.length>N;)P.push(C.pop()),ce.push(A.pop()+b-V);C.push(x(r.types[_],P,ce,B-V,H-B,K)),A.push(V-b)}function x(C,A,b,N,V,B,_){if(B){let H=[Y.contextHash,B];_=_?[H].concat(_):[H]}if(V>25){let H=[Y.lookAhead,V];_=_?[H].concat(_):[H]}return new me(C,A,b,N,_)}function w(C,A){let b=o.fork(),N=0,V=0,B=0,_=b.end-i,H={size:0,start:0,skip:0};e:for(let K=b.pos-C;b.pos>K;){let P=b.size;if(b.id==A&&P>=0){H.size=N,H.start=V,H.skip=B,B+=4,N+=4,b.next();continue}let ce=b.pos-P;if(P<0||ce<K||b.start<_)break;let te=b.id>=l?4:0,Qe=b.start;for(b.next();b.pos>ce;){if(b.size<0)if(b.size==-3)te+=4;else break e;else b.id>=l&&(te+=4);b.next()}V=Qe,N+=P,B+=te}return(A<0||N==C)&&(H.size=N,H.start=V,H.skip=B),H.size>4?H:void 0}function m(C,A,b){let{id:N,start:V,end:B,size:_}=o;if(o.next(),_>=0&&N<l){let H=b;if(_>4){let K=o.pos-(_-4);for(;o.pos>K;)b=m(C,A,b)}A[--b]=H,A[--b]=B-C,A[--b]=V-C,A[--b]=N}else _==-3?u=N:_==-4&&(h=N);return b}let y=[],v=[];for(;o.pos>0;)c(t.start||0,t.bufferStart||0,y,v,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:y.length?v[0]+y[0].length:0;return new me(a[t.topID],y.reverse(),v.reverse(),k)}const Ap=new WeakMap;function ql(t,e){if(!t.isAnonymous||e instanceof Xn||e.type!=t)return 1;let n=Ap.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof me)){n=1;break}n+=ql(t,r)}Ap.set(e,n)}return n}function ef(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=ql(t,e[g]);let h=Math.ceil(u*1.5/8),c=[],f=[];function p(g,x,w,m,y){for(let v=w;v<m;){let k=v,C=x[v],A=ql(t,g[v]);for(v++;v<m;v++){let b=ql(t,g[v]);if(A+b>=h)break;A+=b}if(v==k+1){if(A>h){let b=g[k];p(b.children,b.positions,0,b.children.length,x[k]+y);continue}c.push(g[k])}else{let b=x[v-1]+g[v-1].length-C;c.push(ef(t,g,x,k,v,C,b,null,a))}f.push(C+y-s)}}return p(e,n,r,i,0),(o||a)(c,f,l)}class mr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new mr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let h=o<n.length?n[o]:null,c=h?h.fromA:1e9;if(c-a>=r)for(;l&&l.from<c;){let f=l;if(a>=f.from||c<=f.to||u){let p=Math.max(f.from,a)-u,g=Math.min(f.to,c)-u;f=p>=g?null:new mr(p,g,f.tree,f.offset+u,o>0,!!h)}if(f&&i.push(f),l.to>c)break;l=s<e.length?e[s++]:null}if(!h)break;a=h.toA,u=h.toA-h.toB}return i}}class zy{startParse(e,n,r){return typeof e=="string"&&(e=new rC(e)),r=r?r.length?r.map(i=>new Xa(i.from,i.to)):[new Xa(0,0)]:[new Xa(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class rC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Y({perNode:!0});let iC=0;class Ct{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=iC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Ct&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Ct(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Oo(e);return r=>r.modified.indexOf(n)>-1?r:Oo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let sC=0;class Oo{constructor(e){this.name=e,this.instances=[],this.id=sC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&lC(n,o.modified));if(r)return r;let i=[],s=new Ct(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=oC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Oo.get(o,a));return s}}function lC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function oC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function aC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let c=0;;){if(o=="..."&&c>0&&c+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),c+=f[0].length,c==i.length)break;let p=i[c++];if(c==i.length&&p=="!"){l=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);o=i.slice(c)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let h=new Do(r,l,a>0?s.slice(0,a):null);e[u]=h.sort(e[u])}}return _y.add(e)}const _y=new Y;class Do{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Do.empty=new Do([],2,null);function Hy(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function uC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function hC(t,e,n,r=0,i=t.length){let s=new cC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class cC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(l)));let u=i,h=fC(e)||Do.empty,c=uC(s,h.tags);if(c&&(u&&(u+=" "),u+=c,h.mode==1&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(n,o),u),h.opaque)return;let f=e.tree&&e.tree.prop(Y.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),x=e.firstChild();for(let w=0,m=o;;w++){let y=w<f.overlay.length?f.overlay[w]:null,v=y?y.from+o:a,k=Math.max(n,m),C=Math.min(r,v);if(k<C&&x)for(;e.from<C&&(this.highlightRange(e,k,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=v||!e.nextSibling())););if(!y||v>r)break;m=y.to+o,m>n&&(this.highlightRange(p.cursor(),Math.max(n,y.from+o),Math.min(r,m),"",g),this.startSpan(Math.min(r,m),u))}x&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function fC(t){let e=t.type.prop(_y);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Ct.define,bl=O(),Mn=O(),Ep=O(Mn),Mp=O(Mn),Tn=O(),Al=O(Tn),Za=O(Tn),Xt=O(),ir=O(Xt),Yt=O(),Jt=O(),Ih=O(),Ri=O(Ih),El=O(),T={comment:bl,lineComment:O(bl),blockComment:O(bl),docComment:O(bl),name:Mn,variableName:O(Mn),typeName:Ep,tagName:O(Ep),propertyName:Mp,attributeName:O(Mp),className:O(Mn),labelName:O(Mn),namespace:O(Mn),macroName:O(Mn),literal:Tn,string:Al,docString:O(Al),character:O(Al),attributeValue:O(Al),number:Za,integer:O(Za),float:O(Za),bool:O(Tn),regexp:O(Tn),escape:O(Tn),color:O(Tn),url:O(Tn),keyword:Yt,self:O(Yt),null:O(Yt),atom:O(Yt),unit:O(Yt),modifier:O(Yt),operatorKeyword:O(Yt),controlKeyword:O(Yt),definitionKeyword:O(Yt),moduleKeyword:O(Yt),operator:Jt,derefOperator:O(Jt),arithmeticOperator:O(Jt),logicOperator:O(Jt),bitwiseOperator:O(Jt),compareOperator:O(Jt),updateOperator:O(Jt),definitionOperator:O(Jt),typeOperator:O(Jt),controlOperator:O(Jt),punctuation:Ih,separator:O(Ih),bracket:Ri,angleBracket:O(Ri),squareBracket:O(Ri),paren:O(Ri),brace:O(Ri),content:Xt,heading:ir,heading1:O(ir),heading2:O(ir),heading3:O(ir),heading4:O(ir),heading5:O(ir),heading6:O(ir),contentSeparator:O(Xt),list:O(Xt),quote:O(Xt),emphasis:O(Xt),strong:O(Xt),link:O(Xt),monospace:O(Xt),strikethrough:O(Xt),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:El,documentMeta:O(El),annotation:O(El),processingInstruction:O(El),definition:Ct.defineModifier("definition"),constant:Ct.defineModifier("constant"),function:Ct.defineModifier("function"),standard:Ct.defineModifier("standard"),local:Ct.defineModifier("local"),special:Ct.defineModifier("special")};for(let t in T){let e=T[t];e instanceof Ct&&(e.name=t)}Hy([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}]);var eu;const Kr=new Y;function dC(t){return z.define({combine:t?e=>e.concat(t):void 0})}const pC=new Y;class Ft{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Z.prototype.hasOwnProperty("tree")||Object.defineProperty(Z.prototype,"tree",{get(){return vt(this)}}),this.parser=n,this.extension=[Zn.of(this),Z.languageData.of((s,l,o)=>{let a=Tp(s,l,o),u=a.type.prop(Kr);if(!u)return[];let h=s.facet(u),c=a.type.prop(pC);if(c){let f=a.resolve(l-a.from,o);for(let p of c)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(h)}}return h})].concat(r)}isActiveAt(e,n,r=-1){return Tp(e,n,r).type.prop(Kr)==this.data}findRegions(e){let n=e.facet(Zn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(Kr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(Y.mounted);if(o){if(o.tree.prop(Kr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof me&&i(u,s.positions[a]+l)}};return i(vt(e),0),r}get allowsNesting(){return!0}}Ft.setState=oe.define();function Tp(t,e,n){let r=t.facet(Zn),i=vt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Be.ExcludeBuffers))s.type.isTop&&(i=s);return i}function vt(t){let e=t.field(Ft.state,!1);return e?e.tree:me.empty}class mC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Bi=null;class mi{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new mi(e,n,[],me.empty,0,r,[],null)}startParse(){return this.parser.startParse(new mC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=me.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(mr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(mr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Bi;Bi=this;try{return e()}finally{Bi=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Np(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,h,c,f)=>a.push({fromA:u,toA:h,fromB:c,toB:f})),r=mr.applyChanges(r,a),i=me.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);h<c&&o.push({from:h,to:c})}}}return new mi(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Np(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends zy{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Bi;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new me(at.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Bi}}function Np(t,e,n){return mr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class gi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new gi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=mi.create(e.facet(Zn).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new gi(r)}}Ft.state=Ut.define({create:gi.init,update(t,e){for(let n of e.effects)if(n.is(Ft.setState))return n.value;return e.startState.facet(Zn)!=e.state.facet(Zn)?gi.init(e.state):t.apply(e)}});let Wy=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Wy=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const tu=typeof navigator<"u"&&(!((eu=navigator.scheduling)===null||eu===void 0)&&eu.isInputPending)?()=>navigator.scheduling.isInputPending():null,gC=yt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Ft.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Ft.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Wy(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Ft.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!tu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>tu&&tu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ft.setState.of(new gi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>rn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Zn=z.define({combine(t){return t.length?t[0]:null},enables:t=>[Ft.state,gC,j.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),yC=z.define(),tf=z.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Ar(t){let e=t.facet(tf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Os(t,e){let n="",r=t.tabSize,i=t.facet(tf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function nf(t,e){t instanceof Z&&(t=new oa(t));for(let r of t.state.facet(yC)){let i=r(t,e);if(i!==void 0)return i}let n=vt(t.state);return n.length>=e?vC(t,n,e):null}class oa{constructor(e,n={}){this.state=e,this.options=n,this.unit=Ar(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return ra(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Vy=new Y;function vC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return Uy(r,t,n)}function Uy(t,e,n){for(let r=t;r;r=r.next){let i=wC(r.node);if(i)return i(rf.create(e,n,r))}return 0}function xC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function wC(t){let e=t.type.prop(Vy);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Y.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>bC(l,!0,1,void 0,s&&!xC(l)?i.from:void 0)}return t.parent==null?kC:null}function kC(){return 0}class rf extends oa{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new rf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(SC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Uy(this.context.next,this.base,this.pos)}}function SC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function CC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function bC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=CC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const AC=200;function EC(){return Z.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+AC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let h=l.doc.lineAt(u);if(h.from==o)continue;o=h.from;let c=nf(l,h.from);if(c==null)continue;let f=/^\s*/.exec(h.text)[0],p=Os(l,c);f!=p&&a.push({from:h.from,to:h.from+f.length,insert:p})}return a.length?[t,{changes:a,sequential:!0}]:t})}const MC=z.define(),TC=new Y;function NC(t,e,n){let r=vt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(TC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!OC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function OC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Op(t,e,n){for(let r of t.facet(MC)){let i=r(t,e,n);if(i)return i}return NC(t,e,n)}function $y(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Ky=oe.define({map:$y}),sf=oe.define({map:$y}),Po=Ut.define({create(){return $.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Dp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Ky)&&!DC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(qy),i=r?$.replace({widget:new RC(r(e.state,n.value))}):Pp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(sf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Dp(t,e.selection.main.head)),t},provide:t=>j.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Pp.range(r,i))}return $.set(e,!0)}});function Dp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function jh(t,e,n){var r;let i=null;return(r=t.field(Po,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function DC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const PC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},qy=z.define({combine(t){return na(t,PC)}});function LC(t){return[Po,jC]}function Gy(t,e){let{state:n}=t,r=n.facet(qy),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=jh(t.state,o.from,o.to);a&&t.dispatch({effects:sf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Pp=$.replace({widget:new class extends zs{toDOM(t){return Gy(t,null)}}});class RC extends zs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Gy(e,this.value)}}const BC={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class nu extends Jn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function IC(t={}){let e={...BC,...t},n=new nu(e,!0),r=new nu(e,!1),i=yt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Zn)!=l.state.facet(Zn)||l.startState.field(Po,!1)!=l.state.field(Po,!1)||vt(l.startState)!=vt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new kr;for(let a of l.viewportLineBlocks){let u=jh(l.state,a.from,a.to)?r:Op(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,WS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||ee.empty},initialSpacer(){return new nu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=jh(l.state,o.from,o.to);if(u)return l.dispatch({effects:sf.of(u)}),!0;let h=Op(l.state,o.from,o.to);return h?(l.dispatch({effects:Ky.of(h)}),!0):!1}}}),LC()]}const jC=j.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class aa{constructor(e,n){this.specs=e;let r;function i(o){let a=Gn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Ft?o=>o.prop(Kr)==l.data:l?o=>o==l:void 0,this.style=Hy(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Gn(r):null,this.themeType=n.themeType}static define(e,n){return new aa(e,n||{})}}const Fh=z.define(),FC=z.define({combine(t){return t.length?[t[0]]:null}});function ru(t){let e=t.facet(Fh);return e.length?e:t.facet(FC)}function zC(t,e){let n=[HC],r;return t instanceof aa&&(t.module&&n.push(j.styleModule.of(t.module)),r=t.themeType),r?n.push(Fh.computeN([j.darkTheme],i=>i.facet(j.darkTheme)==(r=="dark")?[t]:[])):n.push(Fh.of(t)),n}class _C{constructor(e){this.markCache=Object.create(null),this.tree=vt(e.state),this.decorations=this.buildDeco(e,ru(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=vt(e.state),r=ru(e.state),i=r!=ru(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return $.none;let r=new kr;for(let{from:i,to:s}of e.visibleRanges)hC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=$.mark({class:a})))},i,s);return r.finish()}}const HC=ea.high(yt.fromClass(_C,{decorations:t=>t.decorations})),WC=j.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Qy=1e4,Yy="()[]{}",Jy=z.define({combine(t){return na(t,{afterCursor:!0,brackets:Yy,maxScanDistance:Qy,renderMatch:$C})}}),VC=$.mark({class:"cm-matchingBracket"}),UC=$.mark({class:"cm-nonmatchingBracket"});function $C(t){let e=[],n=t.matched?VC:UC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const KC=Ut.define({create(){return $.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Jy);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=sn(e.state,i.head,-1,r)||i.head>0&&sn(e.state,i.head-1,1,r)||r.afterCursor&&(sn(e.state,i.head,1,r)||i.head<e.state.doc.length&&sn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return $.set(n,!0)},provide:t=>j.decorations.from(t)}),qC=[KC,WC];function GC(t={}){return[Jy.of(t),qC]}const QC=new Y;function zh(t,e,n){let r=t.prop(e<0?Y.openedBy:Y.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function _h(t){let e=t.type.prop(QC);return e?e(t.node):t}function sn(t,e,n,r={}){let i=r.maxScanDistance||Qy,s=r.brackets||Yy,l=vt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=zh(a.type,n,s);if(u&&a.from<a.to){let h=_h(a);if(h&&(n>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return YC(t,e,n,a,h,u,s)}}return JC(t,e,n,l,o.type,i,s)}function YC(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,h=o==null?void 0:o.cursor();if(h&&(n<0?h.childBefore(r.from):h.childAfter(r.to)))do if(n<0?h.to<=r.from:h.from>=r.to){if(u==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let c=_h(h);return{start:a,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(zh(h.type,n,l))u++;else if(zh(h.type,-n,l)){if(u==0){let c=_h(h);return{start:a,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}u--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function JC(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),c=0;for(let f=0;!h.next().done&&f<=s;){let p=h.value;n<0&&(f+=p.length);let g=e+f*n;for(let x=n>0?0:p.length-1,w=n>0?p.length:-1;x!=w;x+=n){let m=l.indexOf(p[x]);if(!(m<0||r.resolveInner(g+x,1).type!=i))if(m%2==0==n>0)c++;else{if(c==1)return{start:u,end:{from:g+x,to:g+x+1},matched:m>>1==a>>1};c--}}n>0&&(f+=p.length)}return h.done?{start:u,matched:!1}:null}function Lp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class Xy{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Lp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Lp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function XC(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||ZC,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||af,mergeTokens:t.mergeTokens!==!1}}function ZC(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Rp=new WeakMap;class lf extends Ft{constructor(e){let n=dC(e.languageData),r=XC(e),i,s=new class extends zy{createParse(l,o,a){return new t2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=i2(n,this),i=this,this.streamParser=r,this.stateAfter=new Y({perNode:!0}),this.tokenTable=e.tokenTable?new nv(r.tokenTable):r2}static define(e){return new lf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Rp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=of(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let h=r?r(a.from):-1,c=new Xy(a.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;c.pos<u-a.from;)ev(this.streamParser.token,c,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Rp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function of(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof me&&a<i&&of(t,o,a,r,i);if(u)return u}return null}function Zy(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof me){if(!(a=Zy(t,o,n-l,r-l,i)))break;return i?new me(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function e2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&of(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=Zy(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Ar(i):4),tree:me.empty}}class t2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=mi.get(),l=i[0].from,{state:o,tree:a}=e2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Ar(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=mi.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new Xy(n,e?e.state.tabSize:4,e?Ar(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=ev(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=me.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:n2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new me(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new me(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function ev(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const af=Object.create(null),Ds=[at.none],n2=new Jc(Ds),Bp=[],Ip=Object.create(null),tv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])tv[t]=rv(af,e);class nv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),tv)}resolve(e){return e?this.table[e]||(this.table[e]=rv(this.extra,e)):0}}const r2=new nv(af);function iu(t,e){Bp.indexOf(t)>-1||(Bp.push(t),console.warn(e))}function rv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let h=t[u]||T[u];h?typeof h=="function"?a.length?a=a.map(h):iu(u,`Modifier ${u} used at start of tag`):a.length?iu(u,`Tag ${u} used as modifier`):a=Array.isArray(h)?h:[h]:iu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Ip[i];if(s)return s.id;let l=Ip[i]=at.define({id:Ds.length,name:r,props:[aC({[r]:n})]});return Ds.push(l),l.id}function i2(t,e){let n=at.define({id:Ds.length,name:"Document",props:[Kr.add(()=>t),Vy.add(()=>r=>e.getIndent(r))],top:!0});return Ds.push(n),n}Ee.RTL,Ee.LTR;const s2="#e5c07b",jp="#e06c75",l2="#56b6c2",o2="#ffffff",Gl="#abb2bf",Hh="#7d8799",a2="#61afef",u2="#98c379",Fp="#d19a66",h2="#c678dd",c2="#21252b",zp="#2c313a",_p="#282c34",su="#353a42",f2="#3E4451",Hp="#528bff",d2=j.theme({"&":{color:Gl,backgroundColor:_p},".cm-content":{caretColor:Hp},".cm-cursor, .cm-dropCursor":{borderLeftColor:Hp},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:f2},".cm-panels":{backgroundColor:c2,color:Gl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:_p,color:Hh,border:"none"},".cm-activeLineGutter":{backgroundColor:zp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:su},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:su,borderBottomColor:su},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:zp,color:Gl}}},{dark:!0}),p2=aa.define([{tag:T.keyword,color:h2},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:jp},{tag:[T.function(T.variableName),T.labelName],color:a2},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:Fp},{tag:[T.definition(T.name),T.separator],color:Gl},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:s2},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:l2},{tag:[T.meta,T.comment],color:Hh},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Hh,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:jp},{tag:[T.atom,T.bool,T.special(T.variableName)],color:Fp},{tag:[T.processingInstruction,T.string,T.inserted],color:u2},{tag:T.invalid,color:o2}]),m2=[d2,zC(p2)],g2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=hf(t.state,n.from);return r.line?y2(t):r.block?x2(t):!1};function uf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const y2=uf(S2,0),v2=uf(iv,0),x2=uf((t,e)=>iv(t,e,k2(e)),0);function hf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Ii=50;function w2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Ii,r),l=t.sliceDoc(i,i+Ii),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let h,c;i-r<=2*Ii?h=c=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+Ii),c=t.sliceDoc(i-Ii,i));let f=/^\s*/.exec(h)[0].length,p=/\s*$/.exec(c)[0].length,g=c.length-p-n.length;return h.slice(f,f+e.length)==e&&c.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:i-p-n.length,margin:/\s/.test(c.charAt(g-1))?1:0}}:null}function k2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function iv(t,e,n=e.selection.ranges){let r=n.map(s=>hf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>w2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:h}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function S2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=hf(e,s).line;if(u){for(let h=s;h<=l;){let c=e.doc.lineAt(h);if(c.from>i&&(s==l||l>c.from)){i=c.from;let f=/^\s*/.exec(c.text)[0].length,p=f==c.length,g=c.text.slice(f,f+u.length)==u?f:-1;f<c.text.length&&f<a&&(a=f),r.push({line:c,comment:g,token:u,indent:f,empty:p,single:!1})}h=c.to+1}if(a<1e9)for(let h=o;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:h,single:c}of r)(c||!h)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,h=u+a.length;l.text[h-l.from]==" "&&h++,s.push({from:u,to:h})}return{changes:s}}return null}function ki(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function $t(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Kt({state:t,dispatch:e},n){let r=ki(t.selection,n);return r.eq(t.selection,!0)?!1:(e($t(t,r)),!0)}function ua(t,e){return E.cursor(e?t.to:t.from)}function sv(t,e){return Kt(t,n=>n.empty?t.moveByChar(n,e):ua(n,e))}function Ge(t){return t.textDirectionAt(t.state.selection.main.head)==Ee.LTR}const lv=t=>sv(t,!Ge(t)),ov=t=>sv(t,Ge(t));function av(t,e){return Kt(t,n=>n.empty?t.moveByGroup(n,e):ua(n,e))}const C2=t=>av(t,!Ge(t)),b2=t=>av(t,Ge(t));function A2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ha(t,e,n){let r=vt(t).resolveInner(e.head),i=n?Y.closedBy:Y.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;A2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?sn(t,r.from,1):sn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const E2=t=>Kt(t,e=>ha(t.state,e,!Ge(t))),M2=t=>Kt(t,e=>ha(t.state,e,Ge(t)));function uv(t,e){return Kt(t,n=>{if(!n.empty)return ua(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const hv=t=>uv(t,!1),cv=t=>uv(t,!0);function fv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(j.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function dv(t,e){let n=fv(t),{state:r}=t,i=ki(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):ua(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=j.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch($t(r,i),{effects:s}),!0}const Wp=t=>dv(t,!1),Wh=t=>dv(t,!0);function rr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const T2=t=>Kt(t,e=>rr(t,e,!0)),N2=t=>Kt(t,e=>rr(t,e,!1)),O2=t=>Kt(t,e=>rr(t,e,!Ge(t))),D2=t=>Kt(t,e=>rr(t,e,Ge(t))),P2=t=>Kt(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),L2=t=>Kt(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function R2(t,e,n){let r=!1,i=ki(t.selection,s=>{let l=sn(t,s.head,-1)||sn(t,s.head,1)||s.head>0&&sn(t,s.head-1,1)||s.head<t.doc.length&&sn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e($t(t,i)),!0):!1}const B2=({state:t,dispatch:e})=>R2(t,e);function Pt(t,e){let n=ki(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch($t(t.state,n)),!0)}function pv(t,e){return Pt(t,n=>t.moveByChar(n,e))}const mv=t=>pv(t,!Ge(t)),gv=t=>pv(t,Ge(t));function yv(t,e){return Pt(t,n=>t.moveByGroup(n,e))}const I2=t=>yv(t,!Ge(t)),j2=t=>yv(t,Ge(t)),F2=t=>Pt(t,e=>ha(t.state,e,!Ge(t))),z2=t=>Pt(t,e=>ha(t.state,e,Ge(t)));function vv(t,e){return Pt(t,n=>t.moveVertically(n,e))}const xv=t=>vv(t,!1),wv=t=>vv(t,!0);function kv(t,e){return Pt(t,n=>t.moveVertically(n,e,fv(t).height))}const Vp=t=>kv(t,!1),Up=t=>kv(t,!0),_2=t=>Pt(t,e=>rr(t,e,!0)),H2=t=>Pt(t,e=>rr(t,e,!1)),W2=t=>Pt(t,e=>rr(t,e,!Ge(t))),V2=t=>Pt(t,e=>rr(t,e,Ge(t))),U2=t=>Pt(t,e=>E.cursor(t.lineBlockAt(e.head).from)),$2=t=>Pt(t,e=>E.cursor(t.lineBlockAt(e.head).to)),$p=({state:t,dispatch:e})=>(e($t(t,{anchor:0})),!0),Kp=({state:t,dispatch:e})=>(e($t(t,{anchor:t.doc.length})),!0),qp=({state:t,dispatch:e})=>(e($t(t,{anchor:t.selection.main.anchor,head:0})),!0),Gp=({state:t,dispatch:e})=>(e($t(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),K2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),q2=({state:t,dispatch:e})=>{let n=ca(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},G2=({state:t,dispatch:e})=>{let n=ki(t.selection,r=>{let i=vt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e($t(t,n)),!0)};function Sv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch($t(n,E.create(i,i.length-1))),!0)}const Q2=t=>Sv(t,!1),Y2=t=>Sv(t,!0),J2=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e($t(t,r)),!0):!1};function Vs(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Ml(t,a,!1)):a>l&&(n="delete.forward",a=Ml(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Ml(t,l,!1),o=Ml(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?j.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ml(t,e,n){if(t instanceof j)for(let r of t.state.facet(j.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Cv=(t,e,n)=>Vs(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=ra(o,s.tabSize),h=u%Ar(s)||Ar(s);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;a=i}else a=Ie(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=Ie(l.text,a-l.from,!1,!1)+l.from);return a}),Vh=t=>Cv(t,!1,!0),bv=t=>Cv(t,!0,!1),Av=(t,e)=>Vs(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Ie(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),h=l(u);if(o!=null&&h!=o)break;(u!=" "||r!=n.head)&&(o=h),r=a}return r}),Ev=t=>Av(t,!1),X2=t=>Av(t,!0),Z2=t=>Vs(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),eb=t=>Vs(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),tb=t=>Vs(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),nb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:J.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},rb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:Ie(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:Ie(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ca(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Mv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of ca(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ib=({state:t,dispatch:e})=>Mv(t,e,!1),sb=({state:t,dispatch:e})=>Mv(t,e,!0);function Tv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of ca(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const lb=({state:t,dispatch:e})=>Tv(t,e,!1),ob=({state:t,dispatch:e})=>Tv(t,e,!0),ab=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(ca(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ki(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function ub(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=vt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Y.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Qp=Nv(!1),hb=Nv(!0);function Nv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&ub(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new oa(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=nf(u,s);for(h==null&&(h=ra(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let c=["",Os(e,h)];return a&&c.push(Os(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:J.of(c)},range:E.cursor(s+1+c[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function cf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const cb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new oa(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=cf(t,(s,l,o)=>{let a=nf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],h=Os(t,a);(u!=h||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},fb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(cf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(tf)})}),{userEvent:"input.indent"})),!0),db=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(cf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=ra(i,t.tabSize),l=0,o=Os(t,Math.max(0,s-Ar(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),pb=t=>(t.setTabFocusMode(),!0),mb=[{key:"Ctrl-b",run:lv,shift:mv,preventDefault:!0},{key:"Ctrl-f",run:ov,shift:gv},{key:"Ctrl-p",run:hv,shift:xv},{key:"Ctrl-n",run:cv,shift:wv},{key:"Ctrl-a",run:P2,shift:U2},{key:"Ctrl-e",run:L2,shift:$2},{key:"Ctrl-d",run:bv},{key:"Ctrl-h",run:Vh},{key:"Ctrl-k",run:Z2},{key:"Ctrl-Alt-h",run:Ev},{key:"Ctrl-o",run:nb},{key:"Ctrl-t",run:rb},{key:"Ctrl-v",run:Wh}],gb=[{key:"ArrowLeft",run:lv,shift:mv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:C2,shift:I2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:O2,shift:W2,preventDefault:!0},{key:"ArrowRight",run:ov,shift:gv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:b2,shift:j2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:D2,shift:V2,preventDefault:!0},{key:"ArrowUp",run:hv,shift:xv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$p,shift:qp},{mac:"Ctrl-ArrowUp",run:Wp,shift:Vp},{key:"ArrowDown",run:cv,shift:wv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Kp,shift:Gp},{mac:"Ctrl-ArrowDown",run:Wh,shift:Up},{key:"PageUp",run:Wp,shift:Vp},{key:"PageDown",run:Wh,shift:Up},{key:"Home",run:N2,shift:H2,preventDefault:!0},{key:"Mod-Home",run:$p,shift:qp},{key:"End",run:T2,shift:_2,preventDefault:!0},{key:"Mod-End",run:Kp,shift:Gp},{key:"Enter",run:Qp,shift:Qp},{key:"Mod-a",run:K2},{key:"Backspace",run:Vh,shift:Vh,preventDefault:!0},{key:"Delete",run:bv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ev,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:X2,preventDefault:!0},{mac:"Mod-Backspace",run:eb,preventDefault:!0},{mac:"Mod-Delete",run:tb,preventDefault:!0}].concat(mb.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),yb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:E2,shift:F2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:M2,shift:z2},{key:"Alt-ArrowUp",run:ib},{key:"Shift-Alt-ArrowUp",run:lb},{key:"Alt-ArrowDown",run:sb},{key:"Shift-Alt-ArrowDown",run:ob},{key:"Mod-Alt-ArrowUp",run:Q2},{key:"Mod-Alt-ArrowDown",run:Y2},{key:"Escape",run:J2},{key:"Mod-Enter",run:hb},{key:"Alt-l",mac:"Ctrl-l",run:q2},{key:"Mod-i",run:G2,preventDefault:!0},{key:"Mod-[",run:db},{key:"Mod-]",run:fb},{key:"Mod-Alt-\\",run:cb},{key:"Shift-Mod-k",run:ab},{key:"Shift-Mod-\\",run:B2},{key:"Mod-/",run:g2},{key:"Alt-A",run:v2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pb}].concat(gb),Yp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ps{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(Yp(o)):Yp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return y0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=zw(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=v0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Ps.prototype[Symbol.iterator]=function(){return this});const Ov={from:-1,to:-1,match:/.*/.exec("")},ff="gm"+(/x/.unicode==null?"":"u");class Dv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Ov,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Pv(e,n,r,i,s);this.re=new RegExp(n,ff+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Lo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Lo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const lu=new WeakMap;class ni{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=lu.get(e);if(!i||i.from>=r||i.to<=n){let o=new ni(n,e.sliceString(n,r));return lu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),lu.set(e,new ni(l,s)),new ni(n,s.slice(n-l,r-l))}}class Pv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Ov,this.matchPos=Lo(e,i),this.re=new RegExp(n,ff+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ni.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Lo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ni.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Dv.prototype[Symbol.iterator]=Pv.prototype[Symbol.iterator]=function(){return this});function vb(t){try{return new RegExp(t,ff),!0}catch{return!1}}function Lo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Uh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Pe("input",{class:"cm-textfield",name:"line",value:e}),r=Pe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ss.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Pe("label",t.state.phrase("Go to line"),": ",n)," ",Pe("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Pe("button",{name:"close",onclick:()=>{t.dispatch({effects:ss.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,h,c]=s,f=h?+h.slice(1):0,p=u?+u:o.number;if(u&&c){let w=p/100;a&&(w=w*(a=="-"?-1:1)+o.number/l.doc.lines),p=Math.round(l.doc.lines*w)}else u&&a&&(p=p*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,p))),x=E.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[ss.of(!1),j.scrollIntoView(x.from,{y:"center"})],selection:x}),t.focus()}return{dom:r}}const ss=oe.define(),Jp=Ut.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ss)&&(t=n.value);return t},provide:t=>To.from(t,e=>e?Uh:null)}),xb=t=>{let e=Mo(t,Uh);if(!e){let n=[ss.of(!0)];t.state.field(Jp,!1)==null&&n.push(oe.appendConfig.of([Jp,wb])),t.dispatch({effects:n}),e=Mo(t,Uh)}return e&&e.dom.querySelector("input").select(),!0},wb=j.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),kb=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Sb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Ps(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Ps(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Cb=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return kb({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Sb(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:j.scrollIntoView(i.to)})),!0):!1},Si=z.define({combine(t){return na(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Bb(e),scrollToMatch:e=>j.scrollIntoView(e)})}});class Lv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||vb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Mb(this):new Ab(this)}getCursor(e,n=0,r){let i=e.doc?e:Z.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Dr(this,i,n,r):Or(this,i,n,r)}}class Rv{constructor(e){this.spec=e}}function Or(t,e,n,r){return new Ps(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?bb(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function bb(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Ro(i,n-s))!=je.Word||e(Bo(i,n-s))!=je.Word)&&(e(Bo(i,r-s))!=je.Word||e(Ro(i,r-s))!=je.Word))}class Ab extends Rv{constructor(e){super(e)}nextMatch(e,n,r){let i=Or(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Or(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Or(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Or(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Or(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Dr(t,e,n,r){return new Dv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Eb(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Ro(t,e){return t.slice(Ie(t,e,!1),e)}function Bo(t,e){return t.slice(e,Ie(t,e))}function Eb(t){return(e,n,r)=>!r[0].length||(t(Ro(r.input,r.index))!=je.Word||t(Bo(r.input,r.index))!=je.Word)&&(t(Bo(r.input,r.index+r[0].length))!=je.Word||t(Ro(r.input,r.index+r[0].length))!=je.Word)}class Mb extends Rv{nextMatch(e,n,r){let i=Dr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Dr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Dr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Dr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Dr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ls=oe.define(),df=oe.define(),$n=Ut.define({create(t){return new ou($h(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ls)?t=new ou(n.value.create(),t.panel):n.is(df)&&(t=new ou(t.query,n.value?pf:null));return t},provide:t=>To.from(t,e=>e.panel)});class ou{constructor(e,n){this.query=e,this.panel=n}}const Tb=$.mark({class:"cm-searchMatch"}),Nb=$.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ob=yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field($n))}update(t){let e=t.state.field($n);(e!=t.startState.field($n)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return $.none;let{view:n}=this,r=new kr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,h)=>{let c=n.state.selection.ranges.some(f=>f.from==u&&f.to==h);r.add(u,h,c?Nb:Tb)})}return r.finish()}},{decorations:t=>t.decorations});function Us(t){return e=>{let n=e.state.field($n,!1);return n&&n.query.spec.valid?t(e,n):jv(e)}}const Io=Us((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(Si);return t.dispatch({selection:i,effects:[mf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),Iv(t),!0}),jo=Us((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(Si);return t.dispatch({selection:s,effects:[mf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),Iv(t),!0}),Db=Us((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Pb=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Ps(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},Xp=Us((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,h=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),h.push(j.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let c=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(c),h.push(mf(t,l)),h.push(n.facet(Si).scrollToMatch(a.main,t))),t.dispatch({changes:c,selection:a,effects:h,userEvent:"input.replace"}),!0}),Lb=Us((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:j.announce.of(r),userEvent:"input.replace.all"}),!0});function pf(t){return t.state.facet(Si).createPanel(t)}function $h(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Si);return new Lv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Bv(t){let e=Mo(t,pf);return e&&e.dom.querySelector("[main-field]")}function Iv(t){let e=Bv(t);e&&e==t.root.activeElement&&e.select()}const jv=t=>{let e=t.state.field($n,!1);if(e&&e.panel){let n=Bv(t);if(n&&n!=t.root.activeElement){let r=$h(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ls.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[df.of(!0),e?Ls.of($h(t.state,e.query.spec)):oe.appendConfig.of(jb)]});return!0},Fv=t=>{let e=t.state.field($n,!1);if(!e||!e.panel)return!1;let n=Mo(t,pf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:df.of(!1)}),!0},Rb=[{key:"Mod-f",run:jv,scope:"editor search-panel"},{key:"F3",run:Io,shift:jo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Io,shift:jo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Fv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Pb},{key:"Mod-Alt-g",run:xb},{key:"Mod-d",run:Cb,preventDefault:!0}];class Bb{constructor(e){this.view=e;let n=this.query=e.state.field($n).query.spec;this.commit=this.commit.bind(this),this.searchField=Pe("input",{value:n.search,placeholder:ht(e,"Find"),"aria-label":ht(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pe("input",{value:n.replace,placeholder:ht(e,"Replace"),"aria-label":ht(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pe("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Pe("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Pe("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Pe("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Pe("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Io(e),[ht(e,"next")]),r("prev",()=>jo(e),[ht(e,"previous")]),r("select",()=>Db(e),[ht(e,"all")]),Pe("label",null,[this.caseField,ht(e,"match case")]),Pe("label",null,[this.reField,ht(e,"regexp")]),Pe("label",null,[this.wordField,ht(e,"by word")]),...e.state.readOnly?[]:[Pe("br"),this.replaceField,r("replace",()=>Xp(e),[ht(e,"replace")]),r("replaceAll",()=>Lb(e),[ht(e,"replace all")])],Pe("button",{name:"close",onclick:()=>Fv(e),"aria-label":ht(e,"close"),type:"button"},[""])])}commit(){let e=new Lv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ls.of(e)}))}keydown(e){RS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?jo:Io)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Xp(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ls)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Si).top}}function ht(t,e){return t.state.phrase(e)}const Tl=30,Nl=/[\s\.,:;?!]/;function mf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Tl),l=Math.min(i,n+Tl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Tl;a++)if(!Nl.test(o[a+1])&&Nl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Tl;a--)if(!Nl.test(o[a-1])&&Nl.test(o[a])){o=o.slice(0,a);break}}return j.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const Ib=j.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),jb=[$n,ea.low(Ob),Ib],Fb=lf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Lt.TRANSITION)||t.match(Lt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Lt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Lt.CHARACTER))||(n=t.match(Lt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Lt.IMAGE)||t.match(Lt.AUDIO)?"link":t.match(Lt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Lt.TITLE))return"def";if(n=t.match(Lt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Lt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),zb=yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push($.line({class:"cm-keyword"}).range(s.from)),e.push($.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push($.line({class:"cm-header"}).range(s.from)),e.push($.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push($.line({class:"cm-atom"}).range(s.from)),e.push($.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push($.line({class:"cm-synopsis"}).range(s.from)),e.push($.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push($.line({class:"cm-number"}).range(s.from)),e.push($.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push($.line({class:"cm-variable"}).range(s.from)),e.push($.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return $.set(e)}},{decorations:t=>t.decorations}),zv=I.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=I.useRef(null),l=I.useRef(null);return I.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:j.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),I.useEffect(()=>{if(!s.current)return;const o=[QS(),jS(),IC(),GC(),EC(),j.lineWrapping,Fb,zb,j.domEventHandlers({mouseup:(h,c)=>{setTimeout(()=>{const f=c.state.selection.main.head,p=c.state.doc.lineAt(f);n(p.number-1)},10)}}),m2,Oy.of([...yb,...Rb]),j.updateListener.of(h=>{if(h.docChanged&&e(h.state.doc.toString()),h.selectionSet&&!h.docChanged){const c=h.state.selection.main.head,f=h.state.doc.lineAt(c);n(f.number-1)}}),j.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=Z.create({doc:t,extensions:o}),u=new j({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),I.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),d.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});zv.displayName="CodeMirrorEditor";function _b(t=""){const[e,n]=I.useState([]),[r,i]=I.useState([]),[s,l]=I.useState(new Map),o=I.useRef(null),[a,u]=I.useState(!0);return I.useEffect(()=>{if(!a){if(t){const c=da(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}return}(function(){try{const c=new Worker(new URL("/assets/previewWorker-D4zT3tr0.js",import.meta.url),{type:"module"});return c.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},c.onmessage=f=>{const{type:p,blocks:g,characters:x,characterLineCounts:w}=f.data;p==="result"?(n(g||[]),i(x||[]),l(w||new Map)):p==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=c,t&&c.postMessage({type:"process",text:t}),()=>{try{c.terminate()}catch{}}}catch(c){console.error("Failed to create module worker, falling back to main-thread parsing:",c),u(!1)}})()},[a]),I.useEffect(()=>{if(!a&&t){const c=da(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:c=>{if(a&&o.current)o.current.postMessage({type:"process",text:c});else{const f=da(c);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let Hb=1;function Wb(){const t=I.useRef(null),e=I.useRef(new Map),[n,r]=I.useState([]),i=I.useRef(!1);I.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=I.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-DfPotGTI.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:h,requestId:c,message:f}=a.data||{};if(c&&e.current.has(c)){const{resolve:p,reject:g}=e.current.get(c);if(e.current.delete(c),u==="panels")try{p(h)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(h)&&r(h)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=I.useCallback(o=>{const a=s();if(!a)try{const h=r1(o);return r(h),Promise.resolve(h)}catch(h){return Promise.reject(h)}const u=String(Hb++);return new Promise((h,c)=>{e.current.set(u,{resolve:h,reject:c});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),c(f)}}).then(h=>(i.current&&r(h),h))},[s]);return{panels:n,parsePanels:l}}const au=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function Vb(){const[t,e]=I.useState(!1),[n,r]=I.useState(""),[i,s]=I.useState(!1),[l,o]=I.useState(!1),[a,u]=I.useState(!1),[h,c]=I.useState("edit"),[f,p]=I.useState(0),[g,x]=I.useState(!1),[w,m]=I.useState(null),y=I.useRef(null),v=I.useRef(null),k=I.useRef([]),C=I.useRef(null),[A,b]=I.useState(!1),[N,V]=I.useState(!1);I.useEffect(()=>{const S=localStorage.getItem("fountain-script");let U=au;if(S)try{const de=JSON.parse(S);U=de.content,x(!0),m(new Date(de.savedAt))}catch(de){console.error("Error parsing saved script:",de),localStorage.removeItem("fountain-script")}r(U),K(U);try{typeof ce=="function"&&ce(U)}catch{}},[]),I.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const U=navigator.userAgent||"",de=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(U),_e=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,qt=(window.innerWidth||screen.width||0)<1024;(de||_e&&qt)&&e(!0)}catch{}},[]);const{blocks:B,characters:_,characterLineCounts:H,processText:K}=_b(""),{panels:P,parsePanels:ce}=Wb(),[te,Qe]=I.useState(0),[D,W]=I.useState("screenplay"),F=I.useRef(null),[G,q]=I.useState(!1),ke=I.useRef(null),ne=I.useRef(null),[ut,Me]=I.useState(!1),Ye=I.useRef(null),[gf,$s]=I.useState(!1);I.useEffect(()=>{k.current=B},[B]);const _v=S=>{r(S),K(S);try{typeof ce=="function"&&ce(S)}catch{}},Hv=()=>{!Array.isArray(P)||P.length===0||(fa(),Me(!1),Ye.current="user",Qe(S=>{const U=P.length;return((S-1)%U+U)%U}))},yf=(S=!0)=>{!Array.isArray(P)||P.length===0||(Ye.current=S?"user":"auto",S&&(fa(),Me(!1)),Qe(U=>{const de=P.length;return(U+1)%de}))},Wv=async()=>{ut&&(Qe(0),Me(!1));try{F.current&&F.current.paused&&(F.current.currentTime=0)}catch{}q(!0)},Vv=()=>{if(F.current){Ye.current="user";try{F.current.pause()}catch{}q(!1)}},Uv=()=>{fa(),Me(!1);try{Qe(0)}catch{}};function fa(){try{ne.current&&(clearTimeout(ne.current),ne.current=null)}catch{}try{F.current&&(Ye.current="user",F.current.pause(),F.current.currentTime=0)}catch{}q(!1)}I.useEffect(()=>{const S=F.current;if(!S)return;const U=()=>q(!0),de=()=>{Ye.current==="user"&&q(!1)},_e=()=>{yf(!1)};return S.addEventListener("play",U),S.addEventListener("pause",de),S.addEventListener("ended",_e),()=>{S.removeEventListener("play",U),S.removeEventListener("pause",de),S.removeEventListener("ended",_e)}},[te,P]),I.useEffect(()=>{if(ne.current&&(clearTimeout(ne.current),ne.current=null),!G)return;const S=P&&P.length>0?P[te]||P[0]:null;if(!S){q(!1);return}try{F.current&&F.current.play().catch(()=>{})}catch{}const U=Math.max(1e3,typeof S.duration=="number"?S.duration*1e3:3e3);return ne.current=setTimeout(()=>{!P||te>=P.length-1?(q(!1),Me(!0),ne.current=null):Qe(de=>de+1)},U),()=>{ne.current&&(clearTimeout(ne.current),ne.current=null)}},[G,te,P]),I.useEffect(()=>{if(F.current)try{Ye.current==="user"&&(F.current.pause(),F.current.currentTime=0,q(!1))}catch{}Ye.current=null;try{ke.current&&typeof ke.current.scrollTo=="function"&&ke.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[te]),I.useEffect(()=>()=>{try{ne.current&&clearTimeout(ne.current)}catch{}},[]),I.useEffect(()=>{try{const S=P&&P.length>0&&P[te]?P[te]:null}catch{}},[P,te]),I.useEffect(()=>{$s(!1)},[te]);const $v=async()=>{if(n.trim()){V(!0);try{const S={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(S)),x(!0),m(new Date)}finally{V(!1)}}},Kv=()=>{const S=localStorage.getItem("fountain-script");if(S)try{const U=JSON.parse(S);r(U.content),K(U.content),m(new Date(U.savedAt))}catch(U){console.error("Error loading saved script:",U)}},qv=()=>{localStorage.removeItem("fountain-script"),x(!1),m(null),r(au),K(au)},Gv=async()=>{try{await navigator.clipboard.writeText(n)}catch{const U=document.createElement("textarea");U.value=n,document.body.appendChild(U),U.select(),document.execCommand("copy"),document.body.removeChild(U)}},Qv=async()=>{try{const S=await navigator.clipboard.readText();r(S),K(S)}catch(S){console.error("Error pasting from clipboard:",S)}},Yv=()=>{r(""),K("");try{v.current&&v.current.focus&&v.current.focus()}catch{}},Jv=I.useCallback(S=>{const U=k.current;if(p(S),y.current&&U.length>0){let de=null;for(let _e=U.length-1;_e>=0;_e--)if(U[_e].index<=S){de=U[_e];break}if(de){const _e=y.current.querySelector(`[data-line-id="${de.id}"]`);if(_e){const qt=y.current,Cn=qt.getBoundingClientRect(),Ci=_e.getBoundingClientRect(),Ks=Ci.top-Cn.top,e1=Cn.height,t1=Ci.height,n1=qt.scrollTop+Ks-e1/2+t1/2;qt.scrollTo({top:n1,behavior:"smooth"})}}}},[]),Xv=I.useCallback(S=>{v.current&&v.current.scrollToLine&&v.current.scrollToLine(S)},[]);I.useEffect(()=>{const S=U=>{U.key==="Escape"&&(i?s(!1):a&&u(!1))};if(i||a)return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[i,a]),I.useEffect(()=>{const S=()=>{b(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",S),()=>document.removeEventListener("fullscreenchange",S)},[]);const Zv=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),b(!1)):C.current&&C.current.requestFullscreen?(await C.current.requestFullscreen(),b(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),b(!0))}catch(S){console.error("Fullscreen toggle failed",S)}};return d.jsxs("div",{className:"fountain-app",ref:C,children:[t&&d.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:d.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),d.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),d.jsxs("p",{style:{marginTop:"1rem"},children:[d.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),d.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:d.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),d.jsx("div",{className:"persistence-toolbar",children:d.jsxs("div",{className:"toolbar-group",children:[d.jsxs("button",{className:`toolbar-btn ${!n.trim()||N?"disabled":""}`,onClick:$v,disabled:!n.trim()||N,title:"Save current script to browser storage",children:[d.jsx("i",{className:`fas ${N?"fa-spinner fa-spin":"fa-save"}`}),"Save"]}),d.jsxs("button",{className:`toolbar-btn ${g?"":"disabled"}`,onClick:Kv,disabled:!g,title:w?`Load saved script (${w.toLocaleDateString()} ${w.toLocaleTimeString()})`:"Load saved script",children:[d.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),d.jsxs("button",{className:"toolbar-btn",onClick:Gv,title:"Copy editor contents to clipboard",children:[d.jsx("i",{className:"fas fa-copy"}),"Copy"]}),d.jsxs("button",{className:"toolbar-btn",onClick:Qv,title:"Paste from clipboard to editor",children:[d.jsx("i",{className:"fas fa-paste"}),"Paste"]}),d.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:Yv,disabled:!n.trim(),title:"Clear editor contents",children:[d.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),d.jsxs("button",{className:`toolbar-btn danger ${g?"":"disabled"}`,onClick:qv,disabled:!g,title:"Clear saved script from storage",children:[d.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),d.jsx("div",{className:"toolbar-divider"}),d.jsxs("button",{className:`toolbar-btn character-btn ${_.length===0?"disabled":""}`,onClick:()=>_.length>0&&u(!0),title:_.length>0?"Character List":"No characters found",disabled:_.length===0,children:[d.jsx("i",{className:"fas fa-user"}),"Characters",_.length>0&&d.jsx("span",{className:"character-count-badge",children:_.length})]}),d.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[d.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),d.jsxs("button",{className:"toolbar-btn demo-btn",onClick:()=>o(!0),title:"Show demo scripts","aria-label":"Open demo scripts modal",style:{backgroundColor:"#e75480",color:"white",marginLeft:0},children:[d.jsx("i",{className:"fas fa-download","aria-hidden":"true"}),"Demo"]}),l&&d.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:d.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,letterSpacing:"0.03em",color:"#fff",marginBottom:"0.5em"},children:"Demo Scripts"}),d.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("style",{children:`
                .modal-content, .modal-header, .modal-body, .demo-section h2, .demo-section p {
                  color: #fff !important;
                }
                .demo-section h2 {
                  font-size: 1.3rem;
                  font-weight: 600;
                  margin-bottom: 0.25em;
                  margin-top: 1.2em;
                  letter-spacing: 0.02em;
                }
                .demo-section p {
                  padding: 0.5em 0 0.75em 0;
                  line-height: 1.6;
                  color: #b0b0b0 !important;
                }
                .demo-section .toolbar-btn {
                  background-color: #e75480;
                  color: #fff;
                  border: none;
                  font-weight: 600;
                  box-shadow: 0 2px 8px rgba(231,84,128,0.08);
                }
                .demo-section .toolbar-btn:hover {
                  background-color: #c63c6e;
                }
              `}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Film"}),d.jsx("p",{children:"A short live-action sample set in a street caf. Demonstrates panels, dialogue, and images."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/film_the_coffee_deal.fountain").then(S=>S.text()).then(S=>{r(S),K(S),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Film Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Animation"}),d.jsx("p",{children:"A musical animation sample featuring a singing squirrel. Shows lyrics, musical cues, and character interaction."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/animation_the_singing_squirrel.fountain").then(S=>S.text()).then(S=>{r(S),K(S),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Animation Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Advertising"}),d.jsx("p",{children:"A playful ad script for Happy Fun Ball. Demonstrates panels, mock disclaimers, and ad-style dialogue."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/ad_happy_fun_ball.fountain").then(S=>S.text()).then(S=>{r(S),K(S),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Advertising Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Documentary"}),d.jsx("p",{children:"A documentary sample with voice-over, captions, and subtitles. Shows non-fiction structure and panel usage."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/documentary_voices_of_the_river.fountain").then(S=>S.text()).then(S=>{r(S),K(S),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Documentary Demo"]})]})]})]})}),w&&d.jsxs("div",{className:"last-saved",style:{marginLeft:8},children:["Last saved: ",w.toLocaleDateString()," at ",w.toLocaleTimeString()]})]})}),d.jsx("div",{className:"mobile-view-toggle",children:d.jsx("div",{className:"tabs is-centered",children:d.jsxs("ul",{children:[d.jsx("li",{className:h==="edit"?"is-active":"",children:d.jsxs("a",{onClick:()=>c("edit"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),d.jsx("span",{children:"Edit"})]})}),d.jsx("li",{className:h==="preview"?"is-active":"",children:d.jsxs("a",{onClick:()=>c("preview"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),d.jsx("span",{children:"Preview"})]})})]})})}),d.jsxs("div",{className:"editor-layout",children:[d.jsx("button",{className:`toolbar-btn fullscreen-btn ${A?"is-active":""}`,onClick:Zv,title:A?"Exit fullscreen":"Enter fullscreen","aria-label":A?"Exit fullscreen":"Enter fullscreen",children:d.jsx("i",{className:`fas ${A?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),d.jsxs("div",{className:"columns is-gapless",children:[d.jsx("div",{className:`column is-half-desktop ${h==="preview"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box editor-box",children:[d.jsx("h3",{className:"title is-6",children:"Editor"}),d.jsx(zv,{ref:v,value:n,onChange:_v,onCursorChange:Jv,placeholder:"Type your fountain screenplay here..."})]})}),d.jsx("div",{className:`column is-half-desktop ${h==="edit"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box preview-box",children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),d.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${D==="screenplay"?"is-active":""}`,onClick:()=>W("screenplay"),"aria-pressed":D==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${D==="player"?"is-active":""}`,onClick:()=>W("player"),"aria-pressed":D==="player",title:"Show media player",children:"Player"})]})]}),d.jsx("div",{})]}),D==="screenplay"?d.jsx("div",{className:"preview-content",ref:y,children:B.length===0?d.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):B.map(S=>d.jsx("div",{className:`preview-line ${S.className||""} ${S.index===f?"current-line":""}`,"data-type":S.type,"data-line-id":S.id,"data-line-index":S.index,onClick:()=>Xv(S.index),style:{cursor:"pointer"},children:S.type==="image"||S.type==="audio"||S.type==="title_page"||S.type==="page_break"||S.type==="page_number"?d.jsx("div",{dangerouslySetInnerHTML:{__html:S.text}}):S.text||""},S.id))}):d.jsxs("div",{className:"media-player",ref:ke,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const S=P&&P.length>0?P[te]||P[0]:null,U=S&&typeof S.duration=="number"?S.duration:null,de=P&&P.length?P.length:0,_e=S&&S.title?String(S.title):"";let qt="untitled";return _e&&_e.trim()&&(qt=_e.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),qt||(qt="untitled")),d.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[d.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[d.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>$s(!0),onMouseLeave:()=>$s(!1),onClick:()=>$s(Cn=>!Cn),"aria-haspopup":"true","aria-expanded":gf,children:qt}),S&&S.nesting&&gf?d.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[S.nesting.act?d.jsxs("div",{children:[d.jsx("strong",{children:"Act:"})," ",S.nesting.act]}):null,S.nesting.scene?d.jsxs("div",{children:[d.jsx("strong",{children:"Scene:"})," ",S.nesting.scene]}):null,S.nesting.sequence?d.jsxs("div",{children:[d.jsx("strong",{children:"Sequence:"})," ",S.nesting.sequence]}):null,!S.nesting.act&&!S.nesting.sequence&&!S.nesting.scene?d.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),d.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${te+1} / ${de})`})]}),d.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:d.jsxs("div",{style:{color:"#999"},children:["lines ",S&&typeof S.startLine=="number"?S.startLine:"?","",S&&typeof S.endLine=="number"?S.endLine:"?"]})})]}),d.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[d.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[d.jsx("span",{style:{fontSize:"0.95rem"},children:""}),U?`${U}s`:"n/a"]}),d.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:Uv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsxs("button",{className:`toolbar-btn ${G?"is-active":""}`,title:"Play","aria-label":"Play",onClick:Wv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[G?d.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,""]}),d.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:Vv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:Hv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:yf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""})]})]}),G&&(()=>{const Cn=P&&P.length>0?P[te]||P[0]:null,Ci=Cn&&typeof Cn.duration=="number"?Cn.duration:null,Ks=Math.max(1e3,typeof Ci=="number"?Ci*1e3:3e3);return d.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:d.jsx("div",{className:"player-progress",style:{animationDuration:`${Ks}ms`},"aria-hidden":"true"},`player-progress-${te}-${Ks}`)})})()]})})(),(()=>{if(ut)return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const S=P&&P.length>0?P[te]||P[0]:null,U=S&&S.imageUrl?S.imageUrl:null;return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:U?d.jsx("img",{src:U,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:d.jsx("span",{children:"No image"})})})})(),(()=>{const S=P&&P.length>0?P[te]||P[0]:null,U=S&&S.audioUrl?S.audioUrl:null;return d.jsx("div",{style:{marginBottom:"0.75rem"},children:U?d.jsx("audio",{ref:F,controls:!0,src:U,style:{width:"100%"}}):d.jsx("audio",{ref:F,controls:!0,disabled:!0,style:{width:"100%"}})})})(),d.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!P||P.length===0?d.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const S=P&&P.length>0?P[te]||P[0]:null;return d.jsx("div",{children:d.jsx("div",{style:{padding:"0.5rem"},children:d.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:S&&S.blocks&&S.blocks.length>0?S.blocks.map(U=>d.jsx("div",{className:`preview-line ${U.className||""}`,dangerouslySetInnerHTML:{__html:U.text||""}},U.id)):S&&S.snippet?S.snippet.split(/\r?\n/).map((U,de)=>d.jsx("div",{style:{whiteSpace:"pre-wrap"},children:U||""},de)):d.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&d.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:d.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Fountain.ext Format Reference"}),d.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Title Page"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",d.jsx("br",{}),"Credit: Written by",d.jsx("br",{}),"Author: John Dope",d.jsx("br",{}),"Authors: John Dope and Jane Smith",d.jsx("br",{}),"Source: Based on the novel by Famous Writer",d.jsx("br",{}),"Draft Date: October 4, 2025",d.jsx("br",{}),"Date: 10/04/2025",d.jsx("br",{}),"Contact:",d.jsx("br",{}),"John Dope",d.jsx("br",{}),"555-123-4567",d.jsx("br",{}),"john@example.com",d.jsx("br",{}),"",d.jsx("br",{}),"Literary Agent",d.jsx("br",{}),"Agency Name",d.jsx("br",{}),"agent@agency.com",d.jsx("br",{}),"Notes: This is a sample script",d.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),d.jsxs("p",{children:["Title page elements appear at the top of your script. All are optional. The parser recognizes a wide range of common title-page keys (case-insensitive). Examples include:",d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"title"}),", ",d.jsx("strong",{children:"credit"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"author"}),", ",d.jsx("strong",{children:"authors"}),", ",d.jsx("strong",{children:"writer"}),", ",d.jsx("strong",{children:"writers"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"written by"}),", ",d.jsx("strong",{children:"screenplay by"}),", ",d.jsx("strong",{children:"teleplay by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"story by"}),", ",d.jsx("strong",{children:"adaptation by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"source"}),", ",d.jsx("strong",{children:"based on"}),", ",d.jsx("strong",{children:"based on characters by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"notes"}),", ",d.jsx("strong",{children:"draft"}),", ",d.jsx("strong",{children:"draft date"}),", ",d.jsx("strong",{children:"draft #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"revision"}),", ",d.jsx("strong",{children:"revision date"}),", ",d.jsx("strong",{children:"revision color"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"date"}),", ",d.jsx("strong",{children:"contact"}),", ",d.jsx("strong",{children:"copyright"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"wga"}),", ",d.jsx("strong",{children:"wga registration"}),", ",d.jsx("strong",{children:"registration"}),", ",d.jsx("strong",{children:"registration #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"series"}),", ",d.jsx("strong",{children:"episode"}),", ",d.jsx("strong",{children:"episode title"}),", ",d.jsx("strong",{children:"showrunner"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"production"}),", ",d.jsx("strong",{children:"production company"})]})]}),"The parser accepts alternate spacing (for example ",d.jsx("code",{children:"written by:"}),') and is case-insensitive. Use "Author" for a single writer and "Authors" for multiple. Contact blocks may be multi-line (indent subsequent lines). End the title page with ',d.jsx("code",{children:"==="})," (page break)."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Scene Headings"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["EXT. PARKING LOT - DAY",d.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",d.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),d.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Characters & Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["MENTOR",d.jsx("br",{}),"Welcome to the team!",d.jsx("br",{}),d.jsx("br",{}),"@MENTOR",d.jsx("br",{}),"(power user syntax)",d.jsx("br",{}),d.jsx("br",{}),"USER #1",d.jsx("br",{}),"Thanks for having me.",d.jsx("br",{}),d.jsx("br",{}),"BOB O'SHAUNNESSY",d.jsx("br",{}),"(whispering)",d.jsx("br",{}),"This is a parenthetical."]}),d.jsxs("p",{children:["Characters are normally written in ALL CAPS (e.g., ",d.jsx("code",{children:"BOB"}),", ",d.jsx("code",{children:"DR. SMITH"}),"), but the editor also supports a power-user ",d.jsx("code",{children:"@"})," prefix for mixed-case or unusual names (for example ",d.jsx("code",{children:"@John Doe"}),"). Character matching is Unicode-aware: a character name must start with an uppercase Unicode letter and may contain Unicode letters, numbers, apostrophes (",d.jsx("code",{children:"'"}),"), hyphens (",d.jsx("code",{children:"-"}),"), spaces or tabs. The power-user ",d.jsx("code",{children:"@"})," form (",d.jsx("code",{children:"@Name"}),") allows mixed case and additional punctuation where needed. Parentheticals (for example ",d.jsx("code",{children:"(whispering)"}),") are recognized when placed immediately after a character name and are rendered as parentheticals; the lines that follow are treated as dialogue. For dual dialogue, append ",d.jsx("code",{children:"^"})," to stacked character namesthese must appear consecutively above the dialogue block. Edge cases: the lexer intentionally requires the name to begin with an uppercase Unicode letter to avoid accidental matches inside action text; use the ",d.jsx("code",{children:"@"})," prefix for names that don't follow the all-caps convention or that start with non-letter characters. This supports non-ASCII names (for example: ",d.jsx("strong",{children:"LODIE"}),", ",d.jsx("strong",{children:"UKASZ"}),", ",d.jsx("strong",{children:""}),") and matches uppercase letters across many scripts."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Dual Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["ALICE^",d.jsx("br",{}),"BOB^",d.jsx("br",{}),"CHARLIE^",d.jsx("br",{}),"I can't believe it!",d.jsx("br",{}),d.jsx("br",{}),"CHARLIE ^",d.jsx("br",{}),"DAVE ^",d.jsx("br",{}),"(disgusted)",d.jsx("br",{}),"Eew. no it's nooot!",d.jsx("br",{}),d.jsx("br",{})]}),d.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Action Lines"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Bob walks into the room and looks around nervously.",d.jsx("br",{}),d.jsx("br",{}),"The computer screen flickers to life."]}),d.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Transitions"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["FADE IN:",d.jsx("br",{}),"CUT TO:",d.jsx("br",{}),"FADE TO BLACK.",d.jsx("br",{}),"> CUT TO BLACK."]}),d.jsxs("p",{children:["Transitions control scene changes. The matcher supports a wider set of transition phrases (for example: ",d.jsx("code",{children:"FADE IN:"}),", ",d.jsx("code",{children:"FADE OUT."}),", ",d.jsx("code",{children:"CUT TO:"}),", ",d.jsx("code",{children:"SMASH CUT TO:"}),", ",d.jsx("code",{children:"MATCH CUT TO:"}),", ",d.jsx("code",{children:"DISSOLVE TO:"}),", ",d.jsx("code",{children:"WIPE TO:"}),", ",d.jsx("code",{children:"BACK TO:"}),", and other common variants). Use ",d.jsx("code",{children:">"})," for the power-user transition syntax."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Centered Text"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:[">INTERMISSION<",d.jsx("br",{}),">THE END<"]}),d.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["# Act I",d.jsx("br",{}),"## Scene 1: The Beginning",d.jsx("br",{}),"### Sequence A: Setup",d.jsx("br",{}),"#### Panel 1",d.jsx("br",{}),"02:30",d.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",d.jsx("br",{}),"[a]https://example.com/dialogue.mp3",d.jsx("br",{}),d.jsx("br",{}),"#### Panel 2",d.jsx("br",{}),"01:15",d.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),d.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Notes & Comments"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["[[This is a note for the writer]]",d.jsx("br",{}),d.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),d.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Special Elements"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["= Synopsis: Brief scene description",d.jsx("br",{}),d.jsx("br",{}),"===",d.jsx("br",{}),"(Page Break)",d.jsx("br",{}),d.jsx("br",{}),"~Lyrics:",d.jsx("br",{}),'~"Happy birthday to you"',d.jsx("br",{}),'~"Happy birthday to you"']}),d.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),a&&d.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:d.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Character List"}),d.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:""})]}),d.jsx("div",{className:"modal-body",children:_.length===0?d.jsx("p",{children:"No characters found in the script."}):d.jsx("div",{className:"character-list",children:_.map(S=>d.jsxs("div",{className:"character-item",children:[d.jsx("div",{className:"character-name",children:S}),d.jsxs("div",{className:"character-count",children:[H.get(S)||0," dialogue lines"]})]},S))})})]})})]})}uu.createRoot(document.getElementById("root")).render(d.jsx(w1.StrictMode,{children:d.jsx(Vb,{})}));
