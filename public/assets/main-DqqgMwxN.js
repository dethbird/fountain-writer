import{B as Rt,p as ga,a as a1}from"./chunk-B8u9Xqmg.js";function u1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rm={exports:{}},Ho={},im={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),h1=Symbol.for("react.portal"),c1=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),d1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),Sf=Symbol.iterator;function w1(t){return t===null||typeof t!="object"?null:(t=Sf&&t[Sf]||t["@@iterator"],typeof t=="function"?t:null)}var sm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lm=Object.assign,om={};function xi(t,e,n){this.props=t,this.context=e,this.refs=om,this.updater=n||sm}xi.prototype.isReactComponent={};xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function am(){}am.prototype=xi.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=om,this.updater=n||sm}var Yh=Qh.prototype=new am;Yh.constructor=Qh;lm(Yh,xi.prototype);Yh.isPureReactComponent=!0;var Cf=Array.isArray,um=Object.prototype.hasOwnProperty,Jh={current:null},hm={key:!0,ref:!0,__self:!0,__source:!0};function cm(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)um.call(e,r)&&!hm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Is,type:t,key:s,ref:l,props:i,_owner:Jh.current}}function k1(t,e){return{$$typeof:Is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Is}function S1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bf=/\/+/g;function ya(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S1(""+t.key):e.toString(36)}function Ll(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Is:case h1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+ya(l,0):r,Cf(i)?(n="",t!=null&&(n=t.replace(bf,"$&/")+"/"),Ll(i,e,n,"",function(u){return u})):i!=null&&(Xh(i)&&(i=k1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(bf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Cf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ya(s,o);l+=Ll(s,e,n,a,i)}else if(a=w1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ya(s,o++),l+=Ll(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Ys(t,e,n){if(t==null)return t;var r=[],i=0;return Ll(t,r,"","",function(s){return e.call(n,s,i++)}),r}function C1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},Rl={transition:null},b1={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:Jh};function fm(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Ys,forEach:function(t,e,n){Ys(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ys(t,function(){e++}),e},toArray:function(t){return Ys(t,function(e){return e})||[]},only:function(t){if(!Xh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=xi;q.Fragment=c1;q.Profiler=d1;q.PureComponent=Qh;q.StrictMode=f1;q.Suspense=y1;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;q.act=fm;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Jh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)um.call(e,a)&&!hm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Is,type:t.type,key:i,ref:s,props:r,_owner:l}};q.createContext=function(t){return t={$$typeof:m1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:p1,_context:t},t.Consumer=t};q.createElement=cm;q.createFactory=function(t){var e=cm.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:g1,render:t}};q.isValidElement=Xh;q.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:C1}};q.memo=function(t,e){return{$$typeof:v1,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Rl.transition;Rl.transition={};try{t()}finally{Rl.transition=e}};q.unstable_act=fm;q.useCallback=function(t,e){return Ze.current.useCallback(t,e)};q.useContext=function(t){return Ze.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ze.current.useEffect(t,e)};q.useId=function(){return Ze.current.useId()};q.useImperativeHandle=function(t,e,n){return Ze.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ze.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Ze.current.useReducer(t,e,n)};q.useRef=function(t){return Ze.current.useRef(t)};q.useState=function(t){return Ze.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Ze.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Ze.current.useTransition()};q.version="18.3.1";im.exports=q;var B=im.exports;const A1=u1(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=B,M1=Symbol.for("react.element"),T1=Symbol.for("react.fragment"),N1=Object.prototype.hasOwnProperty,O1=E1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D1={key:!0,ref:!0,__self:!0,__source:!0};function dm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)N1.call(e,r)&&!D1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:M1,type:t,key:s,ref:l,props:i,_owner:O1.current}}Ho.Fragment=T1;Ho.jsx=dm;Ho.jsxs=dm;rm.exports=Ho;var d=rm.exports,fu={},pm={exports:{}},xt={},mm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,_){var I=A.length;A.push(_);e:for(;0<I;){var $=I-1>>>1,K=A[$];if(0<i(K,_))A[$]=_,A[I]=K,I=$;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var _=A[0],I=A.pop();if(I!==_){A[0]=I;e:for(var $=0,K=A.length,Me=K>>>1;$<Me;){var X=2*($+1)-1,_e=A[X],ve=X+1,kt=A[ve];if(0>i(_e,I))ve<K&&0>i(kt,_e)?(A[$]=kt,A[ve]=I,$=ve):(A[$]=_e,A[X]=I,$=X);else if(ve<K&&0>i(kt,I))A[$]=kt,A[ve]=I,$=ve;else break e}}return _}function i(A,_){var I=A.sortIndex-_.sortIndex;return I!==0?I:A.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],h=1,c=null,f=3,p=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=A)r(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function S(A){if(v=!1,x(A),!g)if(n(a)!==null)g=!0,tt(C);else{var _=n(u);_!==null&&ke(S,_.startTime-A)}}function C(A,_){g=!1,v&&(v=!1,m(O),O=-1),p=!0;var I=f;try{for(x(_),c=n(a);c!==null&&(!(c.expirationTime>_)||A&&!W());){var $=c.callback;if(typeof $=="function"){c.callback=null,f=c.priorityLevel;var K=$(c.expirationTime<=_);_=t.unstable_now(),typeof K=="function"?c.callback=K:c===n(a)&&r(a),x(_)}else r(a);c=n(a)}if(c!==null)var Me=!0;else{var X=n(u);X!==null&&ke(S,X.startTime-_),Me=!1}return Me}finally{c=null,f=I,p=!1}}var E=!1,b=null,O=-1,H=5,R=-1;function W(){return!(t.unstable_now()-R<H)}function z(){if(b!==null){var A=t.unstable_now();R=A;var _=!0;try{_=b(!0,A)}finally{_?Q():(E=!1,b=null)}}else E=!1}var Q;if(typeof y=="function")Q=function(){y(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=z,Q=function(){re.postMessage(null)}}else Q=function(){w(z,0)};function tt(A){b=A,E||(E=!0,Q())}function ke(A,_){O=w(function(){A(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,tt(C))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var I=f;f=_;try{return A()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,_){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var I=f;f=A;try{return _()}finally{f=I}},t.unstable_scheduleCallback=function(A,_,I){var $=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?$+I:$):I=$,A){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=I+K,A={id:h++,callback:_,priorityLevel:A,startTime:I,expirationTime:K,sortIndex:-1},I>$?(A.sortIndex=I,e(u,A),n(a)===null&&A===n(u)&&(v?(m(O),O=-1):v=!0,ke(S,I-$))):(A.sortIndex=K,e(a,A),g||p||(g=!0,tt(C))),A},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(A){var _=f;return function(){var I=f;f=_;try{return A.apply(this,arguments)}finally{f=I}}}})(gm);mm.exports=gm;var P1=mm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=B,gt=P1;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ym=new Set,us={};function Tr(t,e){si(t,e),si(t+"Capture",e)}function si(t,e){for(us[t]=e,t=0;t<e.length;t++)ym.add(e[t])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=Object.prototype.hasOwnProperty,R1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Af={},Ef={};function B1(t){return du.call(Ef,t)?!0:du.call(Af,t)?!1:R1.test(t)?Ef[t]=!0:(Af[t]=!0,!1)}function j1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I1(t,e,n,r){if(e===null||typeof e>"u"||j1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function et(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ec(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ec);ze[e]=new et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ec);ze[e]=new et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ec);ze[e]=new et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new et(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new et(t,1,!1,t.toLowerCase(),null,!0,!0)});function tc(t,e,n,r){var i=ze.hasOwnProperty(e)?ze[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I1(e,n,i,r)&&(n=null),r||i===null?B1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cn=L1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Js=Symbol.for("react.element"),Rr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),nc=Symbol.for("react.strict_mode"),pu=Symbol.for("react.profiler"),vm=Symbol.for("react.provider"),xm=Symbol.for("react.context"),rc=Symbol.for("react.forward_ref"),mu=Symbol.for("react.suspense"),gu=Symbol.for("react.suspense_list"),ic=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),wm=Symbol.for("react.offscreen"),Mf=Symbol.iterator;function Mi(t){return t===null||typeof t!="object"?null:(t=Mf&&t[Mf]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,va;function _i(t){if(va===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);va=e&&e[1]||""}return`
`+va+t}var xa=!1;function wa(t,e){if(!t||xa)return"";xa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{xa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_i(t):""}function F1(t){switch(t.tag){case 5:return _i(t.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return t=wa(t.type,!1),t;case 11:return t=wa(t.type.render,!1),t;case 1:return t=wa(t.type,!0),t;default:return""}}function yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Br:return"Fragment";case Rr:return"Portal";case pu:return"Profiler";case nc:return"StrictMode";case mu:return"Suspense";case gu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xm:return(t.displayName||"Context")+".Consumer";case vm:return(t._context.displayName||"Context")+".Provider";case rc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ic:return e=t.displayName||null,e!==null?e:yu(t.type)||"Memo";case En:e=t._payload,t=t._init;try{return yu(t(e))}catch{}}return null}function z1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yu(e);case 8:return e===nc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function km(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _1(t){var e=km(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xs(t){t._valueTracker||(t._valueTracker=_1(t))}function Sm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=km(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vu(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cm(t,e){e=e.checked,e!=null&&tc(t,"checked",e,!1)}function xu(t,e){Cm(t,e);var n=qn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wu(t,e.type,n):e.hasOwnProperty("defaultValue")&&wu(t,e.type,qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wu(t,e,n){(e!=="number"||Xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hi=Array.isArray;function Qr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ku(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Of(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Hi(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qn(n)}}function bm(t,e){var n=qn(e.value),r=qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Df(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Am(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Su(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Am(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zs,Em=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H1=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(t){H1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qi[e]=qi[t]})});function Mm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qi.hasOwnProperty(t)&&qi[t]?(""+e).trim():e+"px"}function Tm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Mm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W1=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cu(t,e){if(e){if(W1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function bu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=null;function sc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eu=null,Yr=null,Jr=null;function Pf(t){if(t=_s(t)){if(typeof Eu!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Ko(e),Eu(t.stateNode,t.type,e))}}function Nm(t){Yr?Jr?Jr.push(t):Jr=[t]:Yr=t}function Om(){if(Yr){var t=Yr,e=Jr;if(Jr=Yr=null,Pf(t),e)for(t=0;t<e.length;t++)Pf(e[t])}}function Dm(t,e){return t(e)}function Pm(){}var ka=!1;function Lm(t,e,n){if(ka)return t(e,n);ka=!0;try{return Dm(t,e,n)}finally{ka=!1,(Yr!==null||Jr!==null)&&(Pm(),Om())}}function cs(t,e){var n=t.stateNode;if(n===null)return null;var r=Ko(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var Mu=!1;if(vn)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){Mu=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{Mu=!1}function V1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Gi=!1,Zl=null,eo=!1,Tu=null,U1={onError:function(t){Gi=!0,Zl=t}};function $1(t,e,n,r,i,s,l,o,a){Gi=!1,Zl=null,V1.apply(U1,arguments)}function K1(t,e,n,r,i,s,l,o,a){if($1.apply(this,arguments),Gi){if(Gi){var u=Zl;Gi=!1,Zl=null}else throw Error(T(198));eo||(eo=!0,Tu=u)}}function Nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lf(t){if(Nr(t)!==t)throw Error(T(188))}function q1(t){var e=t.alternate;if(!e){if(e=Nr(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lf(i),t;if(s===r)return Lf(i),e;s=s.sibling}throw Error(T(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Bm(t){return t=q1(t),t!==null?jm(t):null}function jm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jm(t);if(e!==null)return e;t=t.sibling}return null}var Im=gt.unstable_scheduleCallback,Rf=gt.unstable_cancelCallback,G1=gt.unstable_shouldYield,Q1=gt.unstable_requestPaint,we=gt.unstable_now,Y1=gt.unstable_getCurrentPriorityLevel,lc=gt.unstable_ImmediatePriority,Fm=gt.unstable_UserBlockingPriority,to=gt.unstable_NormalPriority,J1=gt.unstable_LowPriority,zm=gt.unstable_IdlePriority,Wo=null,on=null;function X1(t){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Wo,t,void 0,(t.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:tx,Z1=Math.log,ex=Math.LN2;function tx(t){return t>>>=0,t===0?32:31-(Z1(t)/ex|0)|0}var el=64,tl=4194304;function Wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function no(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Wi(o):(s&=l,s!==0&&(r=Wi(s)))}else l=n&~i,l!==0?r=Wi(l):s!==0&&(r=Wi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_t(e),i=1<<n,r|=t[n],e&=~i;return r}function nx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-_t(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=nx(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Nu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _m(){var t=el;return el<<=1,!(el&4194240)&&(el=64),t}function Sa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_t(e),t[e]=n}function ix(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_t(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function oc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_t(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ne=0;function Hm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wm,ac,Vm,Um,$m,Ou=!1,nl=[],Fn=null,zn=null,_n=null,fs=new Map,ds=new Map,On=[],sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bf(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":fs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(e.pointerId)}}function Ni(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_s(e),e!==null&&ac(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lx(t,e,n,r,i){switch(e){case"focusin":return Fn=Ni(Fn,t,e,n,r,i),!0;case"dragenter":return zn=Ni(zn,t,e,n,r,i),!0;case"mouseover":return _n=Ni(_n,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fs.set(s,Ni(fs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ds.set(s,Ni(ds.get(s)||null,t,e,n,r,i)),!0}return!1}function Km(t){var e=hr(t.target);if(e!==null){var n=Nr(e);if(n!==null){if(e=n.tag,e===13){if(e=Rm(n),e!==null){t.blockedOn=e,$m(t.priority,function(){Vm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Du(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Au=r,n.target.dispatchEvent(r),Au=null}else return e=_s(n),e!==null&&ac(e),t.blockedOn=n,!1;e.shift()}return!0}function jf(t,e,n){Bl(t)&&n.delete(e)}function ox(){Ou=!1,Fn!==null&&Bl(Fn)&&(Fn=null),zn!==null&&Bl(zn)&&(zn=null),_n!==null&&Bl(_n)&&(_n=null),fs.forEach(jf),ds.forEach(jf)}function Oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ou||(Ou=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,ox)))}function ps(t){function e(i){return Oi(i,t)}if(0<nl.length){Oi(nl[0],t);for(var n=1;n<nl.length;n++){var r=nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fn!==null&&Oi(Fn,t),zn!==null&&Oi(zn,t),_n!==null&&Oi(_n,t),fs.forEach(e),ds.forEach(e),n=0;n<On.length;n++)r=On[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)Km(n),n.blockedOn===null&&On.shift()}var Xr=Cn.ReactCurrentBatchConfig,ro=!0;function ax(t,e,n,r){var i=ne,s=Xr.transition;Xr.transition=null;try{ne=1,uc(t,e,n,r)}finally{ne=i,Xr.transition=s}}function ux(t,e,n,r){var i=ne,s=Xr.transition;Xr.transition=null;try{ne=4,uc(t,e,n,r)}finally{ne=i,Xr.transition=s}}function uc(t,e,n,r){if(ro){var i=Du(t,e,n,r);if(i===null)Pa(t,e,r,io,n),Bf(t,r);else if(lx(i,t,e,n,r))r.stopPropagation();else if(Bf(t,r),e&4&&-1<sx.indexOf(t)){for(;i!==null;){var s=_s(i);if(s!==null&&Wm(s),s=Du(t,e,n,r),s===null&&Pa(t,e,r,io,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pa(t,e,r,null,n)}}var io=null;function Du(t,e,n,r){if(io=null,t=sc(r),t=hr(t),t!==null)if(e=Nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return io=t,null}function qm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y1()){case lc:return 1;case Fm:return 4;case to:case J1:return 16;case zm:return 536870912;default:return 16}default:return 16}}var Ln=null,hc=null,jl=null;function Gm(){if(jl)return jl;var t,e=hc,n=e.length,r,i="value"in Ln?Ln.value:Ln.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return jl=i.slice(t,1<r?1-r:void 0)}function Il(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rl(){return!0}function If(){return!1}function wt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rl:If,this.isPropagationStopped=If,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),e}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=wt(wi),zs=ge({},wi,{view:0,detail:0}),hx=wt(zs),Ca,ba,Di,Vo=ge({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(Ca=t.screenX-Di.screenX,ba=t.screenY-Di.screenY):ba=Ca=0,Di=t),Ca)},movementY:function(t){return"movementY"in t?t.movementY:ba}}),Ff=wt(Vo),cx=ge({},Vo,{dataTransfer:0}),fx=wt(cx),dx=ge({},zs,{relatedTarget:0}),Aa=wt(dx),px=ge({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=wt(px),gx=ge({},wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yx=wt(gx),vx=ge({},wi,{data:0}),zf=wt(vx),xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kx[t])?!!e[t]:!1}function fc(){return Sx}var Cx=ge({},zs,{key:function(t){if(t.key){var e=xx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Il(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(t){return t.type==="keypress"?Il(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Il(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bx=wt(Cx),Ax=ge({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=wt(Ax),Ex=ge({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),Mx=wt(Ex),Tx=ge({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nx=wt(Tx),Ox=ge({},Vo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dx=wt(Ox),Px=[9,13,27,32],dc=vn&&"CompositionEvent"in window,Qi=null;vn&&"documentMode"in document&&(Qi=document.documentMode);var Lx=vn&&"TextEvent"in window&&!Qi,Qm=vn&&(!dc||Qi&&8<Qi&&11>=Qi),Hf=" ",Wf=!1;function Ym(t,e){switch(t){case"keyup":return Px.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jr=!1;function Rx(t,e){switch(t){case"compositionend":return Jm(e);case"keypress":return e.which!==32?null:(Wf=!0,Hf);case"textInput":return t=e.data,t===Hf&&Wf?null:t;default:return null}}function Bx(t,e){if(jr)return t==="compositionend"||!dc&&Ym(t,e)?(t=Gm(),jl=hc=Ln=null,jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qm&&e.locale!=="ko"?null:e.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jx[t.type]:e==="textarea"}function Xm(t,e,n,r){Nm(r),e=so(e,"onChange"),0<e.length&&(n=new cc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,ms=null;function Ix(t){ug(t,0)}function Uo(t){var e=zr(t);if(Sm(e))return t}function Fx(t,e){if(t==="change")return e}var Zm=!1;if(vn){var Ea;if(vn){var Ma="oninput"in document;if(!Ma){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Ma=typeof Uf.oninput=="function"}Ea=Ma}else Ea=!1;Zm=Ea&&(!document.documentMode||9<document.documentMode)}function $f(){Yi&&(Yi.detachEvent("onpropertychange",eg),ms=Yi=null)}function eg(t){if(t.propertyName==="value"&&Uo(ms)){var e=[];Xm(e,ms,t,sc(t)),Lm(Ix,e)}}function zx(t,e,n){t==="focusin"?($f(),Yi=e,ms=n,Yi.attachEvent("onpropertychange",eg)):t==="focusout"&&$f()}function _x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uo(ms)}function Hx(t,e){if(t==="click")return Uo(e)}function Wx(t,e){if(t==="input"||t==="change")return Uo(e)}function Vx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:Vx;function gs(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!du.call(e,i)||!Wt(t[i],e[i]))return!1}return!0}function Kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qf(t,e){var n=Kf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kf(n)}}function tg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ng(){for(var t=window,e=Xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xl(t.document)}return e}function pc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ux(t){var e=ng(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tg(n.ownerDocument.documentElement,n)){if(r!==null&&pc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qf(n,s);var l=qf(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $x=vn&&"documentMode"in document&&11>=document.documentMode,Ir=null,Pu=null,Ji=null,Lu=!1;function Gf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lu||Ir==null||Ir!==Xl(r)||(r=Ir,"selectionStart"in r&&pc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&gs(Ji,r)||(Ji=r,r=so(Pu,"onSelect"),0<r.length&&(e=new cc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ir)))}function il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},Ta={},rg={};vn&&(rg=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function $o(t){if(Ta[t])return Ta[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rg)return Ta[t]=e[n];return t}var ig=$o("animationend"),sg=$o("animationiteration"),lg=$o("animationstart"),og=$o("transitionend"),ag=new Map,Qf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(t,e){ag.set(t,e),Tr(e,[t])}for(var Na=0;Na<Qf.length;Na++){var Oa=Qf[Na],Kx=Oa.toLowerCase(),qx=Oa[0].toUpperCase()+Oa.slice(1);tr(Kx,"on"+qx)}tr(ig,"onAnimationEnd");tr(sg,"onAnimationIteration");tr(lg,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(og,"onTransitionEnd");si("onMouseEnter",["mouseout","mouseover"]);si("onMouseLeave",["mouseout","mouseover"]);si("onPointerEnter",["pointerout","pointerover"]);si("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function Yf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K1(r,e,void 0,t),t.currentTarget=null}function ug(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;Yf(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;Yf(i,o,u),s=a}}}if(eo)throw t=Tu,eo=!1,Tu=null,t}function ae(t,e){var n=e[Fu];n===void 0&&(n=e[Fu]=new Set);var r=t+"__bubble";n.has(r)||(hg(e,t,2,!1),n.add(r))}function Da(t,e,n){var r=0;e&&(r|=4),hg(n,t,r,e)}var sl="_reactListening"+Math.random().toString(36).slice(2);function ys(t){if(!t[sl]){t[sl]=!0,ym.forEach(function(n){n!=="selectionchange"&&(Gx.has(n)||Da(n,!1,t),Da(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sl]||(e[sl]=!0,Da("selectionchange",!1,e))}}function hg(t,e,n,r){switch(qm(e)){case 1:var i=ax;break;case 4:i=ux;break;default:i=uc}n=i.bind(null,e,n,t),i=void 0,!Mu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=hr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Lm(function(){var u=s,h=sc(n),c=[];e:{var f=ag.get(t);if(f!==void 0){var p=cc,g=t;switch(t){case"keypress":if(Il(n)===0)break e;case"keydown":case"keyup":p=bx;break;case"focusin":g="focus",p=Aa;break;case"focusout":g="blur",p=Aa;break;case"beforeblur":case"afterblur":p=Aa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Mx;break;case ig:case sg:case lg:p=mx;break;case og:p=Nx;break;case"scroll":p=hx;break;case"wheel":p=Dx;break;case"copy":case"cut":case"paste":p=yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_f}var v=(e&4)!==0,w=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=cs(y,m),S!=null&&v.push(vs(y,S,x)))),w)break;y=y.return}0<v.length&&(f=new p(f,g,null,n,h),c.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Au&&(g=n.relatedTarget||n.fromElement)&&(hr(g)||g[xn]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?hr(g):null,g!==null&&(w=Nr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=Ff,S="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=_f,S="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?f:zr(p),x=g==null?f:zr(g),f=new v(S,y+"leave",p,n,h),f.target=w,f.relatedTarget=x,S=null,hr(h)===u&&(v=new v(m,y+"enter",g,n,h),v.target=x,v.relatedTarget=w,S=v),w=S,p&&g)t:{for(v=p,m=g,y=0,x=v;x;x=Or(x))y++;for(x=0,S=m;S;S=Or(S))x++;for(;0<y-x;)v=Or(v),y--;for(;0<x-y;)m=Or(m),x--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=Or(v),m=Or(m)}v=null}else v=null;p!==null&&Jf(c,f,p,v,!1),g!==null&&w!==null&&Jf(c,w,g,v,!0)}}e:{if(f=u?zr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Fx;else if(Vf(f))if(Zm)C=Wx;else{C=_x;var E=zx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Hx);if(C&&(C=C(t,u))){Xm(c,C,n,h);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&wu(f,"number",f.value)}switch(E=u?zr(u):window,t){case"focusin":(Vf(E)||E.contentEditable==="true")&&(Ir=E,Pu=u,Ji=null);break;case"focusout":Ji=Pu=Ir=null;break;case"mousedown":Lu=!0;break;case"contextmenu":case"mouseup":case"dragend":Lu=!1,Gf(c,n,h);break;case"selectionchange":if($x)break;case"keydown":case"keyup":Gf(c,n,h)}var b;if(dc)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else jr?Ym(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Qm&&n.locale!=="ko"&&(jr||O!=="onCompositionStart"?O==="onCompositionEnd"&&jr&&(b=Gm()):(Ln=h,hc="value"in Ln?Ln.value:Ln.textContent,jr=!0)),E=so(u,O),0<E.length&&(O=new zf(O,t,null,n,h),c.push({event:O,listeners:E}),b?O.data=b:(b=Jm(n),b!==null&&(O.data=b)))),(b=Lx?Rx(t,n):Bx(t,n))&&(u=so(u,"onBeforeInput"),0<u.length&&(h=new zf("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=b))}ug(c,e)})}function vs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function so(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cs(t,n),s!=null&&r.unshift(vs(t,s,i)),s=cs(t,e),s!=null&&r.push(vs(t,s,i))),t=t.return}return r}function Or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=cs(n,s),a!=null&&l.unshift(vs(n,a,o))):i||(a=cs(n,s),a!=null&&l.push(vs(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Qx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function Xf(t){return(typeof t=="string"?t:""+t).replace(Qx,`
`).replace(Yx,"")}function ll(t,e,n){if(e=Xf(e),Xf(t)!==e&&n)throw Error(T(425))}function lo(){}var Ru=null,Bu=null;function ju(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Iu=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,Zf=typeof Promise=="function"?Promise:void 0,Xx=typeof queueMicrotask=="function"?queueMicrotask:typeof Zf<"u"?function(t){return Zf.resolve(null).then(t).catch(Zx)}:Iu;function Zx(t){setTimeout(function(){throw t})}function La(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ps(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ps(e)}function Hn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ed(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ki=Math.random().toString(36).slice(2),tn="__reactFiber$"+ki,xs="__reactProps$"+ki,xn="__reactContainer$"+ki,Fu="__reactEvents$"+ki,ew="__reactListeners$"+ki,tw="__reactHandles$"+ki;function hr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ed(t);t!==null;){if(n=t[tn])return n;t=ed(t)}return e}t=n,n=t.parentNode}return null}function _s(t){return t=t[tn]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Ko(t){return t[xs]||null}var zu=[],_r=-1;function nr(t){return{current:t}}function he(t){0>_r||(t.current=zu[_r],zu[_r]=null,_r--)}function le(t,e){_r++,zu[_r]=t.current,t.current=e}var Gn={},Ge=nr(Gn),st=nr(!1),vr=Gn;function li(t,e){var n=t.type.contextTypes;if(!n)return Gn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function oo(){he(st),he(Ge)}function td(t,e,n){if(Ge.current!==Gn)throw Error(T(168));le(Ge,e),le(st,n)}function cg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(T(108,z1(t)||"Unknown",i));return ge({},n,r)}function ao(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gn,vr=Ge.current,le(Ge,t),le(st,st.current),!0}function nd(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=cg(t,e,vr),r.__reactInternalMemoizedMergedChildContext=t,he(st),he(Ge),le(Ge,t)):he(st),le(st,n)}var cn=null,qo=!1,Ra=!1;function fg(t){cn===null?cn=[t]:cn.push(t)}function nw(t){qo=!0,fg(t)}function rr(){if(!Ra&&cn!==null){Ra=!0;var t=0,e=ne;try{var n=cn;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cn=null,qo=!1}catch(i){throw cn!==null&&(cn=cn.slice(t+1)),Im(lc,rr),i}finally{ne=e,Ra=!1}}return null}var Hr=[],Wr=0,uo=null,ho=0,St=[],Ct=0,xr=null,dn=1,pn="";function or(t,e){Hr[Wr++]=ho,Hr[Wr++]=uo,uo=t,ho=e}function dg(t,e,n){St[Ct++]=dn,St[Ct++]=pn,St[Ct++]=xr,xr=t;var r=dn;t=pn;var i=32-_t(r)-1;r&=~(1<<i),n+=1;var s=32-_t(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,dn=1<<32-_t(e)+i|n<<i|r,pn=s+t}else dn=1<<s|n<<i|r,pn=t}function mc(t){t.return!==null&&(or(t,1),dg(t,1,0))}function gc(t){for(;t===uo;)uo=Hr[--Wr],Hr[Wr]=null,ho=Hr[--Wr],Hr[Wr]=null;for(;t===xr;)xr=St[--Ct],St[Ct]=null,pn=St[--Ct],St[Ct]=null,dn=St[--Ct],St[Ct]=null}var mt=null,pt=null,ce=!1,Ft=null;function pg(t,e){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mt=t,pt=Hn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mt=t,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xr!==null?{id:dn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mt=t,pt=null,!0):!1;default:return!1}}function _u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(ce){var e=pt;if(e){var n=e;if(!rd(t,e)){if(_u(t))throw Error(T(418));e=Hn(n.nextSibling);var r=mt;e&&rd(t,e)?pg(r,n):(t.flags=t.flags&-4097|2,ce=!1,mt=t)}}else{if(_u(t))throw Error(T(418));t.flags=t.flags&-4097|2,ce=!1,mt=t}}}function id(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mt=t}function ol(t){if(t!==mt)return!1;if(!ce)return id(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ju(t.type,t.memoizedProps)),e&&(e=pt)){if(_u(t))throw mg(),Error(T(418));for(;e;)pg(t,e),e=Hn(e.nextSibling)}if(id(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pt=Hn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pt=null}}else pt=mt?Hn(t.stateNode.nextSibling):null;return!0}function mg(){for(var t=pt;t;)t=Hn(t.nextSibling)}function oi(){pt=mt=null,ce=!1}function yc(t){Ft===null?Ft=[t]:Ft.push(t)}var rw=Cn.ReactCurrentBatchConfig;function Pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function al(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sd(t){var e=t._init;return e(t._payload)}function gg(t){function e(m,y){if(t){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=$n(m,y),m.index=0,m.sibling=null,m}function s(m,y,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function l(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,y,x,S){return y===null||y.tag!==6?(y=Ha(x,m.mode,S),y.return=m,y):(y=i(y,x),y.return=m,y)}function a(m,y,x,S){var C=x.type;return C===Br?h(m,y,x.props.children,S,x.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===En&&sd(C)===y.type)?(S=i(y,x.props),S.ref=Pi(m,y,x),S.return=m,S):(S=Ul(x.type,x.key,x.props,null,m.mode,S),S.ref=Pi(m,y,x),S.return=m,S)}function u(m,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Wa(x,m.mode,S),y.return=m,y):(y=i(y,x.children||[]),y.return=m,y)}function h(m,y,x,S,C){return y===null||y.tag!==7?(y=gr(x,m.mode,S,C),y.return=m,y):(y=i(y,x),y.return=m,y)}function c(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ha(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Js:return x=Ul(y.type,y.key,y.props,null,m.mode,x),x.ref=Pi(m,null,y),x.return=m,x;case Rr:return y=Wa(y,m.mode,x),y.return=m,y;case En:var S=y._init;return c(m,S(y._payload),x)}if(Hi(y)||Mi(y))return y=gr(y,m.mode,x,null),y.return=m,y;al(m,y)}return null}function f(m,y,x,S){var C=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:o(m,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Js:return x.key===C?a(m,y,x,S):null;case Rr:return x.key===C?u(m,y,x,S):null;case En:return C=x._init,f(m,y,C(x._payload),S)}if(Hi(x)||Mi(x))return C!==null?null:h(m,y,x,S,null);al(m,x)}return null}function p(m,y,x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,o(y,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Js:return m=m.get(S.key===null?x:S.key)||null,a(y,m,S,C);case Rr:return m=m.get(S.key===null?x:S.key)||null,u(y,m,S,C);case En:var E=S._init;return p(m,y,x,E(S._payload),C)}if(Hi(S)||Mi(S))return m=m.get(x)||null,h(y,m,S,C,null);al(y,S)}return null}function g(m,y,x,S){for(var C=null,E=null,b=y,O=y=0,H=null;b!==null&&O<x.length;O++){b.index>O?(H=b,b=null):H=b.sibling;var R=f(m,b,x[O],S);if(R===null){b===null&&(b=H);break}t&&b&&R.alternate===null&&e(m,b),y=s(R,y,O),E===null?C=R:E.sibling=R,E=R,b=H}if(O===x.length)return n(m,b),ce&&or(m,O),C;if(b===null){for(;O<x.length;O++)b=c(m,x[O],S),b!==null&&(y=s(b,y,O),E===null?C=b:E.sibling=b,E=b);return ce&&or(m,O),C}for(b=r(m,b);O<x.length;O++)H=p(b,m,O,x[O],S),H!==null&&(t&&H.alternate!==null&&b.delete(H.key===null?O:H.key),y=s(H,y,O),E===null?C=H:E.sibling=H,E=H);return t&&b.forEach(function(W){return e(m,W)}),ce&&or(m,O),C}function v(m,y,x,S){var C=Mi(x);if(typeof C!="function")throw Error(T(150));if(x=C.call(x),x==null)throw Error(T(151));for(var E=C=null,b=y,O=y=0,H=null,R=x.next();b!==null&&!R.done;O++,R=x.next()){b.index>O?(H=b,b=null):H=b.sibling;var W=f(m,b,R.value,S);if(W===null){b===null&&(b=H);break}t&&b&&W.alternate===null&&e(m,b),y=s(W,y,O),E===null?C=W:E.sibling=W,E=W,b=H}if(R.done)return n(m,b),ce&&or(m,O),C;if(b===null){for(;!R.done;O++,R=x.next())R=c(m,R.value,S),R!==null&&(y=s(R,y,O),E===null?C=R:E.sibling=R,E=R);return ce&&or(m,O),C}for(b=r(m,b);!R.done;O++,R=x.next())R=p(b,m,O,R.value,S),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?O:R.key),y=s(R,y,O),E===null?C=R:E.sibling=R,E=R);return t&&b.forEach(function(z){return e(m,z)}),ce&&or(m,O),C}function w(m,y,x,S){if(typeof x=="object"&&x!==null&&x.type===Br&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Js:e:{for(var C=x.key,E=y;E!==null;){if(E.key===C){if(C=x.type,C===Br){if(E.tag===7){n(m,E.sibling),y=i(E,x.props.children),y.return=m,m=y;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===En&&sd(C)===E.type){n(m,E.sibling),y=i(E,x.props),y.ref=Pi(m,E,x),y.return=m,m=y;break e}n(m,E);break}else e(m,E);E=E.sibling}x.type===Br?(y=gr(x.props.children,m.mode,S,x.key),y.return=m,m=y):(S=Ul(x.type,x.key,x.props,null,m.mode,S),S.ref=Pi(m,y,x),S.return=m,m=S)}return l(m);case Rr:e:{for(E=x.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(m,y.sibling),y=i(y,x.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=Wa(x,m.mode,S),y.return=m,m=y}return l(m);case En:return E=x._init,w(m,y,E(x._payload),S)}if(Hi(x))return g(m,y,x,S);if(Mi(x))return v(m,y,x,S);al(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,x),y.return=m,m=y):(n(m,y),y=Ha(x,m.mode,S),y.return=m,m=y),l(m)):n(m,y)}return w}var ai=gg(!0),yg=gg(!1),co=nr(null),fo=null,Vr=null,vc=null;function xc(){vc=Vr=fo=null}function wc(t){var e=co.current;he(co),t._currentValue=e}function Wu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zr(t,e){fo=t,vc=Vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if(vc!==t)if(t={context:t,memoizedValue:e,next:null},Vr===null){if(fo===null)throw Error(T(308));Vr=t,fo.dependencies={lanes:0,firstContext:t}}else Vr=Vr.next=t;return e}var cr=null;function kc(t){cr===null?cr=[t]:cr.push(t)}function vg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kc(e)):(n.next=i.next,i.next=n),e.interleaved=n,wn(t,r)}function wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mn=!1;function Sc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wn(t,n)}return i=r.interleaved,i===null?(e.next=e,kc(r)):(e.next=i.next,i.next=e),r.interleaved=e,wn(t,n)}function Fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oc(t,n)}}function ld(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function po(t,e,n,r){var i=t.updateQueue;Mn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;l=0,h=u=a=null,o=s;do{var f=o.lane,p=o.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(f=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){c=g.call(p,c,f);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,c,f):g,f==null)break e;c=ge({},c,f);break e;case 2:Mn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,a=c):h=h.next=p,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);kr|=l,t.lanes=l,t.memoizedState=c}}function od(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(T(191,i));i.call(r)}}}var Hs={},an=nr(Hs),ws=nr(Hs),ks=nr(Hs);function fr(t){if(t===Hs)throw Error(T(174));return t}function Cc(t,e){switch(le(ks,e),le(ws,t),le(an,Hs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Su(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Su(e,t)}he(an),le(an,e)}function ui(){he(an),he(ws),he(ks)}function wg(t){fr(ks.current);var e=fr(an.current),n=Su(e,t.type);e!==n&&(le(ws,t),le(an,n))}function bc(t){ws.current===t&&(he(an),he(ws))}var de=nr(0);function mo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ba=[];function Ac(){for(var t=0;t<Ba.length;t++)Ba[t]._workInProgressVersionPrimary=null;Ba.length=0}var zl=Cn.ReactCurrentDispatcher,ja=Cn.ReactCurrentBatchConfig,wr=0,me=null,be=null,Te=null,go=!1,Xi=!1,Ss=0,iw=0;function We(){throw Error(T(321))}function Ec(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function Mc(t,e,n,r,i,s){if(wr=s,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zl.current=t===null||t.memoizedState===null?aw:uw,t=n(r,i),Xi){s=0;do{if(Xi=!1,Ss=0,25<=s)throw Error(T(301));s+=1,Te=be=null,e.updateQueue=null,zl.current=hw,t=n(r,i)}while(Xi)}if(zl.current=yo,e=be!==null&&be.next!==null,wr=0,Te=be=me=null,go=!1,e)throw Error(T(300));return t}function Tc(){var t=Ss!==0;return Ss=0,t}function en(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?me.memoizedState=Te=t:Te=Te.next=t,Te}function Dt(){if(be===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Te===null?me.memoizedState:Te.next;if(e!==null)Te=e,be=t;else{if(t===null)throw Error(T(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Te===null?me.memoizedState=Te=t:Te=Te.next=t}return Te}function Cs(t,e){return typeof e=="function"?e(t):e}function Ia(t){var e=Dt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var h=u.lane;if((wr&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=c,l=r):a=a.next=c,me.lanes|=h,kr|=h}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Wt(r,e.memoizedState)||(it=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,me.lanes|=s,kr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fa(t){var e=Dt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Wt(s,e.memoizedState)||(it=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kg(){}function Sg(t,e){var n=me,r=Dt(),i=e(),s=!Wt(r.memoizedState,i);if(s&&(r.memoizedState=i,it=!0),r=r.queue,Nc(Ag.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(n.flags|=2048,bs(9,bg.bind(null,n,r,i,e),void 0,null),Oe===null)throw Error(T(349));wr&30||Cg(n,e,i)}return i}function Cg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bg(t,e,n,r){e.value=n,e.getSnapshot=r,Eg(e)&&Mg(t)}function Ag(t,e,n){return n(function(){Eg(e)&&Mg(t)})}function Eg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function Mg(t){var e=wn(t,1);e!==null&&Ht(e,t,1,-1)}function ad(t){var e=en();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=ow.bind(null,me,t),[e.memoizedState,t]}function bs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tg(){return Dt().memoizedState}function _l(t,e,n,r){var i=en();me.flags|=t,i.memoizedState=bs(1|e,n,void 0,r===void 0?null:r)}function Go(t,e,n,r){var i=Dt();r=r===void 0?null:r;var s=void 0;if(be!==null){var l=be.memoizedState;if(s=l.destroy,r!==null&&Ec(r,l.deps)){i.memoizedState=bs(e,n,s,r);return}}me.flags|=t,i.memoizedState=bs(1|e,n,s,r)}function ud(t,e){return _l(8390656,8,t,e)}function Nc(t,e){return Go(2048,8,t,e)}function Ng(t,e){return Go(4,2,t,e)}function Og(t,e){return Go(4,4,t,e)}function Dg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pg(t,e,n){return n=n!=null?n.concat([t]):null,Go(4,4,Dg.bind(null,e,t),n)}function Oc(){}function Lg(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ec(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rg(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ec(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Bg(t,e,n){return wr&21?(Wt(n,e)||(n=_m(),me.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=n)}function sw(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=ja.transition;ja.transition={};try{t(!1),e()}finally{ne=n,ja.transition=r}}function jg(){return Dt().memoizedState}function lw(t,e,n){var r=Un(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ig(t))Fg(e,n);else if(n=vg(t,e,n,r),n!==null){var i=Je();Ht(n,t,r,i),zg(n,e,r)}}function ow(t,e,n){var r=Un(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ig(t))Fg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Wt(o,l)){var a=e.interleaved;a===null?(i.next=i,kc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=vg(t,e,i,r),n!==null&&(i=Je(),Ht(n,t,r,i),zg(n,e,r))}}function Ig(t){var e=t.alternate;return t===me||e!==null&&e===me}function Fg(t,e){Xi=go=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oc(t,n)}}var yo={readContext:Ot,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},aw={readContext:Ot,useCallback:function(t,e){return en().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:ud,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_l(4194308,4,Dg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _l(4194308,4,t,e)},useInsertionEffect:function(t,e){return _l(4,2,t,e)},useMemo:function(t,e){var n=en();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=en();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lw.bind(null,me,t),[r.memoizedState,t]},useRef:function(t){var e=en();return t={current:t},e.memoizedState=t},useState:ad,useDebugValue:Oc,useDeferredValue:function(t){return en().memoizedState=t},useTransition:function(){var t=ad(!1),e=t[0];return t=sw.bind(null,t[1]),en().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=me,i=en();if(ce){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Oe===null)throw Error(T(349));wr&30||Cg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ud(Ag.bind(null,r,s,t),[t]),r.flags|=2048,bs(9,bg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=en(),e=Oe.identifierPrefix;if(ce){var n=pn,r=dn;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ss++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uw={readContext:Ot,useCallback:Lg,useContext:Ot,useEffect:Nc,useImperativeHandle:Pg,useInsertionEffect:Ng,useLayoutEffect:Og,useMemo:Rg,useReducer:Ia,useRef:Tg,useState:function(){return Ia(Cs)},useDebugValue:Oc,useDeferredValue:function(t){var e=Dt();return Bg(e,be.memoizedState,t)},useTransition:function(){var t=Ia(Cs)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:kg,useSyncExternalStore:Sg,useId:jg,unstable_isNewReconciler:!1},hw={readContext:Ot,useCallback:Lg,useContext:Ot,useEffect:Nc,useImperativeHandle:Pg,useInsertionEffect:Ng,useLayoutEffect:Og,useMemo:Rg,useReducer:Fa,useRef:Tg,useState:function(){return Fa(Cs)},useDebugValue:Oc,useDeferredValue:function(t){var e=Dt();return be===null?e.memoizedState=t:Bg(e,be.memoizedState,t)},useTransition:function(){var t=Fa(Cs)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:kg,useSyncExternalStore:Sg,useId:jg,unstable_isNewReconciler:!1};function jt(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qo={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Je(),i=Un(t),s=mn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Wn(t,s,i),e!==null&&(Ht(e,t,i,r),Fl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Je(),i=Un(t),s=mn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wn(t,s,i),e!==null&&(Ht(e,t,i,r),Fl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Je(),r=Un(t),i=mn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wn(t,i,r),e!==null&&(Ht(e,t,r,n),Fl(e,t,r))}};function hd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!gs(n,r)||!gs(i,s):!0}function _g(t,e,n){var r=!1,i=Gn,s=e.contextType;return typeof s=="object"&&s!==null?s=Ot(s):(i=lt(e)?vr:Ge.current,r=e.contextTypes,s=(r=r!=null)?li(t,i):Gn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qo.enqueueReplaceState(e,e.state,null)}function Uu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Sc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ot(s):(s=lt(e)?vr:Ge.current,i.context=li(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qo.enqueueReplaceState(i,i.state,null),po(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,e){try{var n="",r=e;do n+=F1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function za(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $u(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cw=typeof WeakMap=="function"?WeakMap:Map;function Hg(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xo||(xo=!0,th=r),$u(t,e)},n}function Wg(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$u(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$u(t,e),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function fd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Aw.bind(null,t,e,n),e.then(t,t))}function dd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,Wn(n,e,1))),n.lanes|=1),t)}var fw=Cn.ReactCurrentOwner,it=!1;function Ye(t,e,n,r){e.child=t===null?yg(e,null,n,r):ai(e,t.child,n,r)}function md(t,e,n,r,i){n=n.render;var s=e.ref;return Zr(e,i),r=Mc(t,e,n,r,s,i),n=Tc(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(ce&&n&&mc(e),e.flags|=1,Ye(t,e,r,i),e.child)}function gd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Vg(t,e,s,r,i)):(t=Ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:gs,n(l,r)&&t.ref===e.ref)return kn(t,e,i)}return e.flags|=1,t=$n(s,r),t.ref=e.ref,t.return=e,e.child=t}function Vg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(gs(s,r)&&t.ref===e.ref)if(it=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,kn(t,e,i)}return Ku(t,e,n,r,i)}function Ug(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le($r,ct),ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le($r,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,le($r,ct),ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,le($r,ct),ct|=r;return Ye(t,e,i,n),e.child}function $g(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ku(t,e,n,r,i){var s=lt(n)?vr:Ge.current;return s=li(e,s),Zr(e,i),n=Mc(t,e,n,r,s,i),r=Tc(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(ce&&r&&mc(e),e.flags|=1,Ye(t,e,n,i),e.child)}function yd(t,e,n,r,i){if(lt(n)){var s=!0;ao(e)}else s=!1;if(Zr(e,i),e.stateNode===null)Hl(t,e),_g(e,n,r),Uu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=lt(n)?vr:Ge.current,u=li(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&cd(e,l,r,u),Mn=!1;var f=e.memoizedState;l.state=f,po(e,r,l,i),a=e.memoizedState,o!==r||f!==a||st.current||Mn?(typeof h=="function"&&(Vu(e,n,h,r),a=e.memoizedState),(o=Mn||hd(e,n,o,r,f,a,u))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,xg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:jt(e.type,o),l.props=u,c=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ot(a):(a=lt(n)?vr:Ge.current,a=li(e,a));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==c||f!==a)&&cd(e,l,r,a),Mn=!1,f=e.memoizedState,l.state=f,po(e,r,l,i);var g=e.memoizedState;o!==c||f!==g||st.current||Mn?(typeof p=="function"&&(Vu(e,n,p,r),g=e.memoizedState),(u=Mn||hd(e,n,u,r,f,g,a)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return qu(t,e,n,r,s,i)}function qu(t,e,n,r,i,s){$g(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&nd(e,n,!1),kn(t,e,s);r=e.stateNode,fw.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ai(e,t.child,null,s),e.child=ai(e,null,o,s)):Ye(t,e,o,s),e.memoizedState=r.state,i&&nd(e,n,!0),e.child}function Kg(t){var e=t.stateNode;e.pendingContext?td(t,e.pendingContext,e.pendingContext!==e.context):e.context&&td(t,e.context,!1),Cc(t,e.containerInfo)}function vd(t,e,n,r,i){return oi(),yc(i),e.flags|=256,Ye(t,e,n,r),e.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Qu(t){return{baseLanes:t,cachePool:null,transitions:null}}function qg(t,e,n){var r=e.pendingProps,i=de.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),le(de,i&1),t===null)return Hu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Xo(l,r,0,null),t=gr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qu(n),e.memoizedState=Gu,t):Dc(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return dw(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=$n(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=$n(o,s):(s=gr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Qu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Gu,r}return s=t.child,t=s.sibling,r=$n(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dc(t,e){return e=Xo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ul(t,e,n,r){return r!==null&&yc(r),ai(e,t.child,null,n),t=Dc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dw(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=za(Error(T(422))),ul(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Xo({mode:"visible",children:r.children},i,0,null),s=gr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ai(e,t.child,null,l),e.child.memoizedState=Qu(l),e.memoizedState=Gu,s);if(!(e.mode&1))return ul(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(T(419)),r=za(s,r,void 0),ul(t,e,l,r)}if(o=(l&t.childLanes)!==0,it||o){if(r=Oe,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wn(t,i),Ht(r,t,i,-1))}return Ic(),r=za(Error(T(421))),ul(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ew.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pt=Hn(i.nextSibling),mt=e,ce=!0,Ft=null,t!==null&&(St[Ct++]=dn,St[Ct++]=pn,St[Ct++]=xr,dn=t.id,pn=t.overflow,xr=e),e=Dc(e,r.children),e.flags|=4096,e)}function xd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wu(t.return,e,n)}function _a(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ye(t,e,r.children,n),r=de.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xd(t,n,e);else if(t.tag===19)xd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(de,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_a(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_a(e,!0,n,null,s);break;case"together":_a(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pw(t,e,n){switch(e.tag){case 3:Kg(e),oi();break;case 5:wg(e);break;case 1:lt(e.type)&&ao(e);break;case 4:Cc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;le(co,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(de,de.current&1),e.flags|=128,null):n&e.child.childLanes?qg(t,e,n):(le(de,de.current&1),t=kn(t,e,n),t!==null?t.sibling:null);le(de,de.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),le(de,de.current),r)break;return null;case 22:case 23:return e.lanes=0,Ug(t,e,n)}return kn(t,e,n)}var Qg,Yu,Yg,Jg;Qg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yu=function(){};Yg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fr(an.current);var s=null;switch(n){case"input":i=vu(t,i),r=vu(t,r),s=[];break;case"select":i=ge({},i,{value:void 0}),r=ge({},r,{value:void 0}),s=[];break;case"textarea":i=ku(t,i),r=ku(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lo)}Cu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(us.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(us.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ae("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Jg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Li(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mw(t,e,n){var r=e.pendingProps;switch(gc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(e),null;case 1:return lt(e.type)&&oo(),Ve(e),null;case 3:return r=e.stateNode,ui(),he(st),he(Ge),Ac(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(ih(Ft),Ft=null))),Yu(t,e),Ve(e),null;case 5:bc(e);var i=fr(ks.current);if(n=e.type,t!==null&&e.stateNode!=null)Yg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return Ve(e),null}if(t=fr(an.current),ol(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tn]=e,r[xs]=s,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(i=0;i<Vi.length;i++)ae(Vi[i],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":Tf(r,s),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ae("invalid",r);break;case"textarea":Of(r,s),ae("invalid",r)}Cu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&ll(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ll(r.textContent,o,t),i=["children",""+o]):us.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ae("scroll",r)}switch(n){case"input":Xs(r),Nf(r,s,!0);break;case"textarea":Xs(r),Df(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Am(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[tn]=e,t[xs]=r,Qg(t,e,!1,!1),e.stateNode=t;e:{switch(l=bu(n,r),n){case"dialog":ae("cancel",t),ae("close",t),i=r;break;case"iframe":case"object":case"embed":ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Vi.length;i++)ae(Vi[i],t);i=r;break;case"source":ae("error",t),i=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),i=r;break;case"details":ae("toggle",t),i=r;break;case"input":Tf(t,r),i=vu(t,r),ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ge({},r,{value:void 0}),ae("invalid",t);break;case"textarea":Of(t,r),i=ku(t,r),ae("invalid",t);break;default:i=r}Cu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Tm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Em(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&hs(t,a):typeof a=="number"&&hs(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(us.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ae("scroll",t):a!=null&&tc(t,s,a,l))}switch(n){case"input":Xs(t),Nf(t,r,!1);break;case"textarea":Xs(t),Df(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ve(e),null;case 6:if(t&&e.stateNode!=null)Jg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=fr(ks.current),fr(an.current),ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(s=r.nodeValue!==n)&&(t=mt,t!==null))switch(t.tag){case 3:ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ll(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return Ve(e),null;case 13:if(he(de),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&pt!==null&&e.mode&1&&!(e.flags&128))mg(),oi(),e.flags|=98560,s=!1;else if(s=ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[tn]=e}else oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ve(e),s=!1}else Ft!==null&&(ih(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?Ae===0&&(Ae=3):Ic())),e.updateQueue!==null&&(e.flags|=4),Ve(e),null);case 4:return ui(),Yu(t,e),t===null&&ys(e.stateNode.containerInfo),Ve(e),null;case 10:return wc(e.type._context),Ve(e),null;case 17:return lt(e.type)&&oo(),Ve(e),null;case 19:if(he(de),s=e.memoizedState,s===null)return Ve(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Li(s,!1);else{if(Ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=mo(t),l!==null){for(e.flags|=128,Li(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(de,de.current&1|2),e.child}t=t.sibling}s.tail!==null&&we()>ci&&(e.flags|=128,r=!0,Li(s,!1),e.lanes=4194304)}else{if(!r)if(t=mo(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Li(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!ce)return Ve(e),null}else 2*we()-s.renderingStartTime>ci&&n!==1073741824&&(e.flags|=128,r=!0,Li(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=we(),e.sibling=null,n=de.current,le(de,r?n&1|2:n&1),e):(Ve(e),null);case 22:case 23:return jc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ct&1073741824&&(Ve(e),e.subtreeFlags&6&&(e.flags|=8192)):Ve(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function gw(t,e){switch(gc(e),e.tag){case 1:return lt(e.type)&&oo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ui(),he(st),he(Ge),Ac(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bc(e),null;case 13:if(he(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(de),null;case 4:return ui(),null;case 10:return wc(e.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var hl=!1,$e=!1,yw=typeof WeakSet=="function"?WeakSet:Set,L=null;function Ur(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(t,e,r)}else n.current=null}function Ju(t,e,n){try{n()}catch(r){ye(t,e,r)}}var wd=!1;function vw(t,e){if(Ru=ro,t=ng(),pc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,h=0,c=t,f=null;t:for(;;){for(var p;c!==n||i!==0&&c.nodeType!==3||(o=l+i),c!==s||r!==0&&c.nodeType!==3||(a=l+r),c.nodeType===3&&(l+=c.nodeValue.length),(p=c.firstChild)!==null;)f=c,c=p;for(;;){if(c===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++h===r&&(a=l),(p=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=p}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bu={focusedElem:t,selectionRange:n},ro=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:jt(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(S){ye(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return g=wd,wd=!1,g}function Zi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ju(e,n,s)}i=i.next}while(i!==r)}}function Yo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xg(t){var e=t.alternate;e!==null&&(t.alternate=null,Xg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[xs],delete e[Fu],delete e[ew],delete e[tw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zg(t){return t.tag===5||t.tag===3||t.tag===4}function kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lo));else if(r!==4&&(t=t.child,t!==null))for(Zu(t,e,n),t=t.sibling;t!==null;)Zu(t,e,n),t=t.sibling}function eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eh(t,e,n),t=t.sibling;t!==null;)eh(t,e,n),t=t.sibling}var De=null,It=!1;function An(t,e,n){for(n=n.child;n!==null;)e0(t,e,n),n=n.sibling}function e0(t,e,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Wo,n)}catch{}switch(n.tag){case 5:$e||Ur(n,e);case 6:var r=De,i=It;De=null,An(t,e,n),De=r,It=i,De!==null&&(It?(t=De,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(It?(t=De,n=n.stateNode,t.nodeType===8?La(t.parentNode,n):t.nodeType===1&&La(t,n),ps(t)):La(De,n.stateNode));break;case 4:r=De,i=It,De=n.stateNode.containerInfo,It=!0,An(t,e,n),De=r,It=i;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Ju(n,e,l),i=i.next}while(i!==r)}An(t,e,n);break;case 1:if(!$e&&(Ur(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ye(n,e,o)}An(t,e,n);break;case 21:An(t,e,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,An(t,e,n),$e=r):An(t,e,n);break;default:An(t,e,n)}}function Sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yw),e.forEach(function(r){var i=Mw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:De=o.stateNode,It=!1;break e;case 3:De=o.stateNode.containerInfo,It=!0;break e;case 4:De=o.stateNode.containerInfo,It=!0;break e}o=o.return}if(De===null)throw Error(T(160));e0(s,l,i),De=null,It=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ye(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t0(e,t),e=e.sibling}function t0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Qt(t),r&4){try{Zi(3,t,t.return),Yo(3,t)}catch(v){ye(t,t.return,v)}try{Zi(5,t,t.return)}catch(v){ye(t,t.return,v)}}break;case 1:Bt(e,t),Qt(t),r&512&&n!==null&&Ur(n,n.return);break;case 5:if(Bt(e,t),Qt(t),r&512&&n!==null&&Ur(n,n.return),t.flags&32){var i=t.stateNode;try{hs(i,"")}catch(v){ye(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Cm(i,s),bu(o,l);var u=bu(o,s);for(l=0;l<a.length;l+=2){var h=a[l],c=a[l+1];h==="style"?Tm(i,c):h==="dangerouslySetInnerHTML"?Em(i,c):h==="children"?hs(i,c):tc(i,h,c,u)}switch(o){case"input":xu(i,s);break;case"textarea":bm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Qr(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Qr(i,!!s.multiple,s.defaultValue,!0):Qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[xs]=s}catch(v){ye(t,t.return,v)}}break;case 6:if(Bt(e,t),Qt(t),r&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ye(t,t.return,v)}}break;case 3:if(Bt(e,t),Qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ps(e.containerInfo)}catch(v){ye(t,t.return,v)}break;case 4:Bt(e,t),Qt(t);break;case 13:Bt(e,t),Qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rc=we())),r&4&&Sd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?($e=(u=$e)||h,Bt(e,t),$e=u):Bt(e,t),Qt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(L=t,h=t.child;h!==null;){for(c=L=h;L!==null;){switch(f=L,p=f.child,f.tag){case 0:case 11:case 14:case 15:Zi(4,f,f.return);break;case 1:Ur(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){ye(r,n,v)}}break;case 5:Ur(f,f.return);break;case 22:if(f.memoizedState!==null){bd(c);continue}}p!==null?(p.return=f,L=p):bd(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,a=c.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Mm("display",l))}catch(v){ye(t,t.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){ye(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Bt(e,t),Qt(t),r&4&&Sd(t);break;case 21:break;default:Bt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zg(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hs(i,""),r.flags&=-33);var s=kd(t);eh(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=kd(t);Zu(t,o,l);break;default:throw Error(T(161))}}catch(a){ye(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xw(t,e,n){L=t,n0(t)}function n0(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||hl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||$e;o=hl;var u=$e;if(hl=l,($e=a)&&!u)for(L=i;L!==null;)l=L,a=l.child,l.tag===22&&l.memoizedState!==null?Ad(i):a!==null?(a.return=l,L=a):Ad(i);for(;s!==null;)L=s,n0(s),s=s.sibling;L=i,hl=o,$e=u}Cd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):Cd(t)}}function Cd(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$e||Yo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$e)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&od(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}od(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&ps(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}$e||e.flags&512&&Xu(e)}catch(f){ye(e,e.return,f)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function bd(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function Ad(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yo(4,e)}catch(a){ye(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ye(e,i,a)}}var s=e.return;try{Xu(e)}catch(a){ye(e,s,a)}break;case 5:var l=e.return;try{Xu(e)}catch(a){ye(e,l,a)}}}catch(a){ye(e,e.return,a)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var ww=Math.ceil,vo=Cn.ReactCurrentDispatcher,Pc=Cn.ReactCurrentOwner,Et=Cn.ReactCurrentBatchConfig,J=0,Oe=null,Ce=null,Fe=0,ct=0,$r=nr(0),Ae=0,As=null,kr=0,Jo=0,Lc=0,es=null,nt=null,Rc=0,ci=1/0,hn=null,xo=!1,th=null,Vn=null,cl=!1,Rn=null,wo=0,ts=0,nh=null,Wl=-1,Vl=0;function Je(){return J&6?we():Wl!==-1?Wl:Wl=we()}function Un(t){return t.mode&1?J&2&&Fe!==0?Fe&-Fe:rw.transition!==null?(Vl===0&&(Vl=_m()),Vl):(t=ne,t!==0||(t=window.event,t=t===void 0?16:qm(t.type)),t):1}function Ht(t,e,n,r){if(50<ts)throw ts=0,nh=null,Error(T(185));Fs(t,n,r),(!(J&2)||t!==Oe)&&(t===Oe&&(!(J&2)&&(Jo|=n),Ae===4&&Dn(t,Fe)),ot(t,r),n===1&&J===0&&!(e.mode&1)&&(ci=we()+500,qo&&rr()))}function ot(t,e){var n=t.callbackNode;rx(t,e);var r=no(t,t===Oe?Fe:0);if(r===0)n!==null&&Rf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rf(n),e===1)t.tag===0?nw(Ed.bind(null,t)):fg(Ed.bind(null,t)),Xx(function(){!(J&6)&&rr()}),n=null;else{switch(Hm(r)){case 1:n=lc;break;case 4:n=Fm;break;case 16:n=to;break;case 536870912:n=zm;break;default:n=to}n=h0(n,r0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r0(t,e){if(Wl=-1,Vl=0,J&6)throw Error(T(327));var n=t.callbackNode;if(ei()&&t.callbackNode!==n)return null;var r=no(t,t===Oe?Fe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ko(t,r);else{e=r;var i=J;J|=2;var s=s0();(Oe!==t||Fe!==e)&&(hn=null,ci=we()+500,mr(t,e));do try{Cw();break}catch(o){i0(t,o)}while(!0);xc(),vo.current=s,J=i,Ce!==null?e=0:(Oe=null,Fe=0,e=Ae)}if(e!==0){if(e===2&&(i=Nu(t),i!==0&&(r=i,e=rh(t,i))),e===1)throw n=As,mr(t,0),Dn(t,r),ot(t,we()),n;if(e===6)Dn(t,r);else{if(i=t.current.alternate,!(r&30)&&!kw(i)&&(e=ko(t,r),e===2&&(s=Nu(t),s!==0&&(r=s,e=rh(t,s))),e===1))throw n=As,mr(t,0),Dn(t,r),ot(t,we()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:ar(t,nt,hn);break;case 3:if(Dn(t,r),(r&130023424)===r&&(e=Rc+500-we(),10<e)){if(no(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Je(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Iu(ar.bind(null,t,nt,hn),e);break}ar(t,nt,hn);break;case 4:if(Dn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-_t(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ww(r/1960))-r,10<r){t.timeoutHandle=Iu(ar.bind(null,t,nt,hn),r);break}ar(t,nt,hn);break;case 5:ar(t,nt,hn);break;default:throw Error(T(329))}}}return ot(t,we()),t.callbackNode===n?r0.bind(null,t):null}function rh(t,e){var n=es;return t.current.memoizedState.isDehydrated&&(mr(t,e).flags|=256),t=ko(t,e),t!==2&&(e=nt,nt=n,e!==null&&ih(e)),t}function ih(t){nt===null?nt=t:nt.push.apply(nt,t)}function kw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dn(t,e){for(e&=~Lc,e&=~Jo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_t(e),r=1<<n;t[n]=-1,e&=~r}}function Ed(t){if(J&6)throw Error(T(327));ei();var e=no(t,0);if(!(e&1))return ot(t,we()),null;var n=ko(t,e);if(t.tag!==0&&n===2){var r=Nu(t);r!==0&&(e=r,n=rh(t,r))}if(n===1)throw n=As,mr(t,0),Dn(t,e),ot(t,we()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ar(t,nt,hn),ot(t,we()),null}function Bc(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(ci=we()+500,qo&&rr())}}function Sr(t){Rn!==null&&Rn.tag===0&&!(J&6)&&ei();var e=J;J|=1;var n=Et.transition,r=ne;try{if(Et.transition=null,ne=1,t)return t()}finally{ne=r,Et.transition=n,J=e,!(J&6)&&rr()}}function jc(){ct=$r.current,he($r)}function mr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jx(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(gc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oo();break;case 3:ui(),he(st),he(Ge),Ac();break;case 5:bc(r);break;case 4:ui();break;case 13:he(de);break;case 19:he(de);break;case 10:wc(r.type._context);break;case 22:case 23:jc()}n=n.return}if(Oe=t,Ce=t=$n(t.current,null),Fe=ct=e,Ae=0,As=null,Lc=Jo=kr=0,nt=es=null,cr!==null){for(e=0;e<cr.length;e++)if(n=cr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}cr=null}return t}function i0(t,e){do{var n=Ce;try{if(xc(),zl.current=yo,go){for(var r=me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}go=!1}if(wr=0,Te=be=me=null,Xi=!1,Ss=0,Pc.current=null,n===null||n.return===null){Ae=1,As=e,Ce=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=Fe,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=dd(l);if(p!==null){p.flags&=-257,pd(p,l,o,s,e),p.mode&1&&fd(s,u,e),e=p,a=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(a),e.updateQueue=v}else g.add(a);break e}else{if(!(e&1)){fd(s,u,e),Ic();break e}a=Error(T(426))}}else if(ce&&o.mode&1){var w=dd(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),pd(w,l,o,s,e),yc(hi(a,o));break e}}s=a=hi(a,o),Ae!==4&&(Ae=2),es===null?es=[s]:es.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Hg(s,a,e);ld(s,m);break e;case 1:o=a;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Vn===null||!Vn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Wg(s,o,e);ld(s,S);break e}}s=s.return}while(s!==null)}o0(n)}catch(C){e=C,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function s0(){var t=vo.current;return vo.current=yo,t===null?yo:t}function Ic(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Oe===null||!(kr&268435455)&&!(Jo&268435455)||Dn(Oe,Fe)}function ko(t,e){var n=J;J|=2;var r=s0();(Oe!==t||Fe!==e)&&(hn=null,mr(t,e));do try{Sw();break}catch(i){i0(t,i)}while(!0);if(xc(),J=n,vo.current=r,Ce!==null)throw Error(T(261));return Oe=null,Fe=0,Ae}function Sw(){for(;Ce!==null;)l0(Ce)}function Cw(){for(;Ce!==null&&!G1();)l0(Ce)}function l0(t){var e=u0(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?o0(t):Ce=e,Pc.current=null}function o0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gw(n,e),n!==null){n.flags&=32767,Ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ae=6,Ce=null;return}}else if(n=mw(n,e,ct),n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);Ae===0&&(Ae=5)}function ar(t,e,n){var r=ne,i=Et.transition;try{Et.transition=null,ne=1,bw(t,e,n,r)}finally{Et.transition=i,ne=r}return null}function bw(t,e,n,r){do ei();while(Rn!==null);if(J&6)throw Error(T(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ix(t,s),t===Oe&&(Ce=Oe=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cl||(cl=!0,h0(to,function(){return ei(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Et.transition,Et.transition=null;var l=ne;ne=1;var o=J;J|=4,Pc.current=null,vw(t,n),t0(n,t),Ux(Bu),ro=!!Ru,Bu=Ru=null,t.current=n,xw(n),Q1(),J=o,ne=l,Et.transition=s}else t.current=n;if(cl&&(cl=!1,Rn=t,wo=i),s=t.pendingLanes,s===0&&(Vn=null),X1(n.stateNode),ot(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xo)throw xo=!1,t=th,th=null,t;return wo&1&&t.tag!==0&&ei(),s=t.pendingLanes,s&1?t===nh?ts++:(ts=0,nh=t):ts=0,rr(),null}function ei(){if(Rn!==null){var t=Hm(wo),e=Et.transition,n=ne;try{if(Et.transition=null,ne=16>t?16:t,Rn===null)var r=!1;else{if(t=Rn,Rn=null,wo=0,J&6)throw Error(T(331));var i=J;for(J|=4,L=t.current;L!==null;){var s=L,l=s.child;if(L.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(L=u;L!==null;){var h=L;switch(h.tag){case 0:case 11:case 15:Zi(8,h,s)}var c=h.child;if(c!==null)c.return=h,L=c;else for(;L!==null;){h=L;var f=h.sibling,p=h.return;if(Xg(h),h===u){L=null;break}if(f!==null){f.return=p,L=f;break}L=p}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}L=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,L=l;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,L=m;break e}L=s.return}}var y=t.current;for(L=y;L!==null;){l=L;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,L=x;else e:for(l=y;L!==null;){if(o=L,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yo(9,o)}}catch(C){ye(o,o.return,C)}if(o===l){L=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,L=S;break e}L=o.return}}if(J=i,rr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Wo,t)}catch{}r=!0}return r}finally{ne=n,Et.transition=e}}return!1}function Md(t,e,n){e=hi(n,e),e=Hg(t,e,1),t=Wn(t,e,1),e=Je(),t!==null&&(Fs(t,1,e),ot(t,e))}function ye(t,e,n){if(t.tag===3)Md(t,t,n);else for(;e!==null;){if(e.tag===3){Md(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){t=hi(n,t),t=Wg(e,t,1),e=Wn(e,t,1),t=Je(),e!==null&&(Fs(e,1,t),ot(e,t));break}}e=e.return}}function Aw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Je(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&(Fe&n)===n&&(Ae===4||Ae===3&&(Fe&130023424)===Fe&&500>we()-Rc?mr(t,0):Lc|=n),ot(t,e)}function a0(t,e){e===0&&(t.mode&1?(e=tl,tl<<=1,!(tl&130023424)&&(tl=4194304)):e=1);var n=Je();t=wn(t,e),t!==null&&(Fs(t,e,n),ot(t,n))}function Ew(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a0(t,n)}function Mw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),a0(t,n)}var u0;u0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)it=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return it=!1,pw(t,e,n);it=!!(t.flags&131072)}else it=!1,ce&&e.flags&1048576&&dg(e,ho,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hl(t,e),t=e.pendingProps;var i=li(e,Ge.current);Zr(e,n),i=Mc(null,e,r,t,i,n);var s=Tc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(r)?(s=!0,ao(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sc(e),i.updater=Qo,e.stateNode=i,i._reactInternals=e,Uu(e,r,t,n),e=qu(null,e,r,!0,s,n)):(e.tag=0,ce&&s&&mc(e),Ye(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Nw(r),t=jt(r,t),i){case 0:e=Ku(null,e,r,t,n);break e;case 1:e=yd(null,e,r,t,n);break e;case 11:e=md(null,e,r,t,n);break e;case 14:e=gd(null,e,r,jt(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Ku(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),yd(t,e,r,i,n);case 3:e:{if(Kg(e),t===null)throw Error(T(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xg(t,e),po(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hi(Error(T(423)),e),e=vd(t,e,r,n,i);break e}else if(r!==i){i=hi(Error(T(424)),e),e=vd(t,e,r,n,i);break e}else for(pt=Hn(e.stateNode.containerInfo.firstChild),mt=e,ce=!0,Ft=null,n=yg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oi(),r===i){e=kn(t,e,n);break e}Ye(t,e,r,n)}e=e.child}return e;case 5:return wg(e),t===null&&Hu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,ju(r,i)?l=null:s!==null&&ju(r,s)&&(e.flags|=32),$g(t,e),Ye(t,e,l,n),e.child;case 6:return t===null&&Hu(e),null;case 13:return qg(t,e,n);case 4:return Cc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ai(e,null,r,n):Ye(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),md(t,e,r,i,n);case 7:return Ye(t,e,e.pendingProps,n),e.child;case 8:return Ye(t,e,e.pendingProps.children,n),e.child;case 12:return Ye(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,le(co,r._currentValue),r._currentValue=l,s!==null)if(Wt(s.value,l)){if(s.children===i.children&&!st.current){e=kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=mn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Wu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(T(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Wu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Ye(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zr(e,n),i=Ot(i),r=r(i),e.flags|=1,Ye(t,e,r,n),e.child;case 14:return r=e.type,i=jt(r,e.pendingProps),i=jt(r.type,i),gd(t,e,r,i,n);case 15:return Vg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Hl(t,e),e.tag=1,lt(r)?(t=!0,ao(e)):t=!1,Zr(e,n),_g(e,r,i),Uu(e,r,i,n),qu(null,e,r,!0,t,n);case 19:return Gg(t,e,n);case 22:return Ug(t,e,n)}throw Error(T(156,e.tag))};function h0(t,e){return Im(t,e)}function Tw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,e,n,r){return new Tw(t,e,n,r)}function Fc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nw(t){if(typeof t=="function")return Fc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rc)return 11;if(t===ic)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=At(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Fc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Br:return gr(n.children,i,s,e);case nc:l=8,i|=8;break;case pu:return t=At(12,n,e,i|2),t.elementType=pu,t.lanes=s,t;case mu:return t=At(13,n,e,i),t.elementType=mu,t.lanes=s,t;case gu:return t=At(19,n,e,i),t.elementType=gu,t.lanes=s,t;case wm:return Xo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vm:l=10;break e;case xm:l=9;break e;case rc:l=11;break e;case ic:l=14;break e;case En:l=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=At(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function gr(t,e,n,r){return t=At(7,t,r,e),t.lanes=n,t}function Xo(t,e,n,r){return t=At(22,t,r,e),t.elementType=wm,t.lanes=n,t.stateNode={isHidden:!1},t}function Ha(t,e,n){return t=At(6,t,null,e),t.lanes=n,t}function Wa(t,e,n){return e=At(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ow(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(t,e,n,r,i,s,l,o,a){return t=new Ow(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=At(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sc(s),t}function Dw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function c0(t){if(!t)return Gn;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(lt(n))return cg(t,n,e)}return e}function f0(t,e,n,r,i,s,l,o,a){return t=zc(n,r,!0,t,i,s,l,o,a),t.context=c0(null),n=t.current,r=Je(),i=Un(n),s=mn(r,i),s.callback=e??null,Wn(n,s,i),t.current.lanes=i,Fs(t,i,r),ot(t,r),t}function Zo(t,e,n,r){var i=e.current,s=Je(),l=Un(i);return n=c0(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wn(i,e,l),t!==null&&(Ht(t,i,l,s),Fl(t,i,l)),l}function So(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Td(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _c(t,e){Td(t,e),(t=t.alternate)&&Td(t,e)}function Pw(){return null}var d0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hc(t){this._internalRoot=t}ea.prototype.render=Hc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Zo(t,e,null,null)};ea.prototype.unmount=Hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sr(function(){Zo(null,t,null,null)}),e[xn]=null}};function ea(t){this._internalRoot=t}ea.prototype.unstable_scheduleHydration=function(t){if(t){var e=Um();t={blockedOn:null,target:t,priority:e};for(var n=0;n<On.length&&e!==0&&e<On[n].priority;n++);On.splice(n,0,t),n===0&&Km(t)}};function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ta(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nd(){}function Lw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=So(l);s.call(u)}}var l=f0(e,r,t,0,null,!1,!1,"",Nd);return t._reactRootContainer=l,t[xn]=l.current,ys(t.nodeType===8?t.parentNode:t),Sr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=So(a);o.call(u)}}var a=zc(t,0,!1,null,null,!1,!1,"",Nd);return t._reactRootContainer=a,t[xn]=a.current,ys(t.nodeType===8?t.parentNode:t),Sr(function(){Zo(e,a,n,r)}),a}function na(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=So(l);o.call(a)}}Zo(e,l,t,i)}else l=Lw(n,e,t,i,r);return So(l)}Wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wi(e.pendingLanes);n!==0&&(oc(e,n|1),ot(e,we()),!(J&6)&&(ci=we()+500,rr()))}break;case 13:Sr(function(){var r=wn(t,1);if(r!==null){var i=Je();Ht(r,t,1,i)}}),_c(t,1)}};ac=function(t){if(t.tag===13){var e=wn(t,134217728);if(e!==null){var n=Je();Ht(e,t,134217728,n)}_c(t,134217728)}};Vm=function(t){if(t.tag===13){var e=Un(t),n=wn(t,e);if(n!==null){var r=Je();Ht(n,t,e,r)}_c(t,e)}};Um=function(){return ne};$m=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};Eu=function(t,e,n){switch(e){case"input":if(xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ko(r);if(!i)throw Error(T(90));Sm(r),xu(r,i)}}}break;case"textarea":bm(t,n);break;case"select":e=n.value,e!=null&&Qr(t,!!n.multiple,e,!1)}};Dm=Bc;Pm=Sr;var Rw={usingClientEntryPoint:!1,Events:[_s,zr,Ko,Nm,Om,Bc]},Ri={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bw={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bm(t),t===null?null:t.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||Pw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{Wo=fl.inject(Bw),on=fl}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wc(e))throw Error(T(200));return Dw(t,e,null,n)};xt.createRoot=function(t,e){if(!Wc(t))throw Error(T(299));var n=!1,r="",i=d0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zc(t,1,!1,null,null,n,!1,r,i),t[xn]=e.current,ys(t.nodeType===8?t.parentNode:t),new Hc(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Bm(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Sr(t)};xt.hydrate=function(t,e,n){if(!ta(e))throw Error(T(200));return na(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!Wc(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=d0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=f0(e,null,t,1,n??null,i,!1,s,l),t[xn]=e.current,ys(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ea(e)};xt.render=function(t,e,n){if(!ta(e))throw Error(T(200));return na(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!ta(t))throw Error(T(40));return t._reactRootContainer?(Sr(function(){na(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1};xt.unstable_batchedUpdates=Bc;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ta(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return na(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function p0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p0)}catch(t){console.error(t)}}p0(),pm.exports=xt;var jw=pm.exports,Od=jw;fu.createRoot=Od.createRoot,fu.hydrateRoot=Od.hydrateRoot;let sh=[],m0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?m0:sh).push(n=n+t[e])})();function Iw(t){if(t<768)return!1;for(let e=0,n=sh.length;;){let r=e+n>>1;if(t<sh[r])n=r;else if(t>=m0[r])e=r+1;else return!0;if(e==n)return!1}}function Dd(t){return t>=127462&&t<=127487}const Pd=8205;function Fw(t,e,n=!0,r=!0){return(n?g0:zw)(t,e,r)}function g0(t,e,n){if(e==t.length)return e;e&&y0(t.charCodeAt(e))&&v0(t.charCodeAt(e-1))&&e--;let r=Va(t,e);for(e+=Ld(r);e<t.length;){let i=Va(t,e);if(r==Pd||i==Pd||n&&Iw(i))e+=Ld(i),r=i;else if(Dd(i)){let s=0,l=e-2;for(;l>=0&&Dd(Va(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function zw(t,e,n){for(;e>0;){let r=g0(t,e-2,n);if(r<e)return r;e--}return 0}function Va(t,e){let n=t.charCodeAt(e);if(!v0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return y0(r)?(n-55296<<10)+(r-56320)+65536:n}function y0(t){return t>=56320&&t<57344}function v0(t){return t>=55296&&t<56320}function Ld(t){return t<65536?1:2}class Y{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=fi(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),nn.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=fi(this,e,n);let r=[];return this.decompose(e,n,r,0),nn.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ns(this),s=new ns(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new ns(this,e)}iterRange(e,n=this.length){return new x0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new w0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Y.empty:e.length<=32?new xe(e):nn.from(xe.split(e,[]))}}class xe extends Y{constructor(e,n=_w(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new Hw(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new xe(Rd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=$l(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new xe(o,l.length+s.length));else{let a=o.length>>1;r.push(new xe(o.slice(0,a)),new xe(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof xe))return super.replace(e,n,r);[e,n]=fi(this,e,n);let i=$l(this.text,$l(r.text,Rd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new xe(i,s):nn.from(xe.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=fi(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new xe(r,i)),r=[],i=-1);return i>-1&&n.push(new xe(r,i)),n}}class nn extends Y{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=fi(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let h=this.children.slice();return h[i]=a,new nn(h,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=fi(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof nn))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let g of e)g.flatten(p);return new xe(p,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,h=[];function c(p){let g;if(p.lines>s&&p instanceof nn)for(let v of p.children)c(v);else p.lines>l&&(a>l||!a)?(f(),o.push(p)):p instanceof xe&&a&&(g=h[h.length-1])instanceof xe&&p.lines+g.lines<=32?(a+=p.lines,u+=p.length+1,h[h.length-1]=new xe(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>i&&f(),a+=p.lines,u+=p.length+1,h.push(p))}function f(){a!=0&&(o.push(h.length==1?h[0]:nn.from(h,u)),u=-1,a=h.length=0)}for(let p of e)c(p);return f(),o.length==1?o[0]:new nn(o,n)}}Y.empty=new xe([""],0);function _w(t){let e=-1;for(let n of t)e+=n.length+1;return e}function $l(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Rd(t,e,n){return $l(t,[""],e,n)}class ns{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof xe?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof xe?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof xe){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof xe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class x0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ns(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class w0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Y.prototype[Symbol.iterator]=function(){return this.iter()},ns.prototype[Symbol.iterator]=x0.prototype[Symbol.iterator]=w0.prototype[Symbol.iterator]=function(){return this});class Hw{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function fi(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function je(t,e,n=!0,r=!0){return Fw(t,e,n,r)}function Ww(t){return t>=56320&&t<57344}function Vw(t){return t>=55296&&t<56320}function k0(t,e){let n=t.charCodeAt(e);if(!Vw(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Ww(r)?(n-55296<<10)+(r-56320)+65536:n}function Uw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function S0(t){return t<65536?1:2}const lh=/\r\n?|\n/;var dt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(dt||(dt={}));class gn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){oh(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new gn(e)}composeDesc(e){return this.empty?e:e.empty?this:C0(this,e)}mapDesc(e,n=!1){return e.empty?this:ah(this,e,n)}mapPos(e,n=-1,r=dt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=dt.Simple&&u>=e&&(r==dt.TrackDel&&i<e&&u>e||r==dt.TrackBefore&&i<e||r==dt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new gn(e)}static create(e){return new gn(e)}}class Ne extends gn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return oh(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return ah(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(Y.empty);r.push(l?e.slice(s,s+l):Y.empty)}s+=l}return new Ne(n,r)}compose(e){return this.empty?e:e.empty?this:C0(this,e,!0)}map(e,n=!1){return e.empty?this:ah(this,e,n,!0)}iterChanges(e,n=!1){oh(this,e,n)}get desc(){return gn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Es(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-o);Ue(i,h,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;Ue(n,h,c),c>0&&Bn(r,n,s.text),s.forward(h),o+=h}let u=e[l++];for(;o<u;){if(s.done)break e;let h=Math.min(s.len,u-o);Ue(n,h,-1),Ue(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),o+=h}}return{changes:new Ne(n,r),filtered:gn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(h=!1){if(!h&&!i.length)return;l<n&&Ue(i,n-l,-1);let c=new Ne(i,s);o=o?o.compose(c.map(o)):c,i=[],s=[],l=0}function u(h){if(Array.isArray(h))for(let c of h)u(c);else if(h instanceof Ne){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);a(),o=o?o.compose(h.map(o)):h}else{let{from:c,to:f=c,insert:p}=h;if(c>f||c<0||f>n)throw new RangeError(`Invalid change range ${c} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?Y.of(p.split(r||lh)):p:Y.empty,v=g.length;if(c==f&&v==0)return;c<l&&a(),c>l&&Ue(i,c-l,-1),Ue(i,f-c,v),Bn(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Ne(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Y.empty);r[i]=Y.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ne(n,r)}static createSet(e,n){return new Ne(e,n)}}function Ue(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Bn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Y.empty);t.push(n)}}function oh(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,h=s,c=Y.empty;for(;u+=o,h+=a,a&&r&&(c=c.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,h,c),i=u,s=h}}}function ah(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Es(t),o=new Es(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Ue(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Ue(i,o.ins,-1);u;){let h=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=h&&(Ue(i,0,l.ins),s&&Bn(s,i,l.text),a=l.i),l.forward(h),u-=h}o.next()}else if(l.ins>=0){let u=0,h=l.len;for(;h;)if(o.ins==-1){let c=Math.min(h,o.len);u+=c,h-=c,o.forward(c)}else if(o.ins==0&&o.len<h)h-=o.len,o.next();else break;Ue(i,u,a<l.i?l.ins:0),s&&a<l.i&&Bn(s,i,l.text),a=l.i,l.forward(l.len-h)}else{if(l.done&&o.done)return s?Ne.createSet(i,s):gn.create(i);throw new Error("Mismatched change set lengths")}}}function C0(t,e,n=!1){let r=[],i=n?[]:null,s=new Es(t),l=new Es(e);for(let o=!1;;){if(s.done&&l.done)return i?Ne.createSet(r,i):gn.create(r);if(s.ins==0)Ue(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ue(r,0,l.ins,o),i&&Bn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let h=l.ins==-1?-1:l.off?0:l.ins;Ue(r,a,h,o),i&&h&&Bn(i,r,l.text)}else l.ins==-1?(Ue(r,s.off?0:s.len,a,o),i&&Bn(i,r,s.textBit(a))):(Ue(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Bn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Es{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Y.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Y.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class dr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new dr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return M.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return M.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return M.range(e.anchor,e.head)}static create(e,n,r){return new dr(e,n,r)}}class M{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:M.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new M([this.main],0)}addRange(e,n=!0){return M.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,M.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new M(e.ranges.map(n=>dr.fromJSON(n)),e.main)}static single(e,n=e){return new M([M.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return M.normalized(e.slice(),n);r=s.to}return new M(e,n)}static cursor(e,n=0,r,i){return dr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?dr.create(n,e,48|s):dr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?M.range(a,o):M.range(o,a))}}return new M(e,n)}}function b0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Vc=0;class F{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Vc++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new F(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Uc),!!e.static,e.enables)}of(e){return new Kl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Uc(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Kl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Vc++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,h=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?u=!0:((n=e[c.id])!==null&&n!==void 0?n:1)&1||h.push(e[c.id]);return{create(c){return c.values[l]=r(c),1},update(c,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||uh(c,h)){let p=r(c);if(o?!Bd(p,c.values[l],i):!i(p,c.values[l]))return c.values[l]=p,1}return 0},reconfigure:(c,f)=>{let p,g=f.config.address[s];if(g!=null){let v=bo(f,g);if(this.dependencies.every(w=>w instanceof F?f.facet(w)===c.facet(w):w instanceof $t?f.field(w,!1)==c.field(w,!1):!0)||(o?Bd(p=r(c),v,i):i(p=r(c),v)))return c.values[l]=v,0}else p=r(c);return c.values[l]=p,1}}}}function Bd(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function uh(t,e){let n=!1;for(let r of e)rs(t,r)&1&&(n=!0);return n}function $w(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let h=0;h<r.length;h++){let c=bo(a,r[h]);if(i[h]==2)for(let f of c)u.push(f);else u.push(c)}return e.combine(u)}return{create(a){for(let u of r)rs(a,u);return a.values[l]=o(a),1},update(a,u){if(!uh(a,s))return 0;let h=o(a);return e.compare(h,a.values[l])?0:(a.values[l]=h,1)},reconfigure(a,u){let h=uh(a,r),c=u.config.facets[e.id],f=u.facet(e);if(c&&!h&&Uc(n,c))return a.values[l]=f,0;let p=o(a);return e.compare(p,f)?(a.values[l]=f,0):(a.values[l]=p,1)}}}const dl=F.define({static:!0});class $t{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new $t(Vc++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(dl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(dl),l=i.facet(dl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,dl.of({field:this,create:e})]}get extension(){return this}}const ur={lowest:4,low:3,default:2,high:1,highest:0};function Bi(t){return e=>new A0(e,t)}const ra={highest:Bi(ur.highest),high:Bi(ur.high),default:Bi(ur.default),low:Bi(ur.low),lowest:Bi(ur.lowest)};class A0{constructor(e,n){this.inner=e,this.prec=n}}class ia{of(e){return new hh(this,e)}reconfigure(e){return ia.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class hh{constructor(e,n){this.compartment=e,this.inner=n}}class Co{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of Kw(e,n,l))f instanceof $t?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(p=>f.slot(p));let h=r==null?void 0:r.config.facets;for(let f in s){let p=s[f],g=p[0].facet,v=h&&h[f]||[];if(p.every(w=>w.type==0))if(o[g.id]=a.length<<1|1,Uc(v,p))a.push(r.facet(g));else{let w=g.combine(p.map(m=>m.value));a.push(r&&g.compare(w,r.facet(g))?r.facet(g):w)}else{for(let w of p)w.type==0?(o[w.id]=a.length<<1|1,a.push(w.value)):(o[w.id]=u.length<<1,u.push(m=>w.dynamicSlot(m)));o[g.id]=u.length<<1,u.push(w=>$w(w,g,p))}}let c=u.map(f=>f(o));return new Co(e,l,c,o,a,s)}}function Kw(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof hh&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof hh){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof A0)s(l.inner,l.prec);else if(l instanceof $t)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof Kl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,ur.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,ur.default),r.reduce((l,o)=>l.concat(o))}function rs(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function bo(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const E0=F.define(),ch=F.define({combine:t=>t.some(e=>e),static:!0}),M0=F.define({combine:t=>t.length?t[0]:void 0,static:!0}),T0=F.define(),N0=F.define(),O0=F.define(),D0=F.define({combine:t=>t.length?t[0]:!1});class Si{constructor(e,n){this.type=e,this.value=n}static define(){return new qw}}class qw{of(e){return new Si(this,e)}}class Gw{constructor(e){this.map=e}of(e){return new oe(this,e)}}class oe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new oe(this.type,n)}is(e){return this.type==e}static define(e={}){return new Gw(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}oe.reconfigure=oe.define();oe.appendConfig=oe.define();class qe{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&b0(r,n.newLength),s.some(o=>o.type==qe.time)||(this.annotations=s.concat(qe.time.of(Date.now())))}static create(e,n,r,i,s,l){return new qe(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(qe.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}qe.time=Si.define();qe.userEvent=Si.define();qe.addToHistory=Si.define();qe.remote=Si.define();function Qw(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function P0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Ne.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:oe.mapEffects(t.effects,i).concat(oe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function fh(t,e,n){let r=e.selection,i=ti(e.annotations);return e.userEvent&&(i=i.concat(qe.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ne?e.changes:Ne.of(e.changes||[],n,t.facet(M0)),selection:r&&(r instanceof M?r:M.single(r.anchor,r.head)),effects:ti(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function L0(t,e,n){let r=fh(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=P0(r,fh(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=qe.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Jw(n?Yw(i):i)}function Yw(t){let e=t.startState,n=!0;for(let i of e.facet(T0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Qw(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ne.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=qe.create(e,i,t.selection&&t.selection.map(s),oe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(N0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof qe?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof qe?t=s[0]:t=L0(e,ti(s),!1)}return t}function Jw(t){let e=t.startState,n=e.facet(O0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=P0(r,fh(e,s,t.changes.newLength),!0))}return r==t?t:qe.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Xw=[];function ti(t){return t==null?Xw:Array.isArray(t)?t:[t]}var Ie=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Ie||(Ie={}));const Zw=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let dh;try{dh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ek(t){if(dh)return dh.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Zw.test(n)))return!0}return!1}function tk(t){return e=>{if(!/\S/.test(e))return Ie.Space;if(ek(e))return Ie.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Ie.Word;return Ie.Other}}class Z{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)rs(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return rs(this,r),bo(this,r)}update(...e){return L0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(ia.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(oe.reconfigure)?(n=null,r=o.value):o.is(oe.appendConfig)&&(n=null,r=ti(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Co.resolve(r,i,this),s=new Z(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(ch)?e.newSelection:e.newSelection.asSingle();new Z(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:M.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=ti(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),h=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(h);let c=i.mapDesc(u,!0);s.push(a.range.map(c)),i=i.compose(h),l=oe.mapEffects(l,h).concat(oe.mapEffects(ti(a.effects),c))}return{changes:i,selection:M.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Ne?e:Ne.of(e,this.doc.length,this.facet(Z.lineSeparator))}toText(e){return Y.of(e.split(this.facet(Z.lineSeparator)||lh))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(rs(this,n),bo(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof $t&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return Z.create({doc:e.doc,selection:M.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Co.resolve(e.extensions||[],new Map),r=e.doc instanceof Y?e.doc:Y.of((e.doc||"").split(n.staticFacet(Z.lineSeparator)||lh)),i=e.selection?e.selection instanceof M?e.selection:M.single(e.selection.anchor,e.selection.head):M.single(0);return b0(i,r.length),n.staticFacet(ch)||(i=i.asSingle()),new Z(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(Z.tabSize)}get lineBreak(){return this.facet(Z.lineSeparator)||`
`}get readOnly(){return this.facet(D0)}phrase(e,...n){for(let r of this.facet(Z.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(E0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return tk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=je(n,l,!1);if(s(n.slice(a,l))!=Ie.Word)break;l=a}for(;o<i;){let a=je(n,o);if(s(n.slice(o,a))!=Ie.Word)break;o=a}return l==o?null:M.range(l+r,o+r)}}Z.allowMultipleSelections=ch;Z.tabSize=F.define({combine:t=>t.length?t[0]:4});Z.lineSeparator=M0;Z.readOnly=D0;Z.phrases=F.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Z.languageData=E0;Z.changeFilter=T0;Z.transactionFilter=N0;Z.transactionExtender=O0;ia.reconfigure=oe.define();function sa(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class di{eq(e){return this==e}range(e,n=e){return ph.create(e,n,this)}}di.prototype.startSide=di.prototype.endSide=0;di.prototype.point=!1;di.prototype.mapMode=dt.TrackDel;let ph=class R0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new R0(e,n,r)}};function mh(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class $c{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],h=this.from[a]+e,c=this.to[a]+e,f,p;if(h==c){let g=n.mapPos(h,u.startSide,u.mapMode);if(g==null||(f=p=g,u.startSide!=u.endSide&&(p=n.mapPos(h,u.endSide),p<f)))continue}else if(f=n.mapPos(h,u.startSide),p=n.mapPos(c,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,p-f)),r.push(u),i.push(f-l),s.push(p-l))}return{mapped:r.length?new $c(i,s,r,o):null,pos:l}}}class te{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new te(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(mh)),this.isEmpty)return n.length?te.of(n):this;let o=new B0(this,null,-1).goto(0),a=0,u=[],h=new Cr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let c=n[a++];h.addInner(c.from,c.to,c.value)||u.push(c)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||u.push(ph.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?te.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:h,pos:c}=a.map(o,e);h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(c))}}let s=this.nextLayer.map(e);return n.length==0?s:new te(r,n,s||te.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Ms.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ms.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),o=n.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=jd(l,o,r),u=new ji(l,a,s),h=new ji(o,a,s);r.iterGaps((c,f,p)=>Id(u,c,h,f,p,i)),r.empty&&r.length==0&&Id(u,0,h,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),l=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=jd(s,l),a=new ji(s,o,0).goto(r),u=new ji(l,o,0).goto(r);for(;;){if(a.to!=u.to||!gh(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new ji(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let h=l.activeForPoint(l.to),c=l.pointFrom<n?h.length+1:l.point.startSide<0?h.length:Math.min(h.length,a);i.point(o,u,l.point,h,c,l.pointRank),a=Math.min(l.openEnd(u),h.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Cr;for(let i of e instanceof ph?[e]:n?nk(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return te.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=te.empty;i=i.nextLayer)n=new te(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}te.empty=new te([],[],null,-1);function nk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(mh(e,r)>0)return t.slice().sort(mh);e=r}return t}te.empty.nextLayer=te.empty;class Cr{finishChunk(e){this.chunks.push(new $c(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Cr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function jd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class B0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ms{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new B0(l,n,r,s));return i.length==1?i[0]:new Ms(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ua(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ua(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ua(this.heap,0)}}}function Ua(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class ji{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ms.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){pl(this.active,e),pl(this.activeTo,e),pl(this.activeRank,e),this.minActive=Fd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;ml(this.active,n,r),ml(this.activeTo,n,i),ml(this.activeRank,n,s),e&&ml(e,n,this.cursor.from),this.minActive=Fd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&pl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Id(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,h=u||t.endSide-n.endSide,c=h<0?t.to+a:n.to,f=Math.min(c,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&gh(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!gh(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),c>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(c),o=c,h<=0&&t.next(),h>=0&&n.next()}}function gh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function pl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function ml(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Fd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function la(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=je(t,i));return r}function rk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=je(t,i)}return t.length}const yh="",zd=typeof Symbol>"u"?"__"+yh:Symbol.for(yh),vh=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Qn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let h=[],c=/^@(\w+)\b/.exec(l[0]),f=c&&c[1]=="keyframes";if(c&&o==null)return a.push(l[0]+";");for(let p in o){let g=o[p];if(/&/.test(p))s(p.split(/,\s*/).map(v=>l.map(w=>v.replace(/&/,w))).reduce((v,w)=>v.concat(w)),g,a);else if(g&&typeof g=="object"){if(!c)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),g,h,f)}else g!=null&&h.push(p.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+g+";")}(h.length||f)&&a.push((r&&!c&&!u?l.map(r):l).join(", ")+" {"+h.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_d[zd]||1;return _d[zd]=e+1,yh+e.toString(36)}static mount(e,n,r){let i=e[vh],s=r&&r.nonce;i?s&&i.setNonce(s):i=new ik(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Hd=new Map;class ik{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Hd.get(r);if(s)return e[vh]=s;this.sheet=new i.CSSStyleSheet,Hd.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[vh]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Yn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ts={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sk=typeof navigator<"u"&&/Mac/.test(navigator.platform),lk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Re=0;Re<10;Re++)Yn[48+Re]=Yn[96+Re]=String(Re);for(var Re=1;Re<=24;Re++)Yn[Re+111]="F"+Re;for(var Re=65;Re<=90;Re++)Yn[Re]=String.fromCharCode(Re+32),Ts[Re]=String.fromCharCode(Re);for(var $a in Yn)Ts.hasOwnProperty($a)||(Ts[$a]=Yn[$a]);function ok(t){var e=sk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||lk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ts:Yn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Pe(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)j0(t,arguments[e]);return t}function j0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)j0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ns(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function xh(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function ql(t,e){if(!e.anchorNode)return!1;try{return xh(t,e.anchorNode)}catch{return!1}}function Os(t){return t.nodeType==3?Ar(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function is(t,e,n,r){return n?Wd(t,e,n,r,-1)||Wd(t,e,n,r,1):!1}function br(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Ao(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Wd(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:un(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=br(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?un(t):0}else return!1}}function un(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function oa(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function ak(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function I0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function uk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let h=t,c=!1;h&&!c;)if(h.nodeType==1){let f,p=h==a.body,g=1,v=1;if(p)f=ak(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(c=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let y=h.getBoundingClientRect();({scaleX:g,scaleY:v}=I0(h,y)),f={left:y.left,right:y.left+h.clientWidth*g,top:y.top,bottom:y.top+h.clientHeight*v}}let w=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+l),n>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+l,n<0&&e.top-m<f.top&&(m=e.top-(f.top+l)));else{let y=e.bottom-e.top,x=f.bottom-f.top;m=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-x+l)-f.top}if(r=="nearest"?e.left<f.left?(w=e.left-(f.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=e.left-(f.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||m)if(p)u.scrollBy(w,m);else{let y=0,x=0;if(m){let S=h.scrollTop;h.scrollTop+=m/v,x=(h.scrollTop-S)*v}if(w){let S=h.scrollLeft;h.scrollLeft+=w/g,y=(h.scrollLeft-S)*g}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-w)<1&&(r="nearest"),x&&Math.abs(x-m)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function hk(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class ck{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?un(n):0),r,Math.min(e.focusOffset,r?un(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Dr=null;function F0(t){if(t.setActive)return t.setActive();if(Dr)return t.focus(Dr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Dr==null?{get preventScroll(){return Dr={preventScroll:!0},!0}}:void 0),!Dr){Dr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Vd;function Ar(t,e,n=e){let r=Vd||(Vd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function ni(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function fk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function z0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function dk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,un(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=un(n))}else{if(n==t)return!0;r=br(n),n=n.parentNode}}function _0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function H0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=un(n)}else if(n.parentNode&&!Ao(n))r=br(n),n=n.parentNode;else return null}}function W0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Ao(n))r=br(n)+1,n=n.parentNode;else return null}}class Ke{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ke(e.parentNode,br(e),n)}static after(e,n){return new Ke(e.parentNode,br(e)+1,n)}}const Kc=[];class se{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=se.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=Ud(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Ud(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=un(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!se.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,h=r;a<this.children.length;a++){let c=this.children[a],f=u+c.length;if(u<e&&f>n)return c.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&c.dom.parentNode==this.dom){l=a,o=h;break}h=f,u=f+c.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Kc){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new V0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}se.prototype.breakAfter=0;function Ud(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class V0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function U0(t,e,n,r,i,s,l,o,a){let{children:u}=t,h=u.length?u[e]:null,c=s.length?s[s.length-1]:null,f=c?c.breakAfter:l;if(!(e==r&&h&&!l&&!f&&s.length<2&&h.merge(n,i,s.length?c:null,n==0,o,a))){if(r<u.length){let p=u[r];p&&(i<p.length||p.breakAfter&&(c!=null&&c.breakAfter))?(e==r&&(p=p.split(i),i=0),!f&&c&&p.merge(0,i,c,!0,0,a)?s[s.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),s.push(p))):p!=null&&p.breakAfter&&(c?c.breakAfter=1:l=1),r++}for(h&&(h.breakAfter=l,n>0&&(!l&&s.length&&h.merge(n,h.length,s[0],!1,o,0)?h.breakAfter=s.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function $0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:h}=l.findPos(e,-1),c=e-n;for(let f of r)c+=f.length;t.length+=c,U0(t,u,h,o,a,r,0,i,s)}let rt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},wh=typeof document<"u"?document:{documentElement:{style:{}}};const kh=/Edge\/(\d+)/.exec(rt.userAgent),K0=/MSIE \d/.test(rt.userAgent),Sh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt.userAgent),aa=!!(K0||Sh||kh),$d=!aa&&/gecko\/(\d+)/i.test(rt.userAgent),Ka=!aa&&/Chrome\/(\d+)/.exec(rt.userAgent),pk="webkitFontSmoothing"in wh.documentElement.style,q0=!aa&&/Apple Computer/.test(rt.vendor),Kd=q0&&(/Mobile\/\w+/.test(rt.userAgent)||rt.maxTouchPoints>2);var P={mac:Kd||/Mac/.test(rt.platform),windows:/Win/.test(rt.platform),linux:/Linux|X11/.test(rt.platform),ie:aa,ie_version:K0?wh.documentMode||6:Sh?+Sh[1]:kh?+kh[1]:0,gecko:$d,gecko_version:$d?+(/Firefox\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,chrome:!!Ka,chrome_version:Ka?+Ka[1]:0,ios:Kd,android:/Android\b/.test(rt.userAgent),safari:q0,webkit_version:pk?+(/\bAppleWebKit\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,tabSize:wh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const mk=256;class Vt extends se{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Vt)||this.length-(n-e)+r.length>mk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Vt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Ke(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return gk(this.dom,e,n)}}class Sn extends se{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(z0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof Sn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:($0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Sn(this.mark,n,l)}domAtPos(e){return G0(this,e)}coordsAt(e,n){return Y0(this,e,n)}}function gk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?P.chrome||P.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Ar(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return P.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?oa(a,l<0):a||null}class pr extends se{static create(e,n,r){return new pr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=pr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof pr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof pr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Y.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Y.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ke.before(this.dom):Ke.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return oa(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class pi extends se{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof pi&&e.side==this.side}split(){return new pi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ke.before(this.dom):Ke.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Y.empty}get isHidden(){return!0}}Vt.prototype.children=pr.prototype.children=pi.prototype.children=Kc;function G0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Ke(n,0)}function Q0(t,e,n){let r,{children:i}=t;n>0&&e instanceof Sn&&i.length&&(r=i[i.length-1])instanceof Sn&&r.mark.eq(e.mark)?Q0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function Y0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,h){for(let c=0,f=0;c<u.children.length&&f<=h;c++){let p=u.children[c],g=f+p.length;g>=h&&(p.children.length?o(p,h-f):(!s||s.isHidden&&(n>0||vk(s,p)))&&(g>h||f==g&&p.getSide()>0)?(s=p,l=h-f):(f<h||f==g&&p.getSide()<0&&!p.isHidden)&&(r=p,i=h-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):yk(t)}function yk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Os(e);return n[n.length-1]||null}function vk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Ch(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const qd=Object.create(null);function Eo(t,e,n){if(t==e)return!0;t||(t=qd),e||(e=qd);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function bh(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function xk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Ws{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Mt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Mt||(Mt={}));class U extends di{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Vs(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Jn(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=J0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Jn(e,r,i,n,e.widget||null,!0)}static line(e){return new Us(e)}static set(e,n=!1){return te.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}U.none=te.empty;class Vs extends U{constructor(e){let{start:n,end:r}=J0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Vs&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Eo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Vs.prototype.point=!1;class Us extends U{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Us&&this.spec.class==e.spec.class&&Eo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Us.prototype.mapMode=dt.TrackBefore;Us.prototype.point=!0;class Jn extends U{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?dt.TrackBefore:dt.TrackAfter:dt.TrackDel}get type(){return this.startSide!=this.endSide?Mt.WidgetRange:this.startSide<=0?Mt.WidgetBefore:Mt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Jn&&wk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Jn.prototype.point=!0;function J0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function wk(t,e){return t==e||!!(t&&e&&t.compare(e))}function Gl(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Se extends se{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Se))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),$0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Se;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Eo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Q0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Ch(n,this.attrs||{})),r&&(this.attrs=Ch({class:r},this.attrs||{}))}domAtPos(e){return G0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(z0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(bh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&se.get(i)instanceof Sn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=se.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!P.ios||!this.children.some(s=>s instanceof Vt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Vt)||/[^ -~]/.test(r.text))return null;let i=Os(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=Y0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Se&&this.children.length==0&&e.children.length==0&&Eo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Se)return s;if(l>n)break}i=l+s.breakAfter}return null}}class yn extends se{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof yn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Ke.before(this.dom):Ke.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new yn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Kc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Y.empty}domBoundsAround(){return null}become(e){return e instanceof yn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Ah?null:oa(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Ah extends Ws{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ss{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof yn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Se),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(gl(new pi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof yn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(gl(new Vt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Jn){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Jn)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new yn(r.widget||mi.block,o,r));else{let a=pr.create(r.widget||mi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),h=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(gl(new pi(1),i),s),s=i.length+Math.max(0,s-i.length)),c.append(gl(a,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new ss(e,n,r,s);return l.openEnd=te.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function gl(t,e){for(let n of e)t=new Sn(n,[t],t.length);return t}class mi extends Ws{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}mi.inline=new mi("span");mi.block=new mi("div");var Ee=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ee||(Ee={}));const Er=Ee.LTR,qc=Ee.RTL;function X0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const kk=X0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Sk=X0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Eh=Object.create(null),Yt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Eh[e]=n,Eh[n]=-e}function Z0(t){return t<=247?kk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Sk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Ck=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class jn{get dir(){return this.level%2?qc:Er}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function ey(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!ey(r.inner,i.inner))return!1}return!0}const ie=[];function bk(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,h=a,c=a;u<o;u++){let f=Z0(t.charCodeAt(u));f==512?f=h:f==8&&c==4&&(f=16),ie[u]=f==4?2:f,f&7&&(c=f),h=f}for(let u=l,h=a,c=a;u<o;u++){let f=ie[u];if(f==128)u<o-1&&h==ie[u+1]&&h&24?f=ie[u]=h:ie[u]=256;else if(f==64){let p=u+1;for(;p<o&&ie[p]==64;)p++;let g=u&&h==8||p<n&&ie[p]==8?c==1?1:8:256;for(let v=u;v<p;v++)ie[v]=g;u=p-1}else f==8&&c==1&&(ie[u]=1);h=f,f&7&&(c=f)}}}function Ak(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,h=l<r.length?r[l].from:n;for(let c=u,f,p,g;c<h;c++)if(p=Eh[f=t.charCodeAt(c)])if(p<0){for(let v=o-3;v>=0;v-=3)if(Yt[v+1]==-p){let w=Yt[v+2],m=w&2?i:w&4?w&1?s:i:0;m&&(ie[c]=ie[Yt[v]]=m),o=v;break}}else{if(Yt.length==189)break;Yt[o++]=c,Yt[o++]=f,Yt[o++]=a}else if((g=ie[c])==2||g==1){let v=g==i;a=v?0:1;for(let w=o-3;w>=0;w-=3){let m=Yt[w+2];if(m&2)break;if(v)Yt[w+2]|=2;else{if(m&4)break;Yt[w+2]|=4}}}}}function Ek(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=ie[a];if(u==256){let h=a+1;for(;;)if(h==o){if(i==n.length)break;h=n[i++].to,o=i<n.length?n[i].from:e}else if(ie[h]==256)h++;else break;let c=s==1,f=(h<e?ie[h]:r)==1,p=c==f?c?1:2:r;for(let g=h,v=i,w=v?n[v-1].to:t;g>a;)g==w&&(g=n[--v].from,w=v?n[v-1].to:t),ie[--g]=p;a=h}else s=u,a++}}}function Mh(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let h=!0,c=!1;if(u==s.length||a<s[u].from){let v=ie[a];v!=o&&(h=!1,c=v==16)}let f=!h&&o==1?[]:null,p=h?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(c)break e;let v=s[u];if(!h)for(let w=v.to,m=u+1;;){if(w==n)break e;if(m<s.length&&s[m].from==w)w=s[m++].to;else{if(ie[w]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new jn(a,v.from,p));let w=v.direction==Er!=!(p%2);Th(t,w?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}g=v.to}else{if(g==n||(h?ie[g]!=o:ie[g]==o))break;g++}f?Mh(t,a,g,r+1,i,f,l):a<g&&l.push(new jn(a,g,p)),a=g}else for(let a=n,u=s.length;a>e;){let h=!0,c=!1;if(!u||a>s[u-1].to){let v=ie[a-1];v!=o&&(h=!1,c=v==16)}let f=!h&&o==1?[]:null,p=h?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(c)break e;let v=s[--u];if(!h)for(let w=v.from,m=u;;){if(w==e)break e;if(m&&s[m-1].to==w)w=s[--m].from;else{if(ie[w-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new jn(v.to,a,p));let w=v.direction==Er!=!(p%2);Th(t,w?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}g=v.from}else{if(g==e||(h?ie[g-1]!=o:ie[g-1]==o))break;g--}f?Mh(t,g,a,r+1,i,f,l):g<a&&l.push(new jn(g,a,p)),a=g}}function Th(t,e,n,r,i,s,l){let o=e%2?2:1;bk(t,i,s,r,o),Ak(t,i,s,r,o),Ek(i,s,r,o),Mh(t,i,s,e,n,r,l)}function Mk(t,e,n){if(!t)return[new jn(0,0,e==qc?1:0)];if(e==Er&&!n.length&&!Ck.test(t))return ty(t.length);if(n.length)for(;t.length>ie.length;)ie[ie.length]=256;let r=[],i=e==Er?0:1;return Th(t,i,i,n,0,t.length,r),r}function ty(t){return[new jn(0,t,0)]}let ny="";function Tk(t,e,n,r,i){var s;let l=r.head-t.from,o=jn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let h=je(t.text,l,a.forward(i,n));(h<a.from||h>a.to)&&(h=u),ny=t.text.slice(Math.min(l,h),Math.max(l,h));let c=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return c&&h==u&&c.level+(i?0:1)<a.level?M.cursor(c.side(!i,n)+t.from,c.forward(i,n)?1:-1,c.level):M.cursor(h+t.from,a.forward(i,n)?-1:1,a.level)}function Nk(t,e,n){for(let r=e;r<n;r++){let i=Z0(t.charCodeAt(r));if(i==1)return Er;if(i==2||i==4)return qc}return Er}const ry=F.define(),iy=F.define(),sy=F.define(),ly=F.define(),Nh=F.define(),oy=F.define(),ay=F.define(),Gc=F.define(),Qc=F.define(),uy=F.define({combine:t=>t.some(e=>e)}),Ok=F.define({combine:t=>t.some(e=>e)}),hy=F.define();class ri{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new ri(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ri(M.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const yl=oe.define({map:(t,e)=>t.map(e)}),cy=oe.define();function sn(t,e,n){let r=t.facet(ly);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const fn=F.define({combine:t=>t.length?t[0]:!0});let Dk=0;const Kr=F.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class yt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Kr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Kr.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new yt(Dk++,e,r,i,o=>{let a=[];return l&&a.push(Ds.of(u=>{let h=u.plugin(o);return h?l(h):U.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return yt.define((r,i)=>new e(r,i),n)}}class qa{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(sn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){sn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){sn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const fy=F.define(),Yc=F.define(),Ds=F.define(),dy=F.define(),$s=F.define(),py=F.define();function Gd(t,e){let n=t.state.facet(py);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return te.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,h=l-e.from,c=i;for(let f=o.length-1;f>=0;f--,a--){let p=o[f].spec.bidiIsolate,g;if(p==null&&(p=Nk(e.text,u,h)),a>0&&c.length&&(g=c[c.length-1]).to==u&&g.direction==p)g.to=h,c=g.inner;else{let v={from:u,to:h,direction:p,inner:[]};c.push(v),c=v.inner}}}}),i}const my=F.define();function gy(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(my)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Ui=F.define();class Tt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Tt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,h=a?a.fromB:1e9;for(;s<n.length&&n[s]<h;){let c=n[s],f=n[s+1],p=Math.max(o,c),g=Math.min(h,f);if(p<=g&&new Tt(p+u,g+u,p,g).addToSet(r),f>h)break;s+=2}if(!a)return r;new Tt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class Mo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ne.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Tt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new Mo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Qd extends se{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=U.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Se],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Tt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Fk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Lk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:h}=this.hasComposition;r=new Tt(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(P.ie||P.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=jk(l,o,e.changes);return r=Tt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=P.chrome||P.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof yn&&l.widget instanceof Ah&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:h,toB:c}=o,f,p,g,v;if(r&&r.range.fromB<c&&r.range.toB>h){let S=ss.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=ss.build(this.view.state.doc,r.range.toB,c,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,v=C.openEnd;let E=this.compositionView(r);C.breakAtStart?E.breakAfter=1:C.content.length&&E.merge(E.length,E.length,C.content[0],!1,C.openStart,0)&&(E.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(E).concat(C.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:v}=ss.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap));let{i:w,off:m}=s.findPos(u,1),{i:y,off:x}=s.findPos(a,-1);U0(this,y,x,w,m,f,p,g,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(cy)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Vt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Sn(i,[n],n.length);let r=new Se;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=se.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(fn)||this.dom.tabIndex>-1)&&ql(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(P.gecko&&o.empty&&!this.hasComposition&&Pk(a)){let c=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(c,a.node.childNodes[a.offset]||null)),a=u=new Ke(c,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||(!is(a.node,a.offset,h.anchorNode,h.anchorOffset)||!is(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,o))&&(this.view.observer.ignore(()=>{P.android&&P.chrome&&this.dom.contains(h.focusNode)&&Ik(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=Ns(this.view.root);if(c)if(o.empty){if(P.gecko){let f=Rk(a.node,a.offset);if(f&&f!=3){let p=(f==1?H0:W0)(a.node,a.offset);p&&(a=new Ke(p.node,p.offset))}}c.collapse(a.node,a.offset),o.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=o.bidiLevel)}else if(c.extend){c.collapse(a.node,a.offset);try{c.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Ke(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new Ke(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&is(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Ns(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Se.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let h=this.domAtPos(n.head+n.assoc);r.collapse(h.node,h.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=se.get(n.childNodes[i]);s instanceof Se&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=se.get(n.childNodes[i]);s instanceof Se&&(r=s.domAtPos(s.length))}return r?new Ke(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=se.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Se)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Se&&!(r instanceof Se&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof yn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Se))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Vt))return null;let s=je(i.text,r);if(s==r)return null;let l=Ar(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Ee.LTR;for(let u=0,h=0;h<this.children.length;h++){let c=this.children[h],f=u+c.length;if(f>i)break;if(u>=r){let p=c.dom.getBoundingClientRect();if(n.push(p.height),l){let g=c.dom.lastChild,v=g?Os(g):[];if(v.length){let w=v[v.length-1],m=a?w.right-p.left:p.right-w.left;m>o&&(o=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ee.RTL:Ee.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Se){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Os(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new V0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(U.replace({widget:new Ah(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return U.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ds).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(dy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(te.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(hy))try{if(u(this.view,e.range,e))return!0}catch(h){sn(this.view.state,h,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=gy(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;uk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ee.LTR)}}function Pk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function yy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=H0(n.focusNode,n.focusOffset),i=W0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=se.get(i.node);if(!o||o instanceof Vt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=se.get(r.node);!a||a instanceof Vt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Lk(t,e,n){let r=yy(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Tt(a.mapPos(s),a.mapPos(l),s,l),h=[];for(let c=i.parentNode;;c=c.parentNode){let f=se.get(c);if(f instanceof Sn)h.push({node:c,deco:f.mark});else{if(f instanceof Se||c.nodeName=="DIV"&&c.parentNode==t.contentDOM)return{range:u,text:i,marks:h,line:c};if(c!=t.contentDOM)h.push({node:c,deco:new Vs({inclusive:!0,attributes:xk(c),tagName:c.tagName.toLowerCase()})});else return null}}}function Rk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Bk=class{constructor(){this.changes=[]}compareRange(e,n){Gl(e,n,this.changes)}comparePoint(e,n){Gl(e,n,this.changes)}boundChange(e){Gl(e,e,this.changes)}};function jk(t,e,n){let r=new Bk;return te.compare(t,e,n,r),r.changes}function Ik(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Fk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function zk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return M.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=je(i.text,s,!1):o=je(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=je(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=je(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return M.range(l+i.from,o+i.from)}function _k(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Hk(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ga(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Yd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Jd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Oh(t,e,n){let r,i,s,l,o=!1,a,u,h,c;for(let g=t.firstChild;g;g=g.nextSibling){let v=Os(g);for(let w=0;w<v.length;w++){let m=v[w];i&&Ga(i,m)&&(m=Yd(Jd(m,i.bottom),i.top));let y=_k(e,m),x=Hk(n,m);if(y==0&&x==0)return g.nodeType==3?Xd(g,e,n):Oh(g,e,n);(!r||l>x||l==x&&s>y)&&(r=g,i=m,s=y,l=x,o=y?e<m.left?w>0:w<v.length-1:!0),y==0?n>m.bottom&&(!h||h.bottom<m.bottom)?(a=g,h=m):n<m.top&&(!c||c.top>m.top)&&(u=g,c=m):h&&Ga(h,m)?h=Jd(h,m.bottom):c&&Ga(c,m)&&(c=Yd(c,m.top))}}if(h&&h.bottom>=n?(r=a,i=h):c&&c.top<=n&&(r=u,i=c),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Xd(r,f,n);if(o&&r.contentEditable!="false")return Oh(r,f,n);let p=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:p}}function Xd(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Ar(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(h.top==h.bottom)continue;l||(l=e-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<s){let f=e>=(h.left+h.right)/2,p=f;if((P.chrome||P.gecko)&&Ar(t,o).getBoundingClientRect().left==h.right&&(p=!f),c<=0)return{node:t,offset:o+(p?1:0)};i=o+(p?1:0),s=c}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function vy(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:h,y:c}=e,f=c-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Mt.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}c=o+f;let p=a.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:Zd(t,l,a,h,c);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Zd(t,l,a,h,c);let g=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:g,w=v.elementFromPoint(h,c);w&&!t.contentDOM.contains(w)&&(w=null),w||(h=Math.max(l.left+1,Math.min(l.right-1,h)),w=v.elementFromPoint(h,c),w&&!t.contentDOM.contains(w)&&(w=null));let m,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(h,c);S&&({offsetNode:m,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(h,c);S&&({startContainer:m,startOffset:y}=S)}m&&(!t.contentDOM.contains(m)||P.safari&&Wk(m,y,h)||P.chrome&&Vk(m,y,h))&&(m=void 0),m&&(y=Math.min(un(m),y))}if(!m||!t.docView.dom.contains(m)){let S=Se.find(t.docView,p);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=Oh(S.dom,h,c))}let x=t.docView.nearest(m);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(m,y)+x.posAtStart}function Zd(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+rk(l,s,t.state.tabSize)}function xy(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Ar(t,r-1,r).getBoundingClientRect().right>n}function Wk(t,e,n){return xy(t,e,n)}function Vk(t,e,n){if(e!=0)return xy(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Ar(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Uk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Mt.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function $k(t,e,n,r){let i=Uk(t,e.head,e.assoc||-1),s=!r||i.type!=Mt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Ee.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return M.cursor(a,n?-1:1)}return M.cursor(n?i.to:i.from,n?-1:1)}function ep(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Tk(i,s,l,o,n),h=ny;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;h=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(h))return o}else{if(!r)return u;a=r(h)}o=u}}function Kk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==Ie.Space&&(i=l),i==l}}function qk(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return M.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),h=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let p=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-p.from))),o=(s<0?p.top:p.bottom)+h}let c=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=o+(f+p)*s,v=vy(t,{x:c,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?v<i:v>i)){let w=t.docView.coordsForChar(v),m=!w||g<w.top?-1:1;return M.cursor(v,m,void 0,l)}}}function ls(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function wy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=ls(t,i.from,0);l!=i.from&&(s=M.cursor(l,-1))}else{let l=ls(t,i.from,-1),o=ls(t,i.to,1);(l!=i.from||o!=i.to)&&(s=M.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?M.create(n,e.mainIndex):e}function Qa(t,e,n){let r=ls(t.state.facet($s).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:M.cursor(r,r<n.from?1:-1)}const $i="";class Gk{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=$i}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=se.get(i),a=se.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:Ao(i))||Ao(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=se.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Qk(e,r.node,r.offset)?n:0))}}function Qk(t,e,n){for(;;){if(!e||n<un(e))return!1;if(e==t)return!0;n=br(e)+1,e=e.parentNode}}class tp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Yk{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:Zk(e),a=new Gk(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=eS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!xh(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!xh(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),h=e.viewport;if((P.ios||P.chrome)&&e.state.selection.main.empty&&a!=u&&(h.from>0||h.to<e.state.doc.length)){let c=Math.min(a,u),f=Math.max(a,u),p=h.from-c,g=h.to-f;(p==0||p==1||c==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=M.single(u,a)}}}function ky(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||P.android&&e.text.length<o-l)&&(a=i.to,u="end");let h=Xk(t.state.doc.sliceString(l,o,$i),e.text,a-l,u);h&&(P.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==$i+$i&&h.toB--,n={from:l+h.from,to:l+h.toA,insert:Y.of(e.text.slice(h.from,h.toB).split($i))})}else r&&(!t.hasFocus&&t.state.facet(fn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(P.mac||P.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=M.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Y.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:P.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=M.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Y.of([" "])}),n)return Jc(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=wy(t.state.facet($s).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function Jc(t,e,n,r=-1){if(P.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(P.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ni(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&ni(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&ni(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=Jk(t,e,n));return t.state.facet(oy).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function Jk(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,h=ls(i.facet($s).map(c=>c(t)),u,a);e.from==h&&(l=h)}if(l>-1)r={changes:e,selection:M.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),c,f=n&&yy(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-v}}else c=t.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let w=v.to-p,m=w-h.length;if(v.to-v.from!=g||t.state.sliceDoc(m,w)!=h||v.to>=c.from&&v.from<=c.to)return{range:v};let y=i.changes({from:m,to:w,insert:e.insert}),x=v.to-s.to;return{changes:y,range:u?M.range(Math.max(0,u.anchor+x),Math.max(0,u.head+x)):v.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Xk(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function Zk(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new tp(n,r)),(i!=n||s!=r)&&e.push(new tp(i,s))),e}function eS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?M.single(n+e,r+e):null}class tS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,P.safari&&e.contentDOM.addEventListener("input",()=>null),P.gecko&&yS(e.contentDOM.ownerDocument)}handleEvent(e){!uS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=nS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Cy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),P.android&&P.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return P.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Sy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||rS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ni(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:P.safari&&!P.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function np(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){sn(n.state,i)}}}function nS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(np(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(np(r.value,a))}}for(let r in Ut)n(r).handlers.push(Ut[r]);for(let r in Pt)n(r).observers.push(Pt[r]);return e}const Sy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rS="dthko",Cy=[16,17,18,20,91,92,224,225],vl=6;function xl(t){return Math.max(0,t)*.7+8}function iS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class sS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=hk(e.contentDOM),this.atoms=e.state.facet($s).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Z.allowMultipleSelections)&&lS(e,n),this.dragging=aS(e,n)&&Ey(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&iS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=gy(this.view);e.clientX-a.left<=i+vl?n=-xl(i-e.clientX):e.clientX+a.right>=l-vl&&(n=xl(e.clientX-l)),e.clientY-a.top<=s+vl?r=-xl(s-e.clientY):e.clientY+a.bottom>=o-vl&&(r=xl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=wy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function lS(t,e){let n=t.state.facet(ry);return n.length?n[0](e):P.mac?e.metaKey:e.ctrlKey}function oS(t,e){let n=t.state.facet(iy);return n.length?n[0](e):P.mac?!e.altKey:!e.ctrlKey}function aS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Ns(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function uS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=se.get(n))&&r.ignoreEvent(e))return!1;return!0}const Ut=Object.create(null),Pt=Object.create(null),by=P.ie&&P.ie_version<15||P.ios&&P.webkit_version<604;function hS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Ay(t,n.value)},50)}function ua(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Ay(t,e){e=ua(t.state,Gc,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Dh!=null&&n.selection.ranges.every(a=>a.empty)&&Dh==s.toString()){let a=-1;r=n.changeByRange(u=>{let h=n.doc.lineAt(u.from);if(h.from==a)return{range:u};a=h.from;let c=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:c},range:M.cursor(u.from+c.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:M.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Pt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Ut.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Pt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Pt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Ut.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(sy))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=dS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new sS(t,e,n,r)),r&&t.observer.ignore(()=>{F0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function rp(t,e,n,r){if(r==1)return M.cursor(e,n);if(r==2)return zk(t.state,e,n);{let i=Se.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,M.range(l,o)}}let ip=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function cS(t,e,n,r){let i=Se.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&ip(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&ip(n,r,o)?1:l&&l.bottom>=r?-1:1}function sp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:cS(t,n,e.clientX,e.clientY)}}const fS=P.ie&&P.ie_version<=11;let lp=null,op=0,ap=0;function Ey(t){if(!fS)return t.detail;let e=lp,n=ap;return lp=t,ap=Date.now(),op=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(op+1)%3:1}function dS(t,e){let n=sp(t,e),r=Ey(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=sp(t,s),u,h=rp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let c=rp(t,n.pos,n.bias,r),f=Math.min(c.from,h.from),p=Math.max(c.to,h.to);h=f<h.from?M.range(f,p):M.range(p,f)}return l?i.replaceRange(i.main.extend(h.from,h.to)):o&&r==1&&i.ranges.length>1&&(u=pS(i,a.pos))?u:o?i.addRange(h):M.create([h])}}}function pS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return M.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Ut.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=M.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",ua(t.state,Qc,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ut.dragend=t=>(t.inputState.draggedContent=null,!1);function up(t,e,n,r){if(n=ua(t.state,Gc,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&oS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ut.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&up(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return up(t,e,r,!0),!0}return!1};Ut.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=by?null:e.clipboardData;return n?(Ay(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(hS(t),!1)};function mS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function gS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:ua(t,Qc,e.join(t.lineBreak)),ranges:n,linewise:r}}let Dh=null;Ut.copy=Ut.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=gS(t.state);if(!n&&!i)return!1;Dh=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=by?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(mS(t,n),!1)};const My=Si.define();function Ty(t,e){let n=[];for(let r of t.facet(ay)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:My.of(!0)}):null}function Ny(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Ty(t.state,e);n?t.dispatch(n):t.update([])}},10)}Pt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ny(t)};Pt.blur=t=>{t.observer.clearSelectionRange(),Ny(t)};Pt.compositionstart=Pt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Pt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,P.chrome&&P.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Pt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ut.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return Jc(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(P.chrome&&P.android&&(i=Sy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return P.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),P.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Pt.compositionend(t,e),20),!1};const hp=new Set;function yS(t){hp.has(t)||(hp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const cp=["pre-wrap","normal","pre-line","break-spaces"];let gi=!1;function fp(){gi=!1}class vS{constructor(e){this.lineWrapping=e,this.doc=Y.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return cp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=cp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let h=l[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class xS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class rn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Mt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Jn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new rn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ue=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ue||(ue={}));const Ql=.001;class Xe{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ql&&(gi=!0),this.height=e)}replace(e,n,r){return Xe.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:h,toB:c}=i[o],f=s.lineAt(a,ue.ByPosNoHeight,r.setDoc(n),0,0),p=f.to>=u?f:s.lineAt(u,ue.ByPosNoHeight,r,0,0);for(c+=p.to-u,u=p.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ue.ByPosNoHeight,r,0,0));h+=f.from-a,a=f.from;let g=Xc.build(r.setDoc(l),e,h,c);s=To(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new ft(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new wS(Xe.of(e.slice(0,n)),l,Xe.of(e.slice(r)))}}function To(t,e){return t==e?t:(t.constructor!=e.constructor&&(gi=!0),e)}Xe.prototype.size=1;class Oy extends Xe{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new rn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ft extends Oy{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new rn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ft||i instanceof Le&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Le?i=new ft(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Xe.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Le extends Xe{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=n.doc.lineAt(u),c=o+h.length*a,f=Math.max(r,e-c/2);return new rn(h.from,h.length,f,c,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:h,length:c}=n.doc.line(s+u);return new rn(h,c,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ue.ByHeight)return this.blockAt(e,r,i,s);if(n==ue.ByPosNoHeight){let{from:p,to:g}=r.doc.lineAt(e);return new rn(p,g-p,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),h=o+u.length*a,c=u.number-l,f=i+o*c+a*(u.from-s-c);return new rn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let h=e,c=i;h<=n;){let f=r.doc.lineAt(h);if(h==e){let g=f.number-o;c+=a*g+u*(e-s-g)}let p=a+u*f.length;l(new rn(f.from,f.length,c,p,0)),c+=p,h=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Le?r[r.length-1]=new Le(s.length+i):r.push(null,new Le(i-1))}if(e>0){let s=r[0];s instanceof Le?r[0]=new Le(e+s.length):r.unshift(new Le(e-1),null)}return Xe.of(r)}decomposeLeft(e,n){n.push(new Le(e-1),null)}decomposeRight(e,n){n.push(null,new Le(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Le(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let h=e.doc.lineAt(o).length;l.length&&l.push(null);let c=i.heights[i.index++];a==-1?a=c:Math.abs(c-a)>=Ql&&(a=-2);let f=new ft(h,c);f.outdated=!1,l.push(f),o+=h+1}o<=s&&l.push(null,new Le(s-o).updateHeight(e,o));let u=Xe.of(l);return(a<0||Math.abs(u.height-this.height)>=Ql||Math.abs(a-this.heightMetrics(e,n).perLine)>=Ql)&&(gi=!0),To(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class wS extends Xe{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ue.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let h=n==ue.ByPosNoHeight?ue.ByPosNoHeight:ue.ByPos;return a?u.join(this.right.lineAt(o,h,r,l,o)):this.left.lineAt(o,h,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ue.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&dp(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),dp(s,o)}return Xe.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Xe.of(this.break?[e,null,n]:[e,n]):(this.left=To(this.left,e),this.right=To(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function dp(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Le&&(r=t[e+1])instanceof Le&&t.splice(e-1,3,new Le(n.length+1+r.length))}const kS=5;class Xc{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ft?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ft(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Oy(l,i,r)):(l||s||i>=kS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ft(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Le(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ft)return e;let n=new ft(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ft)&&!this.isCovered?this.nodes.push(new ft(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ft&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Xc(r,e);return te.spans(n,r,i,s,0),s.finish(r)}}function SS(t,e,n){let r=new CS;return te.compare(t,e,n,r,0),r.changes}class CS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Gl(e,n,this.changes,5)}}function bS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let h=u,c=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&c.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=c.position=="absolute"||c.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function AS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function ES(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Ya{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return U.replace({widget:new MS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class MS extends Ws{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class pp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=mp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ee.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Yc).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new vS(n),this.stateDeco=e.facet(Ds).filter(r=>typeof r!="function"),this.heightMap=Xe.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle.setDoc(e.doc),[new Tt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=U.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new wl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?mp:new Zc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ki(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Ds).filter(h=>typeof h!="function");let i=e.changedRanges,s=Tt.extendWithRanges(i,SS(r,this.stateDeco,e?e.changes:Ne.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);fp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||gi)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ok)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ee.RTL:Ee.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,h=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=I0(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let c=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=f)&&(this.paddingTop=c,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=_0(e.scrollDOM);let g=(this.printing?ES:bS)(n,this.paddingTop),v=g.top-this.pixelViewport.top,w=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!AS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:E,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,E,b,Math.max(5,y/E),S),l&&(e.docView.minWidth=0,u|=16)}v>0&&w>0?h=Math.max(v,w):v<0&&w<0&&(h=Math.min(v,w)),fp();for(let C of this.viewports){let E=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?Xe.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle,[new Tt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new xS(C.from,E))}gi&&(u|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),u|=this.updateForViewport()),(u&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new wl(i.lineAt(l-r*1e3,ue.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ue.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,ue.ByPos,s,0,0),f;n.y=="center"?f=(c.top+c.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=c.top:f=c.bottom-h,a=new wl(i.lineAt(f-1e3/2,ue.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,ue.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new wl(this.heightMap.lineAt(r,ue.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ue.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ue.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ue.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Ya(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Ee.LTR&&!r)return[];let o=[],a=(h,c,f,p)=>{if(c-h<s)return;let g=this.state.selection.main,v=[g.from];g.empty||v.push(g.to);for(let m of v)if(m>h&&m<c){a(h,m-10,f,p),a(m+10,c,f,p);return}let w=NS(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-h)<s&&Math.abs(m.to-c)<s&&!v.some(y=>m.from<y&&m.to>y));if(!w){if(c<f.to&&n&&r&&n.visibleRanges.some(x=>x.from<=c&&x.to>=c)){let x=n.moveToLineBoundary(M.cursor(c),!1,!0).head;x>h&&(c=x)}let m=this.gapSize(f,h,c,p),y=r||m<2e6?m:2e6;w=new Ya(h,c,m,y)}o.push(w)},u=h=>{if(h.length<l||h.type!=Mt.Text)return;let c=TS(h.from,h.to,this.stateDeco);if(c.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,m;if(f!=null){let y=Sl(c,f),x=((this.visibleBottom-this.visibleTop)/2+v)/h.height;w=y-x,m=y+x}else w=(this.visibleTop-h.top-v)/h.height,m=(this.visibleBottom-h.top+v)/h.height;p=kl(c,w),g=kl(c,m)}else{let v=c.total*this.heightOracle.charWidth,w=i*this.heightOracle.charWidth,m=0;if(v>2e6)for(let E of e)E.from>=h.from&&E.from<h.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=E.size-E.displaySize);let y=this.pixelViewport.left+m,x=this.pixelViewport.right+m,S,C;if(f!=null){let E=Sl(c,f),b=((x-y)/2+w)/v;S=E-b,C=E+b}else S=(y-w)/v,C=(x+w)/v;p=kl(c,S),g=kl(c,C)}p>h.from&&a(h.from,p,h,c),g<h.to&&a(g,h.to,h,c)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(u):u(h);return o}gapSize(e,n,r,i){let s=Sl(i,r)-Sl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Ya.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=U.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];te.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ki(this.heightMap.lineAt(e,ue.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Ki(this.heightMap.lineAt(this.scaler.fromDOM(e),ue.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ki(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class wl{constructor(e,n){this.from=e,this.to=n}}function TS(t,e,n){let r=[],i=t,s=0;return te.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function kl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function Sl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function NS(t,e){for(let n of t)if(e(n))return n}const mp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Zc{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ue.ByPos,e,0,0).top,h=n.lineAt(a,ue.ByPos,e,0,0).bottom;return i+=h-u,{from:o,to:a,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Zc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Ki(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new rn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Ki(i,e)):t._content)}const Cl=F.define({combine:t=>t.join(" ")}),Ph=F.define({combine:t=>t.indexOf(!0)>-1}),Lh=Qn.newName(),Dy=Qn.newName(),Py=Qn.newName(),Ly={"&light":"."+Dy,"&dark":"."+Py};function Rh(t,e,n){return new Qn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const OS=Rh("."+Lh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ly),DS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ja=P.ie&&P.ie_version<=11;class PS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new ck,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(P.ie&&P.ie_version<=11||P.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&P.android&&e.constructor.EDIT_CONTEXT!==!1&&!(P.chrome&&P.chrome_version<126)&&(this.editContext=new RS(e),e.state.facet(fn)&&(e.contentDOM.editContext=this.editContext.editContext)),Ja&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(fn)?r.root.activeElement!=this.dom:!ql(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(P.ie&&P.ie_version<=11||P.android&&P.chrome)&&!r.state.selection.main.empty&&i.focusNode&&is(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ns(e.root);if(!n)return!1;let r=P.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=ql(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&dk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,DS),Ja&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ja&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ni(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&ql(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Yk(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=ky(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=gp(n,e.previousSibling||e.target.previousSibling,-1),i=gp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(fn)!=e.state.facet(fn)&&(e.view.contentDOM.editContext=e.state.facet(fn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function gp(t,e,n){for(;e;){let r=se.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function yp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return is(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function LS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return yp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?yp(t,n):null}class RS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:Y.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let h=M.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((P.mac||P.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:Y.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let h=this.to-this.from+(u.to-u.from+u.insert.length);Jc(e,u,M.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let h=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(U.mark({attributes:{style:h}}).range(a,u))}}}e.dispatch({effects:cy.of(U.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ns(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let h=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=h}n+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class j{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||fk(e.parent)||document,this.viewState=new pp(e.state||Z.create(e)),e.scrollTo&&e.scrollTo.is(yl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Kr).map(i=>new qa(i));for(let i of this.plugins)i.update(this);this.observer=new PS(this),this.inputState=new tS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Qd(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof qe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(My))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Ty(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Z.phrases)!=this.state.facet(Z.phrases))return this.setState(s);i=Mo.create(this,s,e),i.flags|=o;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(c&&(c=c.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;c=new ri(p.empty?p:M.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(yl)&&(c=p.value.clip(this.state))}this.viewState.update(i,c),this.bidiCache=No.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ui)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Cl)!=i.state.facet(Cl)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Nh))try{f(i)}catch(p){sn(this.state,p,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!ky(this,h)&&u.force&&ni(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new pp(e),this.plugins=e.facet(Kr).map(r=>new qa(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Qd(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Kr),r=e.state.facet(Kr);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new qa(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){sn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(_0(r))s=-1,l=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);s=p.from,l=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(p=>{try{return p.read(this)}catch(g){return sn(this.state,g),vp}}),c=Mo.create(this,this.state,[]),f=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),f=this.docView.update(c),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(h[p]!=vp)try{let g=u[p];g.write&&g.write(h[p],this)}catch(g){sn(this.state,g)}if(f&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Nh))o(n)}get themeClasses(){return Lh+" "+(this.state.facet(Ph)?Py:Dy)+" "+this.state.facet(Cl)}updateAttrs(){let e=xp(this,fy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(fn)?"true":"false",class:"cm-content",style:`${P.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),xp(this,Yc,n);let r=this.observer.ignore(()=>{let i=bh(this.contentDOM,this.contentAttrs,n),s=bh(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(j.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ui);let e=this.state.facet(j.cspNonce);Qn.mount(this.root,this.styleModules.concat(OS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Qa(this,e,ep(this,e,n,r))}moveByGroup(e,n){return Qa(this,e,ep(this,e,n,r=>Kk(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return M.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return $k(this,e,n,r)}moveVertically(e,n,r){return Qa(this,e,qk(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),vy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[jn.find(s,e-i.from,-1,n)];return oa(r,l.dir==Ee.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(uy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>BS)return ty(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||ey(s.isolates,r=Gd(this,e))))return s.order;r||(r=Gd(this,e));let i=Mk(e.text,n,r);return this.bidiCache.push(new No(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||P.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{F0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return yl.of(new ri(typeof e=="number"?M.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return yl.of(new ri(M.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return yt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return yt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Qn.newName(),i=[Cl.of(r),Ui.of(Rh(`.${r}`,e))];return n&&n.dark&&i.push(Ph.of(!0)),i}static baseTheme(e){return ra.lowest(Ui.of(Rh("."+Lh,e,Ly)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&se.get(r)||se.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}j.styleModule=Ui;j.inputHandler=oy;j.clipboardInputFilter=Gc;j.clipboardOutputFilter=Qc;j.scrollHandler=hy;j.focusChangeEffect=ay;j.perLineTextDirection=uy;j.exceptionSink=ly;j.updateListener=Nh;j.editable=fn;j.mouseSelectionStyle=sy;j.dragMovesSelection=iy;j.clickAddsSelectionRange=ry;j.decorations=Ds;j.outerDecorations=dy;j.atomicRanges=$s;j.bidiIsolatedRanges=py;j.scrollMargins=my;j.darkTheme=Ph;j.cspNonce=F.define({combine:t=>t.length?t[0]:""});j.contentAttributes=Yc;j.editorAttributes=fy;j.lineWrapping=j.contentAttributes.of({class:"cm-lineWrapping"});j.announce=oe.define();const BS=4096,vp={};class No{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Ee.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new No(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function xp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Ch(l,n)}return n}const jS=P.mac?"mac":P.windows?"win":P.linux?"linux":"key";function IS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function bl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const FS=ra.default(j.domEventHandlers({keydown(t,e){return jy(By(e.state),t,e,"editor")}})),Ry=F.define({enables:FS}),wp=new WeakMap;function By(t){let e=t.facet(Ry),n=wp.get(e);return n||wp.set(e,n=HS(e.reduce((r,i)=>r.concat(i),[]))),n}function zS(t,e,n){return jy(By(t.state),e,t,n)}let Pn=null;const _S=4e3;function HS(t,e=jS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,h)=>{var c,f;let p=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(m=>IS(m,e));for(let m=1;m<g.length;m++){let y=g.slice(0,m).join(" ");i(y,!0),p[y]||(p[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Pn={view:x,prefix:y,scope:l};return setTimeout(()=>{Pn==S&&(Pn=null)},_S),!0}]})}let v=g.join(" ");i(v,!1);let w=p[v]||(p[v]={preventDefault:!1,stopPropagation:!1,run:((f=(c=p._any)===null||c===void 0?void 0:c.run)===null||f===void 0?void 0:f.slice())||[]});a&&w.run.push(a),u&&(w.preventDefault=!0),h&&(w.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let h=n[u]||(n[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=l;for(let f in h)h[f].run.push(p=>c(p,Bh))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Bh=null;function jy(t,e,n,r){Bh=e;let i=ok(e),s=k0(i,0),l=S0(s)==i.length&&i!=" ",o="",a=!1,u=!1,h=!1;Pn&&Pn.view==n&&Pn.scope==r&&(o=Pn.prefix+" ",Cy.indexOf(e.keyCode)<0&&(u=!0,Pn=null));let c=new Set,f=w=>{if(w){for(let m of w.run)if(!c.has(m)&&(c.add(m),m(n)))return w.stopPropagation&&(h=!0),!0;w.preventDefault&&(w.stopPropagation&&(h=!0),u=!0)}return!1},p=t[r],g,v;return p&&(f(p[o+bl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(P.windows&&e.ctrlKey&&e.altKey)&&!(P.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=Yn[e.keyCode])&&g!=i?(f(p[o+bl(g,e,!0)])||e.shiftKey&&(v=Ts[e.keyCode])!=i&&v!=g&&f(p[o+bl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(p[o+bl(i,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&h&&e.stopPropagation(),Bh=null,a}function WS(){return US}const VS=U.line({class:"cm-activeLine"}),US=yt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(VS.range(i.from)),e=i.from)}return U.set(n)}},{decorations:t=>t.decorations}),kp=F.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Oo(t,e){let n=t.plugin(Iy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Iy=yt.fromClass(class{constructor(t){this.input=t.state.facet(Do),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(kp);this.top=new Al(t,!0,e.topContainer),this.bottom=new Al(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(kp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Al(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Al(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Do);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),h;u<0?(h=a(t.view),o.push(h)):(h=this.panels[u],h.update&&h.update(t)),i.push(h),(h.top?s:l).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Al{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Sp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Sp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Sp(t){let e=t.nextSibling;return t.remove(),e}const Do=F.define({enables:Iy});class Xn extends di{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Xn.prototype.elementClass="";Xn.prototype.toDOM=void 0;Xn.prototype.mapMode=dt.TrackBefore;Xn.prototype.startSide=Xn.prototype.endSide=-1;Xn.prototype.point=!0;const Xa=F.define(),$S=F.define(),KS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},os=F.define();function qS(t){return[Fy(),os.of({...KS,...t})]}const Cp=F.define({combine:t=>t.some(e=>e)});function Fy(t){return[GS]}const GS=yt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(os).map(e=>new Ap(t,e)),this.fixed=!t.state.facet(Cp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Cp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=te.iter(this.view.state.facet(Xa),this.view.viewport.from),r=[],i=this.gutters.map(s=>new QS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Mt.Text&&l){jh(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Mt.Text){jh(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(os),n=t.state.facet(os),r=t.docChanged||t.heightChanged||t.viewportChanged||!te.eq(t.startState.facet(Xa),t.state.facet(Xa),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Ap(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ee.LTR?{left:r,right:i}:{right:r,left:i}})});function bp(t){return Array.isArray(t)?t:[t]}function jh(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class QS{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=te.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new zy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];jh(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet($S)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Ap{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=bp(n.markers(e)),n.initialSpacer&&(this.spacer=new zy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=bp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!te.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class zy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),YS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let h=a.elementClass;h&&(r+=" "+h);for(let c=l;c<this.markers.length;c++)if(this.markers[c].compare(a)){o=c,u=!0;break}}else o=this.markers.length;for(;l<o;){let h=this.markers[l++];if(h.toDOM){h.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function YS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const JS=F.define(),XS=F.define(),qr=F.define({combine(t){return sa(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class Za extends Xn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function eu(t,e){return t.state.facet(qr).formatNumber(e,t.state)}const ZS=os.compute([qr],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(JS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Za(eu(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(XS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(qr)!=e.state.facet(qr),initialSpacer(e){return new Za(eu(e,Ep(e.state.doc.lines)))},updateSpacer(e,n){let r=eu(n.view,Ep(n.view.state.doc.lines));return r==e.number?e:new Za(r)},domEventHandlers:t.facet(qr).domEventHandlers,side:"before"}));function eC(t={}){return[qr.of(t),Fy(),ZS]}function Ep(t){let e=9;for(;e<t;)e=e*10+9;return e}const tC=1024;let nC=0;class tu{constructor(e,n){this.from=e,this.to=n}}class G{constructor(e={}){this.id=nC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=at.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}G.closedBy=new G({deserialize:t=>t.split(" ")});G.openedBy=new G({deserialize:t=>t.split(" ")});G.group=new G({deserialize:t=>t.split(" ")});G.isolate=new G({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});G.contextHash=new G({perNode:!0});G.lookAhead=new G({perNode:!0});G.mounted=new G({perNode:!0});class Po{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[G.mounted.id]}}const rC=Object.create(null);class at{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):rC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new at(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(G.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(G.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}at.none=new at("",Object.create(null),0,8);class ef{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new at(r.name,i,r.id,r.flags):r)}return new ef(n)}}const El=new WeakMap,Mp=new WeakMap;var Be;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Be||(Be={}));class pe{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=Po.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Fh(this.topNode,e)}cursorAt(e,n=0,r=0){let i=El.get(this)||this.topNode,s=new Fh(i);return s.moveTo(e,n),El.set(this,s._tree),s}get topNode(){return new Nt(this,0,0,null)}resolve(e,n=0){let r=Ps(El.get(this)||this.topNode,e,n,!1);return El.set(this,r),r}resolveInner(e,n=0){let r=Ps(Mp.get(this)||this.topNode,e,n,!0);return Mp.set(this,r),r}resolveStack(e,n=0){return lC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Be.IncludeAnonymous)>0;for(let a=this.cursor(l|Be.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:rf(at.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new pe(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new pe(at.none,n,r,i)))}static build(e){return oC(e)}}pe.empty=new pe(at.none,[],[],0);class tf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tf(this.buffer,this.index)}}class Zn{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return at.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(_y(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new Zn(s,l,this.set)}}function _y(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ps(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Nt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Be.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Nt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Hy{cursor(e=0){return new Fh(this,e)}getChild(e,n=null,r=null){let i=Tp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Tp(this,e,n,r)}resolve(e,n=0){return Ps(this,e,n,!1)}resolveInner(e,n=0){return Ps(this,e,n,!0)}matchContext(e){return Ih(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Nt extends Hy{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let h=o[e],c=a[e]+l.from;if(_y(i,r,c,c+h.length)){if(h instanceof Zn){if(s&Be.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,n,r-c,i);if(f>-1)return new In(new iC(l,h,e,c),null,f)}else if(s&Be.IncludeAnonymous||!h.type.isAnonymous||nf(h)){let f;if(!(s&Be.IgnoreMounts)&&(f=Po.get(h))&&!f.overlay)return new Nt(f.tree,c,e,l);let p=new Nt(h,c,e,l);return s&Be.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(s&Be.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Be.IgnoreOverlays)&&(i=Po.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Nt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Tp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Ih(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class iC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class In extends Hy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new In(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Be.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new In(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new In(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new In(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new pe(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Wy(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Nt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new sC(i,n)}class sC{constructor(e,n){this.heads=e,this.node=n}get next(){return Wy(this.heads)}}function lC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Nt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=Po.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Nt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ps(o,e,n,!1))}}return i?Wy(i):r}class Fh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Nt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Nt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Be.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Be.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Be.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Be.IncludeAnonymous||o instanceof Zn||!o.type.isAnonymous||nf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new In(this.buffer,n,this.stack[i]);return this.bufferNode=new In(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ih(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Ih(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function nf(t){return t.children.some(e=>e instanceof Zn||!e.type.isAnonymous||nf(e))}function oC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=tC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new tf(n,n.length):n,a=r.types,u=0,h=0;function c(C,E,b,O,H,R){let{id:W,start:z,end:Q,size:ee}=o,re=h,tt=u;for(;ee<0;)if(o.next(),ee==-1){let $=s[W];b.push($),O.push(z-C);return}else if(ee==-3){u=W;return}else if(ee==-4){h=W;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let ke=a[W],A,_,I=z-C;if(Q-z<=i&&(_=w(o.pos-E,H))){let $=new Uint16Array(_.size-_.skip),K=o.pos-_.size,Me=$.length;for(;o.pos>K;)Me=m(_.start,$,Me);A=new Zn($,Q-_.start,r),I=_.start-C}else{let $=o.pos-ee;o.next();let K=[],Me=[],X=W>=l?W:-1,_e=0,ve=Q;for(;o.pos>$;)X>=0&&o.id==X&&o.size>=0?(o.end<=ve-i&&(g(K,Me,z,_e,o.end,ve,X,re,tt),_e=K.length,ve=o.end),o.next()):R>2500?f(z,$,K,Me):c(z,$,K,Me,X,R+1);if(X>=0&&_e>0&&_e<K.length&&g(K,Me,z,_e,z,ve,X,re,tt),K.reverse(),Me.reverse(),X>-1&&_e>0){let kt=p(ke,tt);A=rf(ke,K,Me,0,K.length,0,Q-z,kt,kt)}else A=v(ke,K,Me,Q-z,re-Q,tt)}b.push(A),O.push(I)}function f(C,E,b,O){let H=[],R=0,W=-1;for(;o.pos>E;){let{id:z,start:Q,end:ee,size:re}=o;if(re>4)o.next();else{if(W>-1&&Q<W)break;W<0&&(W=ee-i),H.push(z,Q,ee),R++,o.next()}}if(R){let z=new Uint16Array(R*4),Q=H[H.length-2];for(let ee=H.length-3,re=0;ee>=0;ee-=3)z[re++]=H[ee],z[re++]=H[ee+1]-Q,z[re++]=H[ee+2]-Q,z[re++]=re;b.push(new Zn(z,H[2]-Q,r)),O.push(Q-C)}}function p(C,E){return(b,O,H)=>{let R=0,W=b.length-1,z,Q;if(W>=0&&(z=b[W])instanceof pe){if(!W&&z.type==C&&z.length==H)return z;(Q=z.prop(G.lookAhead))&&(R=O[W]+z.length+Q)}return v(C,b,O,H,R,E)}}function g(C,E,b,O,H,R,W,z,Q){let ee=[],re=[];for(;C.length>O;)ee.push(C.pop()),re.push(E.pop()+b-H);C.push(v(r.types[W],ee,re,R-H,z-R,Q)),E.push(H-b)}function v(C,E,b,O,H,R,W){if(R){let z=[G.contextHash,R];W=W?[z].concat(W):[z]}if(H>25){let z=[G.lookAhead,H];W=W?[z].concat(W):[z]}return new pe(C,E,b,O,W)}function w(C,E){let b=o.fork(),O=0,H=0,R=0,W=b.end-i,z={size:0,start:0,skip:0};e:for(let Q=b.pos-C;b.pos>Q;){let ee=b.size;if(b.id==E&&ee>=0){z.size=O,z.start=H,z.skip=R,R+=4,O+=4,b.next();continue}let re=b.pos-ee;if(ee<0||re<Q||b.start<W)break;let tt=b.id>=l?4:0,ke=b.start;for(b.next();b.pos>re;){if(b.size<0)if(b.size==-3)tt+=4;else break e;else b.id>=l&&(tt+=4);b.next()}H=ke,O+=ee,R+=tt}return(E<0||O==C)&&(z.size=O,z.start=H,z.skip=R),z.size>4?z:void 0}function m(C,E,b){let{id:O,start:H,end:R,size:W}=o;if(o.next(),W>=0&&O<l){let z=b;if(W>4){let Q=o.pos-(W-4);for(;o.pos>Q;)b=m(C,E,b)}E[--b]=z,E[--b]=R-C,E[--b]=H-C,E[--b]=O}else W==-3?u=O:W==-4&&(h=O);return b}let y=[],x=[];for(;o.pos>0;)c(t.start||0,t.bufferStart||0,y,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new pe(a[t.topID],y.reverse(),x.reverse(),S)}const Np=new WeakMap;function Yl(t,e){if(!t.isAnonymous||e instanceof Zn||e.type!=t)return 1;let n=Np.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof pe)){n=1;break}n+=Yl(t,r)}Np.set(e,n)}return n}function rf(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=Yl(t,e[g]);let h=Math.ceil(u*1.5/8),c=[],f=[];function p(g,v,w,m,y){for(let x=w;x<m;){let S=x,C=v[x],E=Yl(t,g[x]);for(x++;x<m;x++){let b=Yl(t,g[x]);if(E+b>=h)break;E+=b}if(x==S+1){if(E>h){let b=g[S];p(b.children,b.positions,0,b.children.length,v[S]+y);continue}c.push(g[S])}else{let b=v[x-1]+g[x-1].length-C;c.push(rf(t,g,v,S,x,C,b,null,a))}f.push(C+y-s)}}return p(e,n,r,i,0),(o||a)(c,f,l)}class yr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new yr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let h=o<n.length?n[o]:null,c=h?h.fromA:1e9;if(c-a>=r)for(;l&&l.from<c;){let f=l;if(a>=f.from||c<=f.to||u){let p=Math.max(f.from,a)-u,g=Math.min(f.to,c)-u;f=p>=g?null:new yr(p,g,f.tree,f.offset+u,o>0,!!h)}if(f&&i.push(f),l.to>c)break;l=s<e.length?e[s++]:null}if(!h)break;a=h.toA,u=h.toA-h.toB}return i}}class Vy{startParse(e,n,r){return typeof e=="string"&&(e=new aC(e)),r=r?r.length?r.map(i=>new tu(i.from,i.to)):[new tu(0,0)]:[new tu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class aC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new G({perNode:!0});let uC=0;class bt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=uC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof bt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new bt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Lo(e);return r=>r.modified.indexOf(n)>-1?r:Lo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let hC=0;class Lo{constructor(e){this.name=e,this.instances=[],this.id=hC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&cC(n,o.modified));if(r)return r;let i=[],s=new bt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=fC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Lo.get(o,a));return s}}function cC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function fC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function dC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let c=0;;){if(o=="..."&&c>0&&c+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),c+=f[0].length,c==i.length)break;let p=i[c++];if(c==i.length&&p=="!"){l=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);o=i.slice(c)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let h=new Ro(r,l,a>0?s.slice(0,a):null);e[u]=h.sort(e[u])}}return Uy.add(e)}const Uy=new G;class Ro{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ro.empty=new Ro([],2,null);function $y(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function pC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function mC(t,e,n,r=0,i=t.length){let s=new gC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class gC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(l)));let u=i,h=yC(e)||Ro.empty,c=pC(s,h.tags);if(c&&(u&&(u+=" "),u+=c,h.mode==1&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(n,o),u),h.opaque)return;let f=e.tree&&e.tree.prop(G.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),v=e.firstChild();for(let w=0,m=o;;w++){let y=w<f.overlay.length?f.overlay[w]:null,x=y?y.from+o:a,S=Math.max(n,m),C=Math.min(r,x);if(S<C&&v)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;m=y.to+o,m>n&&(this.highlightRange(p.cursor(),Math.max(n,y.from+o),Math.min(r,m),"",g),this.startSpan(Math.min(r,m),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function yC(t){let e=t.type.prop(Uy);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const D=bt.define,Ml=D(),Tn=D(),Op=D(Tn),Dp=D(Tn),Nn=D(),Tl=D(Nn),nu=D(Nn),Zt=D(),lr=D(Zt),Jt=D(),Xt=D(),zh=D(),Ii=D(zh),Nl=D(),N={comment:Ml,lineComment:D(Ml),blockComment:D(Ml),docComment:D(Ml),name:Tn,variableName:D(Tn),typeName:Op,tagName:D(Op),propertyName:Dp,attributeName:D(Dp),className:D(Tn),labelName:D(Tn),namespace:D(Tn),macroName:D(Tn),literal:Nn,string:Tl,docString:D(Tl),character:D(Tl),attributeValue:D(Tl),number:nu,integer:D(nu),float:D(nu),bool:D(Nn),regexp:D(Nn),escape:D(Nn),color:D(Nn),url:D(Nn),keyword:Jt,self:D(Jt),null:D(Jt),atom:D(Jt),unit:D(Jt),modifier:D(Jt),operatorKeyword:D(Jt),controlKeyword:D(Jt),definitionKeyword:D(Jt),moduleKeyword:D(Jt),operator:Xt,derefOperator:D(Xt),arithmeticOperator:D(Xt),logicOperator:D(Xt),bitwiseOperator:D(Xt),compareOperator:D(Xt),updateOperator:D(Xt),definitionOperator:D(Xt),typeOperator:D(Xt),controlOperator:D(Xt),punctuation:zh,separator:D(zh),bracket:Ii,angleBracket:D(Ii),squareBracket:D(Ii),paren:D(Ii),brace:D(Ii),content:Zt,heading:lr,heading1:D(lr),heading2:D(lr),heading3:D(lr),heading4:D(lr),heading5:D(lr),heading6:D(lr),contentSeparator:D(Zt),list:D(Zt),quote:D(Zt),emphasis:D(Zt),strong:D(Zt),link:D(Zt),monospace:D(Zt),strikethrough:D(Zt),inserted:D(),deleted:D(),changed:D(),invalid:D(),meta:Nl,documentMeta:D(Nl),annotation:D(Nl),processingInstruction:D(Nl),definition:bt.defineModifier("definition"),constant:bt.defineModifier("constant"),function:bt.defineModifier("function"),standard:bt.defineModifier("standard"),local:bt.defineModifier("local"),special:bt.defineModifier("special")};for(let t in N){let e=N[t];e instanceof bt&&(e.name=t)}$y([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var ru;const Gr=new G;function vC(t){return F.define({combine:t?e=>e.concat(t):void 0})}const xC=new G;class zt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Z.prototype.hasOwnProperty("tree")||Object.defineProperty(Z.prototype,"tree",{get(){return vt(this)}}),this.parser=n,this.extension=[er.of(this),Z.languageData.of((s,l,o)=>{let a=Pp(s,l,o),u=a.type.prop(Gr);if(!u)return[];let h=s.facet(u),c=a.type.prop(xC);if(c){let f=a.resolve(l-a.from,o);for(let p of c)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(h)}}return h})].concat(r)}isActiveAt(e,n,r=-1){return Pp(e,n,r).type.prop(Gr)==this.data}findRegions(e){let n=e.facet(er);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(Gr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(G.mounted);if(o){if(o.tree.prop(Gr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof pe&&i(u,s.positions[a]+l)}};return i(vt(e),0),r}get allowsNesting(){return!0}}zt.setState=oe.define();function Pp(t,e,n){let r=t.facet(er),i=vt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Be.ExcludeBuffers))s.type.isTop&&(i=s);return i}function vt(t){let e=t.field(zt.state,!1);return e?e.tree:pe.empty}class wC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Fi=null;class yi{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new yi(e,n,[],pe.empty,0,r,[],null)}startParse(){return this.parser.startParse(new wC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=pe.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(yr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(yr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Fi;Fi=this;try{return e()}finally{Fi=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Lp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,h,c,f)=>a.push({fromA:u,toA:h,fromB:c,toB:f})),r=yr.applyChanges(r,a),i=pe.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);h<c&&o.push({from:h,to:c})}}}return new yi(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Lp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Vy{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Fi;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new pe(at.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Fi}}function Lp(t,e,n){return yr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class vi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new vi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=yi.create(e.facet(er).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new vi(r)}}zt.state=$t.define({create:vi.init,update(t,e){for(let n of e.effects)if(n.is(zt.setState))return n.value;return e.startState.facet(er)!=e.state.facet(er)?vi.init(e.state):t.apply(e)}});let Ky=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ky=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const iu=typeof navigator<"u"&&(!((ru=navigator.scheduling)===null||ru===void 0)&&ru.isInputPending)?()=>navigator.scheduling.isInputPending():null,kC=yt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(zt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(zt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Ky(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(zt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!iu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>iu&&iu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:zt.setState.of(new vi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>sn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),er=F.define({combine(t){return t.length?t[0]:null},enables:t=>[zt.state,kC,j.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),SC=F.define(),sf=F.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Mr(t){let e=t.facet(sf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ls(t,e){let n="",r=t.tabSize,i=t.facet(sf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function lf(t,e){t instanceof Z&&(t=new ha(t));for(let r of t.state.facet(SC)){let i=r(t,e);if(i!==void 0)return i}let n=vt(t.state);return n.length>=e?CC(t,n,e):null}class ha{constructor(e,n={}){this.state=e,this.options=n,this.unit=Mr(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return la(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const qy=new G;function CC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return Gy(r,t,n)}function Gy(t,e,n){for(let r=t;r;r=r.next){let i=AC(r.node);if(i)return i(of.create(e,n,r))}return 0}function bC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function AC(t){let e=t.type.prop(qy);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(G.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>NC(l,!0,1,void 0,s&&!bC(l)?i.from:void 0)}return t.parent==null?EC:null}function EC(){return 0}class of extends ha{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new of(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(MC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Gy(this.context.next,this.base,this.pos)}}function MC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function TC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function NC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=TC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const OC=200;function DC(){return Z.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+OC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let h=l.doc.lineAt(u);if(h.from==o)continue;o=h.from;let c=lf(l,h.from);if(c==null)continue;let f=/^\s*/.exec(h.text)[0],p=Ls(l,c);f!=p&&a.push({from:h.from,to:h.from+f.length,insert:p})}return a.length?[t,{changes:a,sequential:!0}]:t})}const PC=F.define(),LC=new G;function RC(t,e,n){let r=vt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(LC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!BC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function BC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Rp(t,e,n){for(let r of t.facet(PC)){let i=r(t,e,n);if(i)return i}return RC(t,e,n)}function Qy(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Yy=oe.define({map:Qy}),af=oe.define({map:Qy}),Bo=$t.define({create(){return U.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Bp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Yy)&&!jC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Jy),i=r?U.replace({widget:new zC(r(e.state,n.value))}):jp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(af)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Bp(t,e.selection.main.head)),t},provide:t=>j.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(jp.range(r,i))}return U.set(e,!0)}});function Bp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function _h(t,e,n){var r;let i=null;return(r=t.field(Bo,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function jC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const IC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Jy=F.define({combine(t){return sa(t,IC)}});function FC(t){return[Bo,WC]}function Xy(t,e){let{state:n}=t,r=n.facet(Jy),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=_h(t.state,o.from,o.to);a&&t.dispatch({effects:af.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const jp=U.replace({widget:new class extends Ws{toDOM(t){return Xy(t,null)}}});class zC extends Ws{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Xy(e,this.value)}}const _C={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class su extends Xn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function HC(t={}){let e={..._C,...t},n=new su(e,!0),r=new su(e,!1),i=yt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(er)!=l.state.facet(er)||l.startState.field(Bo,!1)!=l.state.field(Bo,!1)||vt(l.startState)!=vt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Cr;for(let a of l.viewportLineBlocks){let u=_h(l.state,a.from,a.to)?r:Rp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,qS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||te.empty},initialSpacer(){return new su(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=_h(l.state,o.from,o.to);if(u)return l.dispatch({effects:af.of(u)}),!0;let h=Rp(l.state,o.from,o.to);return h?(l.dispatch({effects:Yy.of(h)}),!0):!1}}}),FC()]}const WC=j.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ca{constructor(e,n){this.specs=e;let r;function i(o){let a=Qn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof zt?o=>o.prop(Gr)==l.data:l?o=>o==l:void 0,this.style=$y(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Qn(r):null,this.themeType=n.themeType}static define(e,n){return new ca(e,n||{})}}const Hh=F.define(),VC=F.define({combine(t){return t.length?[t[0]]:null}});function lu(t){let e=t.facet(Hh);return e.length?e:t.facet(VC)}function UC(t,e){let n=[KC],r;return t instanceof ca&&(t.module&&n.push(j.styleModule.of(t.module)),r=t.themeType),r?n.push(Hh.computeN([j.darkTheme],i=>i.facet(j.darkTheme)==(r=="dark")?[t]:[])):n.push(Hh.of(t)),n}class $C{constructor(e){this.markCache=Object.create(null),this.tree=vt(e.state),this.decorations=this.buildDeco(e,lu(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=vt(e.state),r=lu(e.state),i=r!=lu(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return U.none;let r=new Cr;for(let{from:i,to:s}of e.visibleRanges)mC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=U.mark({class:a})))},i,s);return r.finish()}}const KC=ra.high(yt.fromClass($C,{decorations:t=>t.decorations})),qC=j.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Zy=1e4,ev="()[]{}",tv=F.define({combine(t){return sa(t,{afterCursor:!0,brackets:ev,maxScanDistance:Zy,renderMatch:YC})}}),GC=U.mark({class:"cm-matchingBracket"}),QC=U.mark({class:"cm-nonmatchingBracket"});function YC(t){let e=[],n=t.matched?GC:QC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const JC=$t.define({create(){return U.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(tv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=ln(e.state,i.head,-1,r)||i.head>0&&ln(e.state,i.head-1,1,r)||r.afterCursor&&(ln(e.state,i.head,1,r)||i.head<e.state.doc.length&&ln(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return U.set(n,!0)},provide:t=>j.decorations.from(t)}),XC=[JC,qC];function ZC(t={}){return[tv.of(t),XC]}const e2=new G;function Wh(t,e,n){let r=t.prop(e<0?G.openedBy:G.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Vh(t){let e=t.type.prop(e2);return e?e(t.node):t}function ln(t,e,n,r={}){let i=r.maxScanDistance||Zy,s=r.brackets||ev,l=vt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Wh(a.type,n,s);if(u&&a.from<a.to){let h=Vh(a);if(h&&(n>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return t2(t,e,n,a,h,u,s)}}return n2(t,e,n,l,o.type,i,s)}function t2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,h=o==null?void 0:o.cursor();if(h&&(n<0?h.childBefore(r.from):h.childAfter(r.to)))do if(n<0?h.to<=r.from:h.from>=r.to){if(u==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let c=Vh(h);return{start:a,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(Wh(h.type,n,l))u++;else if(Wh(h.type,-n,l)){if(u==0){let c=Vh(h);return{start:a,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}u--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function n2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),c=0;for(let f=0;!h.next().done&&f<=s;){let p=h.value;n<0&&(f+=p.length);let g=e+f*n;for(let v=n>0?0:p.length-1,w=n>0?p.length:-1;v!=w;v+=n){let m=l.indexOf(p[v]);if(!(m<0||r.resolveInner(g+v,1).type!=i))if(m%2==0==n>0)c++;else{if(c==1)return{start:u,end:{from:g+v,to:g+v+1},matched:m>>1==a>>1};c--}}n>0&&(f+=p.length)}return h.done?{start:u,matched:!1}:null}function Ip(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class nv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ip(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Ip(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function r2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||i2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||cf,mergeTokens:t.mergeTokens!==!1}}function i2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Fp=new WeakMap;class uf extends zt{constructor(e){let n=vC(e.languageData),r=r2(e),i,s=new class extends Vy{createParse(l,o,a){return new l2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=u2(n,this),i=this,this.streamParser=r,this.stateAfter=new G({perNode:!0}),this.tokenTable=e.tokenTable?new lv(r.tokenTable):a2}static define(e){return new uf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Fp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=hf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let h=r?r(a.from):-1,c=new nv(a.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;c.pos<u-a.from;)iv(this.streamParser.token,c,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Fp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function hf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof pe&&a<i&&hf(t,o,a,r,i);if(u)return u}return null}function rv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof pe){if(!(a=rv(t,o,n-l,r-l,i)))break;return i?new pe(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function s2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&hf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=rv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Mr(i):4),tree:pe.empty}}class l2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=yi.get(),l=i[0].from,{state:o,tree:a}=s2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Mr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=yi.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new nv(n,e?e.state.tabSize:4,e?Mr(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=iv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=pe.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:o2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new pe(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new pe(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function iv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const cf=Object.create(null),Rs=[at.none],o2=new ef(Rs),zp=[],_p=Object.create(null),sv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])sv[t]=ov(cf,e);class lv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),sv)}resolve(e){return e?this.table[e]||(this.table[e]=ov(this.extra,e)):0}}const a2=new lv(cf);function ou(t,e){zp.indexOf(t)>-1||(zp.push(t),console.warn(e))}function ov(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let h=t[u]||N[u];h?typeof h=="function"?a.length?a=a.map(h):ou(u,`Modifier ${u} used at start of tag`):a.length?ou(u,`Tag ${u} used as modifier`):a=Array.isArray(h)?h:[h]:ou(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=_p[i];if(s)return s.id;let l=_p[i]=at.define({id:Rs.length,name:r,props:[dC({[r]:n})]});return Rs.push(l),l.id}function u2(t,e){let n=at.define({id:Rs.length,name:"Document",props:[Gr.add(()=>t),qy.add(()=>r=>e.getIndent(r))],top:!0});return Rs.push(n),n}Ee.RTL,Ee.LTR;const h2="#e5c07b",Hp="#e06c75",c2="#56b6c2",f2="#ffffff",Jl="#abb2bf",Uh="#7d8799",d2="#61afef",p2="#98c379",Wp="#d19a66",m2="#c678dd",g2="#21252b",Vp="#2c313a",Up="#282c34",au="#353a42",y2="#3E4451",$p="#528bff",v2=j.theme({"&":{color:Jl,backgroundColor:Up},".cm-content":{caretColor:$p},".cm-cursor, .cm-dropCursor":{borderLeftColor:$p},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:y2},".cm-panels":{backgroundColor:g2,color:Jl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Up,color:Uh,border:"none"},".cm-activeLineGutter":{backgroundColor:Vp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:au},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:au,borderBottomColor:au},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Vp,color:Jl}}},{dark:!0}),x2=ca.define([{tag:N.keyword,color:m2},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:Hp},{tag:[N.function(N.variableName),N.labelName],color:d2},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:Wp},{tag:[N.definition(N.name),N.separator],color:Jl},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:h2},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:c2},{tag:[N.meta,N.comment],color:Uh},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:Uh,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:Hp},{tag:[N.atom,N.bool,N.special(N.variableName)],color:Wp},{tag:[N.processingInstruction,N.string,N.inserted],color:p2},{tag:N.invalid,color:f2}]),w2=[v2,UC(x2)],k2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=df(t.state,n.from);return r.line?S2(t):r.block?b2(t):!1};function ff(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const S2=ff(M2,0),C2=ff(av,0),b2=ff((t,e)=>av(t,e,E2(e)),0);function df(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const zi=50;function A2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-zi,r),l=t.sliceDoc(i,i+zi),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let h,c;i-r<=2*zi?h=c=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+zi),c=t.sliceDoc(i-zi,i));let f=/^\s*/.exec(h)[0].length,p=/\s*$/.exec(c)[0].length,g=c.length-p-n.length;return h.slice(f,f+e.length)==e&&c.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:i-p-n.length,margin:/\s/.test(c.charAt(g-1))?1:0}}:null}function E2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function av(t,e,n=e.selection.ranges){let r=n.map(s=>df(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>A2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:h}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function M2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=df(e,s).line;if(u){for(let h=s;h<=l;){let c=e.doc.lineAt(h);if(c.from>i&&(s==l||l>c.from)){i=c.from;let f=/^\s*/.exec(c.text)[0].length,p=f==c.length,g=c.text.slice(f,f+u.length)==u?f:-1;f<c.text.length&&f<a&&(a=f),r.push({line:c,comment:g,token:u,indent:f,empty:p,single:!1})}h=c.to+1}if(a<1e9)for(let h=o;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:h,single:c}of r)(c||!h)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,h=u+a.length;l.text[h-l.from]==" "&&h++,s.push({from:u,to:h})}return{changes:s}}return null}function Ci(t,e){return M.create(t.ranges.map(e),t.mainIndex)}function Kt(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qt({state:t,dispatch:e},n){let r=Ci(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Kt(t,r)),!0)}function fa(t,e){return M.cursor(e?t.to:t.from)}function uv(t,e){return qt(t,n=>n.empty?t.moveByChar(n,e):fa(n,e))}function Qe(t){return t.textDirectionAt(t.state.selection.main.head)==Ee.LTR}const hv=t=>uv(t,!Qe(t)),cv=t=>uv(t,Qe(t));function fv(t,e){return qt(t,n=>n.empty?t.moveByGroup(n,e):fa(n,e))}const T2=t=>fv(t,!Qe(t)),N2=t=>fv(t,Qe(t));function O2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function da(t,e,n){let r=vt(t).resolveInner(e.head),i=n?G.closedBy:G.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;O2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?ln(t,r.from,1):ln(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,M.cursor(o,n?-1:1)}const D2=t=>qt(t,e=>da(t.state,e,!Qe(t))),P2=t=>qt(t,e=>da(t.state,e,Qe(t)));function dv(t,e){return qt(t,n=>{if(!n.empty)return fa(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const pv=t=>dv(t,!1),mv=t=>dv(t,!0);function gv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(j.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function yv(t,e){let n=gv(t),{state:r}=t,i=Ci(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):fa(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=j.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Kt(r,i),{effects:s}),!0}const Kp=t=>yv(t,!1),$h=t=>yv(t,!0);function ir(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=M.cursor(r.from+s))}return i}const L2=t=>qt(t,e=>ir(t,e,!0)),R2=t=>qt(t,e=>ir(t,e,!1)),B2=t=>qt(t,e=>ir(t,e,!Qe(t))),j2=t=>qt(t,e=>ir(t,e,Qe(t))),I2=t=>qt(t,e=>M.cursor(t.lineBlockAt(e.head).from,1)),F2=t=>qt(t,e=>M.cursor(t.lineBlockAt(e.head).to,-1));function z2(t,e,n){let r=!1,i=Ci(t.selection,s=>{let l=ln(t,s.head,-1)||ln(t,s.head,1)||s.head>0&&ln(t,s.head-1,1)||s.head<t.doc.length&&ln(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return M.cursor(o)});return r?(e(Kt(t,i)),!0):!1}const _2=({state:t,dispatch:e})=>z2(t,e);function Lt(t,e){let n=Ci(t.state.selection,r=>{let i=e(r);return M.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Kt(t.state,n)),!0)}function vv(t,e){return Lt(t,n=>t.moveByChar(n,e))}const xv=t=>vv(t,!Qe(t)),wv=t=>vv(t,Qe(t));function kv(t,e){return Lt(t,n=>t.moveByGroup(n,e))}const H2=t=>kv(t,!Qe(t)),W2=t=>kv(t,Qe(t)),V2=t=>Lt(t,e=>da(t.state,e,!Qe(t))),U2=t=>Lt(t,e=>da(t.state,e,Qe(t)));function Sv(t,e){return Lt(t,n=>t.moveVertically(n,e))}const Cv=t=>Sv(t,!1),bv=t=>Sv(t,!0);function Av(t,e){return Lt(t,n=>t.moveVertically(n,e,gv(t).height))}const qp=t=>Av(t,!1),Gp=t=>Av(t,!0),$2=t=>Lt(t,e=>ir(t,e,!0)),K2=t=>Lt(t,e=>ir(t,e,!1)),q2=t=>Lt(t,e=>ir(t,e,!Qe(t))),G2=t=>Lt(t,e=>ir(t,e,Qe(t))),Q2=t=>Lt(t,e=>M.cursor(t.lineBlockAt(e.head).from)),Y2=t=>Lt(t,e=>M.cursor(t.lineBlockAt(e.head).to)),Qp=({state:t,dispatch:e})=>(e(Kt(t,{anchor:0})),!0),Yp=({state:t,dispatch:e})=>(e(Kt(t,{anchor:t.doc.length})),!0),Jp=({state:t,dispatch:e})=>(e(Kt(t,{anchor:t.selection.main.anchor,head:0})),!0),Xp=({state:t,dispatch:e})=>(e(Kt(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),J2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),X2=({state:t,dispatch:e})=>{let n=pa(t).map(({from:r,to:i})=>M.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:M.create(n),userEvent:"select"})),!0},Z2=({state:t,dispatch:e})=>{let n=Ci(t.selection,r=>{let i=vt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return M.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Kt(t,n)),!0)};function Ev(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Kt(n,M.create(i,i.length-1))),!0)}const eb=t=>Ev(t,!1),tb=t=>Ev(t,!0),nb=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=M.create([n.main]):n.main.empty||(r=M.create([M.cursor(n.main.head)])),r?(e(Kt(t,r)),!0):!1};function Ks(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Ol(t,a,!1)):a>l&&(n="delete.forward",a=Ol(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Ol(t,l,!1),o=Ol(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:M.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?j.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ol(t,e,n){if(t instanceof j)for(let r of t.state.facet(j.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Mv=(t,e,n)=>Ks(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=la(o,s.tabSize),h=u%Mr(s)||Mr(s);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;a=i}else a=je(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=je(l.text,a-l.from,!1,!1)+l.from);return a}),Kh=t=>Mv(t,!1,!0),Tv=t=>Mv(t,!0,!1),Nv=(t,e)=>Ks(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=je(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),h=l(u);if(o!=null&&h!=o)break;(u!=" "||r!=n.head)&&(o=h),r=a}return r}),Ov=t=>Nv(t,!1),rb=t=>Nv(t,!0),ib=t=>Ks(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),sb=t=>Ks(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),lb=t=>Ks(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),ob=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Y.of(["",""])},range:M.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},ab=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:je(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:je(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:M.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function pa(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Dv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of pa(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(M.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(M.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:M.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ub=({state:t,dispatch:e})=>Dv(t,e,!1),hb=({state:t,dispatch:e})=>Dv(t,e,!0);function Pv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of pa(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const cb=({state:t,dispatch:e})=>Pv(t,e,!1),fb=({state:t,dispatch:e})=>Pv(t,e,!0),db=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(pa(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ci(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function pb(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=vt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(G.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Zp=Lv(!1),mb=Lv(!0);function Lv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&pb(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new ha(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=lf(u,s);for(h==null&&(h=la(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let c=["",Ls(e,h)];return a&&c.push(Ls(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:Y.of(c)},range:M.cursor(s+1+c[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function pf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:M.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const gb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new ha(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=pf(t,(s,l,o)=>{let a=lf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],h=Ls(t,a);(u!=h||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},yb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(pf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(sf)})}),{userEvent:"input.indent"})),!0),vb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(pf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=la(i,t.tabSize),l=0,o=Ls(t,Math.max(0,s-Mr(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),xb=t=>(t.setTabFocusMode(),!0),wb=[{key:"Ctrl-b",run:hv,shift:xv,preventDefault:!0},{key:"Ctrl-f",run:cv,shift:wv},{key:"Ctrl-p",run:pv,shift:Cv},{key:"Ctrl-n",run:mv,shift:bv},{key:"Ctrl-a",run:I2,shift:Q2},{key:"Ctrl-e",run:F2,shift:Y2},{key:"Ctrl-d",run:Tv},{key:"Ctrl-h",run:Kh},{key:"Ctrl-k",run:ib},{key:"Ctrl-Alt-h",run:Ov},{key:"Ctrl-o",run:ob},{key:"Ctrl-t",run:ab},{key:"Ctrl-v",run:$h}],kb=[{key:"ArrowLeft",run:hv,shift:xv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:T2,shift:H2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:B2,shift:q2,preventDefault:!0},{key:"ArrowRight",run:cv,shift:wv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:N2,shift:W2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:j2,shift:G2,preventDefault:!0},{key:"ArrowUp",run:pv,shift:Cv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Qp,shift:Jp},{mac:"Ctrl-ArrowUp",run:Kp,shift:qp},{key:"ArrowDown",run:mv,shift:bv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Yp,shift:Xp},{mac:"Ctrl-ArrowDown",run:$h,shift:Gp},{key:"PageUp",run:Kp,shift:qp},{key:"PageDown",run:$h,shift:Gp},{key:"Home",run:R2,shift:K2,preventDefault:!0},{key:"Mod-Home",run:Qp,shift:Jp},{key:"End",run:L2,shift:$2,preventDefault:!0},{key:"Mod-End",run:Yp,shift:Xp},{key:"Enter",run:Zp,shift:Zp},{key:"Mod-a",run:J2},{key:"Backspace",run:Kh,shift:Kh,preventDefault:!0},{key:"Delete",run:Tv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ov,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:rb,preventDefault:!0},{mac:"Mod-Backspace",run:sb,preventDefault:!0},{mac:"Mod-Delete",run:lb,preventDefault:!0}].concat(wb.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Sb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:D2,shift:V2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:P2,shift:U2},{key:"Alt-ArrowUp",run:ub},{key:"Shift-Alt-ArrowUp",run:cb},{key:"Alt-ArrowDown",run:hb},{key:"Shift-Alt-ArrowDown",run:fb},{key:"Mod-Alt-ArrowUp",run:eb},{key:"Mod-Alt-ArrowDown",run:tb},{key:"Escape",run:nb},{key:"Mod-Enter",run:mb},{key:"Alt-l",mac:"Ctrl-l",run:X2},{key:"Mod-i",run:Z2,preventDefault:!0},{key:"Mod-[",run:vb},{key:"Mod-]",run:yb},{key:"Mod-Alt-\\",run:gb},{key:"Shift-Mod-k",run:db},{key:"Shift-Mod-\\",run:_2},{key:"Mod-/",run:k2},{key:"Alt-A",run:C2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:xb}].concat(kb),em=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Bs{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(em(o)):em,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return k0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Uw(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=S0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Bs.prototype[Symbol.iterator]=function(){return this});const Rv={from:-1,to:-1,match:/.*/.exec("")},mf="gm"+(/x/.unicode==null?"":"u");class Bv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Rv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new jv(e,n,r,i,s);this.re=new RegExp(n,mf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=jo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=jo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const uu=new WeakMap;class ii{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=uu.get(e);if(!i||i.from>=r||i.to<=n){let o=new ii(n,e.sliceString(n,r));return uu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),uu.set(e,new ii(l,s)),new ii(n,s.slice(n-l,r-l))}}class jv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Rv,this.matchPos=jo(e,i),this.re=new RegExp(n,mf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ii.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=jo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ii.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Bv.prototype[Symbol.iterator]=jv.prototype[Symbol.iterator]=function(){return this});function Cb(t){try{return new RegExp(t,mf),!0}catch{return!1}}function jo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function qh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Pe("input",{class:"cm-textfield",name:"line",value:e}),r=Pe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:as.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Pe("label",t.state.phrase("Go to line"),": ",n)," ",Pe("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Pe("button",{name:"close",onclick:()=>{t.dispatch({effects:as.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,h,c]=s,f=h?+h.slice(1):0,p=u?+u:o.number;if(u&&c){let w=p/100;a&&(w=w*(a=="-"?-1:1)+o.number/l.doc.lines),p=Math.round(l.doc.lines*w)}else u&&a&&(p=p*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,p))),v=M.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[as.of(!1),j.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const as=oe.define(),tm=$t.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(as)&&(t=n.value);return t},provide:t=>Do.from(t,e=>e?qh:null)}),bb=t=>{let e=Oo(t,qh);if(!e){let n=[as.of(!0)];t.state.field(tm,!1)==null&&n.push(oe.appendConfig.of([tm,Ab])),t.dispatch({effects:n}),e=Oo(t,qh)}return e&&e.dom.querySelector("input").select(),!0},Ab=j.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Eb=({state:t,dispatch:e})=>{let{selection:n}=t,r=M.create(n.ranges.map(i=>t.wordAt(i.head)||M.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Mb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Bs(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Bs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Tb=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Eb({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Mb(t,r);return i?(e(t.update({selection:t.selection.addRange(M.range(i.from,i.to),!1),effects:j.scrollIntoView(i.to)})),!0):!1},bi=F.define({combine(t){return sa(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new _b(e),scrollToMatch:e=>j.scrollIntoView(e)})}});class Iv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Cb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Pb(this):new Ob(this)}getCursor(e,n=0,r){let i=e.doc?e:Z.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Lr(this,i,n,r):Pr(this,i,n,r)}}class Fv{constructor(e){this.spec=e}}function Pr(t,e,n,r){return new Bs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Nb(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Nb(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Io(i,n-s))!=Ie.Word||e(Fo(i,n-s))!=Ie.Word)&&(e(Fo(i,r-s))!=Ie.Word||e(Io(i,r-s))!=Ie.Word))}class Ob extends Fv{constructor(e){super(e)}nextMatch(e,n,r){let i=Pr(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Pr(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Pr(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Pr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Pr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Lr(t,e,n,r){return new Bv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Db(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Io(t,e){return t.slice(je(t,e,!1),e)}function Fo(t,e){return t.slice(e,je(t,e))}function Db(t){return(e,n,r)=>!r[0].length||(t(Io(r.input,r.index))!=Ie.Word||t(Fo(r.input,r.index))!=Ie.Word)&&(t(Fo(r.input,r.index+r[0].length))!=Ie.Word||t(Io(r.input,r.index+r[0].length))!=Ie.Word)}class Pb extends Fv{nextMatch(e,n,r){let i=Lr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Lr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Lr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Lr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Lr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const js=oe.define(),gf=oe.define(),Kn=$t.define({create(t){return new hu(Gh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(js)?t=new hu(n.value.create(),t.panel):n.is(gf)&&(t=new hu(t.query,n.value?yf:null));return t},provide:t=>Do.from(t,e=>e.panel)});class hu{constructor(e,n){this.query=e,this.panel=n}}const Lb=U.mark({class:"cm-searchMatch"}),Rb=U.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Bb=yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Kn))}update(t){let e=t.state.field(Kn);(e!=t.startState.field(Kn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return U.none;let{view:n}=this,r=new Cr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,h)=>{let c=n.state.selection.ranges.some(f=>f.from==u&&f.to==h);r.add(u,h,c?Rb:Lb)})}return r.finish()}},{decorations:t=>t.decorations});function qs(t){return e=>{let n=e.state.field(Kn,!1);return n&&n.query.spec.valid?t(e,n):Hv(e)}}const zo=qs((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=M.single(r.from,r.to),s=t.state.facet(bi);return t.dispatch({selection:i,effects:[vf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),_v(t),!0}),_o=qs((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=M.single(i.from,i.to),l=t.state.facet(bi);return t.dispatch({selection:s,effects:[vf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),_v(t),!0}),jb=qs((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:M.create(n.map(r=>M.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Ib=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Bs(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(M.range(o.value.from,o.value.to))}return e(t.update({selection:M.create(s,l),userEvent:"select.search.matches"})),!0},nm=qs((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,h=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),h.push(j.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let c=t.state.changes(o);return l&&(a=M.single(l.from,l.to).map(c),h.push(vf(t,l)),h.push(n.facet(bi).scrollToMatch(a.main,t))),t.dispatch({changes:c,selection:a,effects:h,userEvent:"input.replace"}),!0}),Fb=qs((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:j.announce.of(r),userEvent:"input.replace.all"}),!0});function yf(t){return t.state.facet(bi).createPanel(t)}function Gh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(bi);return new Iv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function zv(t){let e=Oo(t,yf);return e&&e.dom.querySelector("[main-field]")}function _v(t){let e=zv(t);e&&e==t.root.activeElement&&e.select()}const Hv=t=>{let e=t.state.field(Kn,!1);if(e&&e.panel){let n=zv(t);if(n&&n!=t.root.activeElement){let r=Gh(t.state,e.query.spec);r.valid&&t.dispatch({effects:js.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[gf.of(!0),e?js.of(Gh(t.state,e.query.spec)):oe.appendConfig.of(Wb)]});return!0},Wv=t=>{let e=t.state.field(Kn,!1);if(!e||!e.panel)return!1;let n=Oo(t,yf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:gf.of(!1)}),!0},zb=[{key:"Mod-f",run:Hv,scope:"editor search-panel"},{key:"F3",run:zo,shift:_o,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:zo,shift:_o,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Wv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Ib},{key:"Mod-Alt-g",run:bb},{key:"Mod-d",run:Tb,preventDefault:!0}];class _b{constructor(e){this.view=e;let n=this.query=e.state.field(Kn).query.spec;this.commit=this.commit.bind(this),this.searchField=Pe("input",{value:n.search,placeholder:ht(e,"Find"),"aria-label":ht(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pe("input",{value:n.replace,placeholder:ht(e,"Replace"),"aria-label":ht(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pe("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Pe("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Pe("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Pe("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Pe("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>zo(e),[ht(e,"next")]),r("prev",()=>_o(e),[ht(e,"previous")]),r("select",()=>jb(e),[ht(e,"all")]),Pe("label",null,[this.caseField,ht(e,"match case")]),Pe("label",null,[this.reField,ht(e,"regexp")]),Pe("label",null,[this.wordField,ht(e,"by word")]),...e.state.readOnly?[]:[Pe("br"),this.replaceField,r("replace",()=>nm(e),[ht(e,"replace")]),r("replaceAll",()=>Fb(e),[ht(e,"replace all")])],Pe("button",{name:"close",onclick:()=>Wv(e),"aria-label":ht(e,"close"),type:"button"},[""])])}commit(){let e=new Iv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:js.of(e)}))}keydown(e){zS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?_o:zo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),nm(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(js)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(bi).top}}function ht(t,e){return t.state.phrase(e)}const Dl=30,Pl=/[\s\.,:;?!]/;function vf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Dl),l=Math.min(i,n+Dl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Dl;a++)if(!Pl.test(o[a+1])&&Pl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Dl;a--)if(!Pl.test(o[a-1])&&Pl.test(o[a])){o=o.slice(0,a);break}}return j.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const Hb=j.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Wb=[Kn,ra.low(Bb),Hb],Vb=uf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Rt.TRANSITION)||t.match(Rt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Rt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Rt.CHARACTER))||(n=t.match(Rt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Rt.IMAGE)||t.match(Rt.AUDIO)?"link":t.match(Rt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Rt.TITLE))return"def";if(n=t.match(Rt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Rt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),Ub=yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(U.line({class:"cm-keyword"}).range(s.from)),e.push(U.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(U.line({class:"cm-header"}).range(s.from)),e.push(U.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(U.line({class:"cm-atom"}).range(s.from)),e.push(U.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(U.line({class:"cm-synopsis"}).range(s.from)),e.push(U.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(U.line({class:"cm-number"}).range(s.from)),e.push(U.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(U.line({class:"cm-variable"}).range(s.from)),e.push(U.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return U.set(e)}},{decorations:t=>t.decorations}),Vv=B.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=B.useRef(null),l=B.useRef(null);return B.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:j.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),B.useEffect(()=>{if(!s.current)return;const o=[eC(),WS(),HC(),ZC(),DC(),j.lineWrapping,Vb,Ub,j.domEventHandlers({mouseup:(h,c)=>{setTimeout(()=>{const f=c.state.selection.main.head,p=c.state.doc.lineAt(f);n(p.number-1)},10)}}),w2,Ry.of([...Sb,...zb]),j.updateListener.of(h=>{if(h.docChanged&&e(h.state.doc.toString()),h.selectionSet&&!h.docChanged){const c=h.state.selection.main.head,f=h.state.doc.lineAt(c);n(f.number-1)}}),j.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=Z.create({doc:t,extensions:o}),u=new j({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),B.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),d.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});Vv.displayName="CodeMirrorEditor";function $b(){const t=()=>{window.location.href="/auth/google"};return d.jsx("div",{className:"login-container",children:d.jsx("div",{className:"login-card",children:d.jsx("div",{className:"login-content",children:d.jsxs("button",{className:"google-login-btn",onClick:t,children:[d.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"20",height:"20",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})})})}function Kb(t=""){const[e,n]=B.useState([]),[r,i]=B.useState([]),[s,l]=B.useState(new Map),o=B.useRef(null),[a,u]=B.useState(!0);return B.useEffect(()=>{if(!a){if(t){const c=ga(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}return}(function(){try{const c=new Worker(new URL("/assets/previewWorker-D4zT3tr0.js",import.meta.url),{type:"module"});return c.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},c.onmessage=f=>{const{type:p,blocks:g,characters:v,characterLineCounts:w}=f.data;p==="result"?(n(g||[]),i(v||[]),l(w||new Map)):p==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=c,t&&c.postMessage({type:"process",text:t}),()=>{try{c.terminate()}catch{}}}catch(c){console.error("Failed to create module worker, falling back to main-thread parsing:",c),u(!1)}})()},[a]),B.useEffect(()=>{if(!a&&t){const c=ga(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:c=>{if(a&&o.current)o.current.postMessage({type:"process",text:c});else{const f=ga(c);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let qb=1;function Gb(){const t=B.useRef(null),e=B.useRef(new Map),[n,r]=B.useState([]),i=B.useRef(!1);B.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=B.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-DfPotGTI.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:h,requestId:c,message:f}=a.data||{};if(c&&e.current.has(c)){const{resolve:p,reject:g}=e.current.get(c);if(e.current.delete(c),u==="panels")try{p(h)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(h)&&r(h)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=B.useCallback(o=>{const a=s();if(!a)try{const h=a1(o);return r(h),Promise.resolve(h)}catch(h){return Promise.reject(h)}const u=String(qb++);return new Promise((h,c)=>{e.current.set(u,{resolve:h,reject:c});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),c(f)}}).then(h=>(i.current&&r(h),h))},[s]);return{panels:n,parsePanels:l}}const cu=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function Qb(){const[t,e]=B.useState(!1),[n,r]=B.useState(null),[i,s]=B.useState(!1),[l,o]=B.useState(""),[a,u]=B.useState(!1),[h,c]=B.useState(!1),[f,p]=B.useState(!1),[g,v]=B.useState("edit"),[w,m]=B.useState(0),[y,x]=B.useState(!1),[S,C]=B.useState(null),E=B.useRef(null),b=B.useRef(null),O=B.useRef([]),H=B.useRef(null),[R,W]=B.useState(!1),[z,Q]=B.useState(!1);B.useEffect(()=>{fetch("/api/me",{credentials:"include"}).then(k=>k.json()).then(k=>{k.authenticated&&k.user&&r(k.user),e(!0)}).catch(k=>{console.error("Auth check failed:",k),e(!0)})},[]),B.useEffect(()=>{const k=localStorage.getItem("fountain-script");let V=cu;if(k)try{const fe=JSON.parse(k);V=fe.content,x(!0),C(new Date(fe.savedAt))}catch(fe){console.error("Error parsing saved script:",fe),localStorage.removeItem("fountain-script")}o(V),ke(V);try{typeof _=="function"&&_(V)}catch{}},[]),B.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const V=navigator.userAgent||"",fe=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(V),He=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,Gt=(window.innerWidth||screen.width||0)<1024;(fe||He&&Gt)&&s(!0)}catch{}},[]);const{blocks:ee,characters:re,characterLineCounts:tt,processText:ke}=Kb(""),{panels:A,parsePanels:_}=Gb(),[I,$]=B.useState(0),[K,Me]=B.useState("screenplay"),X=B.useRef(null),[_e,ve]=B.useState(!1),kt=B.useRef(null),ut=B.useRef(null),[xf,Ai]=B.useState(!1),sr=B.useRef(null),[wf,Gs]=B.useState(!1);B.useEffect(()=>{O.current=ee},[ee]);const Uv=k=>{o(k),ke(k);try{typeof _=="function"&&_(k)}catch{}},$v=()=>{!Array.isArray(A)||A.length===0||(ma(),Ai(!1),sr.current="user",$(k=>{const V=A.length;return((k-1)%V+V)%V}))},kf=(k=!0)=>{!Array.isArray(A)||A.length===0||(sr.current=k?"user":"auto",k&&(ma(),Ai(!1)),$(V=>{const fe=A.length;return(V+1)%fe}))},Kv=async()=>{xf&&($(0),Ai(!1));try{X.current&&X.current.paused&&(X.current.currentTime=0)}catch{}ve(!0)},qv=()=>{if(X.current){sr.current="user";try{X.current.pause()}catch{}ve(!1)}},Gv=()=>{ma(),Ai(!1);try{$(0)}catch{}};function ma(){try{ut.current&&(clearTimeout(ut.current),ut.current=null)}catch{}try{X.current&&(sr.current="user",X.current.pause(),X.current.currentTime=0)}catch{}ve(!1)}B.useEffect(()=>{const k=X.current;if(!k)return;const V=()=>ve(!0),fe=()=>{sr.current==="user"&&ve(!1)},He=()=>{kf(!1)};return k.addEventListener("play",V),k.addEventListener("pause",fe),k.addEventListener("ended",He),()=>{k.removeEventListener("play",V),k.removeEventListener("pause",fe),k.removeEventListener("ended",He)}},[I,A]),B.useEffect(()=>{if(ut.current&&(clearTimeout(ut.current),ut.current=null),!_e)return;const k=A&&A.length>0?A[I]||A[0]:null;if(!k){ve(!1);return}try{X.current&&X.current.play().catch(()=>{})}catch{}const V=Math.max(1e3,typeof k.duration=="number"?k.duration*1e3:3e3);return ut.current=setTimeout(()=>{!A||I>=A.length-1?(ve(!1),Ai(!0),ut.current=null):$(fe=>fe+1)},V),()=>{ut.current&&(clearTimeout(ut.current),ut.current=null)}},[_e,I,A]),B.useEffect(()=>{if(X.current)try{sr.current==="user"&&(X.current.pause(),X.current.currentTime=0,ve(!1))}catch{}sr.current=null;try{kt.current&&typeof kt.current.scrollTo=="function"&&kt.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[I]),B.useEffect(()=>()=>{try{ut.current&&clearTimeout(ut.current)}catch{}},[]),B.useEffect(()=>{try{const k=A&&A.length>0&&A[I]?A[I]:null}catch{}},[A,I]),B.useEffect(()=>{Gs(!1)},[I]);const Qv=async()=>{if(l.trim()){Q(!0);try{const k={content:l,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(k)),x(!0),C(new Date)}finally{Q(!1)}}},Yv=async()=>{try{await fetch("/auth/logout",{method:"POST",credentials:"include"}),r(null),window.location.href="/"}catch(k){console.error("Logout failed:",k),alert("Logout failed. Please try again.")}},Jv=()=>{const k=localStorage.getItem("fountain-script");if(k)try{const V=JSON.parse(k);o(V.content),ke(V.content),C(new Date(V.savedAt))}catch(V){console.error("Error loading saved script:",V)}},Xv=()=>{localStorage.removeItem("fountain-script"),x(!1),C(null),o(cu),ke(cu)},Zv=async()=>{try{await navigator.clipboard.writeText(l)}catch{const V=document.createElement("textarea");V.value=l,document.body.appendChild(V),V.select(),document.execCommand("copy"),document.body.removeChild(V)}},e1=async()=>{try{const k=await navigator.clipboard.readText();o(k),ke(k)}catch(k){console.error("Error pasting from clipboard:",k)}},t1=()=>{o(""),ke("");try{b.current&&b.current.focus&&b.current.focus()}catch{}},n1=B.useCallback(k=>{const V=O.current;if(m(k),E.current&&V.length>0){let fe=null;for(let He=V.length-1;He>=0;He--)if(V[He].index<=k){fe=V[He];break}if(fe){const He=E.current.querySelector(`[data-line-id="${fe.id}"]`);if(He){const Gt=E.current,bn=Gt.getBoundingClientRect(),Ei=He.getBoundingClientRect(),Qs=Ei.top-bn.top,s1=bn.height,l1=Ei.height,o1=Gt.scrollTop+Qs-s1/2+l1/2;Gt.scrollTo({top:o1,behavior:"smooth"})}}}},[]),r1=B.useCallback(k=>{b.current&&b.current.scrollToLine&&b.current.scrollToLine(k)},[]);B.useEffect(()=>{const k=V=>{V.key==="Escape"&&(a?u(!1):f&&p(!1))};if(a||f)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[a,f]),B.useEffect(()=>{const k=()=>{W(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]);const i1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),W(!1)):H.current&&H.current.requestFullscreen?(await H.current.requestFullscreen(),W(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),W(!0))}catch(k){console.error("Fullscreen toggle failed",k)}};return t?n?d.jsxs("div",{className:"fountain-app",ref:H,children:[i&&d.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),s(!1)},children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),d.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),s(!1)},children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),d.jsxs("p",{style:{marginTop:"1rem"},children:[d.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),d.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:d.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),s(!1)},children:"Got it"})})]})}),d.jsx("div",{className:"persistence-toolbar",children:d.jsxs("div",{className:"toolbar-group",children:[d.jsxs("button",{className:`toolbar-btn ${!l.trim()||z?"disabled":""}`,onClick:Qv,disabled:!l.trim()||z,title:"Save current script to browser storage",children:[d.jsx("i",{className:`fas ${z?"fa-spinner fa-spin":"fa-save"}`}),"Save"]}),d.jsxs("button",{className:`toolbar-btn ${y?"":"disabled"}`,onClick:Jv,disabled:!y,title:S?`Load saved script (${S.toLocaleDateString()} ${S.toLocaleTimeString()})`:"Load saved script",children:[d.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),d.jsxs("button",{className:"toolbar-btn",onClick:Zv,title:"Copy editor contents to clipboard",children:[d.jsx("i",{className:"fas fa-copy"}),"Copy"]}),d.jsxs("button",{className:"toolbar-btn",onClick:e1,title:"Paste from clipboard to editor",children:[d.jsx("i",{className:"fas fa-paste"}),"Paste"]}),d.jsxs("button",{className:`toolbar-btn danger ${l.trim()?"":"disabled"}`,onClick:t1,disabled:!l.trim(),title:"Clear editor contents",children:[d.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),d.jsxs("button",{className:`toolbar-btn danger ${y?"":"disabled"}`,onClick:Xv,disabled:!y,title:"Clear saved script from storage",children:[d.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),d.jsx("div",{className:"toolbar-divider"}),d.jsxs("button",{className:`toolbar-btn character-btn ${re.length===0?"disabled":""}`,onClick:()=>re.length>0&&p(!0),title:re.length>0?"Character List":"No characters found",disabled:re.length===0,children:[d.jsx("i",{className:"fas fa-user"}),"Characters",re.length>0&&d.jsx("span",{className:"character-count-badge",children:re.length})]}),d.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>u(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[d.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),d.jsxs("button",{className:"toolbar-btn demo-btn",onClick:()=>c(!0),title:"Show demo scripts","aria-label":"Open demo scripts modal",style:{backgroundColor:"#e75480",color:"white",marginLeft:0},children:[d.jsx("i",{className:"fas fa-download","aria-hidden":"true"}),"Demo"]}),n&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"toolbar-divider"}),d.jsxs("button",{className:"toolbar-btn",onClick:Yv,title:`Logged in as ${n.email}`,"aria-label":"Logout",style:{marginLeft:"auto"},children:[d.jsx("i",{className:"fas fa-sign-out-alt","aria-hidden":"true"}),"Logout"]})]}),S&&d.jsxs("div",{className:"last-saved",style:{marginLeft:8},children:["Last saved: ",S.toLocaleDateString()," at ",S.toLocaleTimeString()]})]})}),h&&d.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,letterSpacing:"0.03em",color:"#fff",marginBottom:"0.5em"},children:"Demo Scripts"}),d.jsx("button",{className:"modal-close",onClick:()=>c(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("style",{children:`
                .modal-content, .modal-header, .modal-body, .demo-section h2, .demo-section p {
                  color: #fff !important;
                }
                .demo-section h2 {
                  font-size: 1.3rem;
                  font-weight: 600;
                  margin-bottom: 0.25em;
                  margin-top: 1.2em;
                  letter-spacing: 0.02em;
                }
                .demo-section p {
                  padding: 0.5em 0 0.75em 0;
                  line-height: 1.6;
                  color: #b0b0b0 !important;
                }
                .demo-section .toolbar-btn {
                  background-color: #e75480;
                  color: #fff;
                  border: none;
                  font-weight: 600;
                  box-shadow: 0 2px 8px rgba(231,84,128,0.08);
                }
                .demo-section .toolbar-btn:hover {
                  background-color: #c63c6e;
                }
              `}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Film"}),d.jsx("p",{children:"A short live-action sample set in a street caf. Demonstrates panels, dialogue, and images."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/film_the_coffee_deal.fountain").then(k=>k.text()).then(k=>{o(k),ke(k),c(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Film Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Animation"}),d.jsx("p",{children:"A musical animation sample featuring a singing squirrel. Shows lyrics, musical cues, and character interaction."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/animation_the_singing_squirrel.fountain").then(k=>k.text()).then(k=>{o(k),ke(k),c(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Animation Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Advertising"}),d.jsx("p",{children:"A playful ad script for Happy Fun Ball. Demonstrates panels, mock disclaimers, and ad-style dialogue."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/ad_happy_fun_ball.fountain").then(k=>k.text()).then(k=>{o(k),ke(k),c(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Advertising Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Documentary"}),d.jsx("p",{children:"A documentary sample with voice-over, captions, and subtitles. Shows non-fiction structure and panel usage."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/documentary_voices_of_the_river.fountain").then(k=>k.text()).then(k=>{o(k),ke(k),c(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Documentary Demo"]})]})]})]})}),d.jsx("div",{className:"mobile-view-toggle",children:d.jsx("div",{className:"tabs is-centered",children:d.jsxs("ul",{children:[d.jsx("li",{className:g==="edit"?"is-active":"",children:d.jsxs("a",{onClick:()=>v("edit"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),d.jsx("span",{children:"Edit"})]})}),d.jsx("li",{className:g==="preview"?"is-active":"",children:d.jsxs("a",{onClick:()=>v("preview"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),d.jsx("span",{children:"Preview"})]})})]})})}),d.jsxs("div",{className:"editor-layout",children:[d.jsx("button",{className:`toolbar-btn fullscreen-btn ${R?"is-active":""}`,onClick:i1,title:R?"Exit fullscreen":"Enter fullscreen","aria-label":R?"Exit fullscreen":"Enter fullscreen",children:d.jsx("i",{className:`fas ${R?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),d.jsxs("div",{className:"columns is-gapless",children:[d.jsx("div",{className:`column is-half-desktop ${g==="preview"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box editor-box",children:[d.jsx("h3",{className:"title is-6",children:"Editor"}),d.jsx(Vv,{ref:b,value:l,onChange:Uv,onCursorChange:n1,placeholder:"Type your fountain screenplay here..."})]})}),d.jsx("div",{className:`column is-half-desktop ${g==="edit"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box preview-box",children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),d.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${K==="screenplay"?"is-active":""}`,onClick:()=>Me("screenplay"),"aria-pressed":K==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${K==="player"?"is-active":""}`,onClick:()=>Me("player"),"aria-pressed":K==="player",title:"Show media player",children:"Player"})]})]}),d.jsx("div",{})]}),K==="screenplay"?d.jsx("div",{className:"preview-content",ref:E,children:ee.length===0?d.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):ee.map(k=>d.jsx("div",{className:`preview-line ${k.className||""} ${k.index===w?"current-line":""}`,"data-type":k.type,"data-line-id":k.id,"data-line-index":k.index,onClick:()=>r1(k.index),style:{cursor:"pointer"},children:k.type==="image"||k.type==="audio"||k.type==="title_page"||k.type==="page_break"||k.type==="page_number"?d.jsx("div",{dangerouslySetInnerHTML:{__html:k.text}}):k.text||""},k.id))}):d.jsxs("div",{className:"media-player",ref:kt,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const k=A&&A.length>0?A[I]||A[0]:null,V=k&&typeof k.duration=="number"?k.duration:null,fe=A&&A.length?A.length:0,He=k&&k.title?String(k.title):"";let Gt="untitled";return He&&He.trim()&&(Gt=He.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),Gt||(Gt="untitled")),d.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[d.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[d.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>Gs(!0),onMouseLeave:()=>Gs(!1),onClick:()=>Gs(bn=>!bn),"aria-haspopup":"true","aria-expanded":wf,children:Gt}),k&&k.nesting&&wf?d.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[k.nesting.act?d.jsxs("div",{children:[d.jsx("strong",{children:"Act:"})," ",k.nesting.act]}):null,k.nesting.scene?d.jsxs("div",{children:[d.jsx("strong",{children:"Scene:"})," ",k.nesting.scene]}):null,k.nesting.sequence?d.jsxs("div",{children:[d.jsx("strong",{children:"Sequence:"})," ",k.nesting.sequence]}):null,!k.nesting.act&&!k.nesting.sequence&&!k.nesting.scene?d.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),d.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${I+1} / ${fe})`})]}),d.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:d.jsxs("div",{style:{color:"#999"},children:["lines ",k&&typeof k.startLine=="number"?k.startLine:"?","",k&&typeof k.endLine=="number"?k.endLine:"?"]})})]}),d.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[d.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[d.jsx("span",{style:{fontSize:"0.95rem"},children:""}),V?`${V}s`:"n/a"]}),d.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:Gv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsxs("button",{className:`toolbar-btn ${_e?"is-active":""}`,title:"Play","aria-label":"Play",onClick:Kv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[_e?d.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,""]}),d.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:qv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:$v,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:kf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""})]})]}),_e&&(()=>{const bn=A&&A.length>0?A[I]||A[0]:null,Ei=bn&&typeof bn.duration=="number"?bn.duration:null,Qs=Math.max(1e3,typeof Ei=="number"?Ei*1e3:3e3);return d.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:d.jsx("div",{className:"player-progress",style:{animationDuration:`${Qs}ms`},"aria-hidden":"true"},`player-progress-${I}-${Qs}`)})})()]})})(),(()=>{if(xf)return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const k=A&&A.length>0?A[I]||A[0]:null,V=k&&k.imageUrl?k.imageUrl:null;return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:V?d.jsx("img",{src:V,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:d.jsx("span",{children:"No image"})})})})(),(()=>{const k=A&&A.length>0?A[I]||A[0]:null,V=k&&k.audioUrl?k.audioUrl:null;return d.jsx("div",{style:{marginBottom:"0.75rem"},children:V?d.jsx("audio",{ref:X,controls:!0,src:V,style:{width:"100%"}}):d.jsx("audio",{ref:X,controls:!0,disabled:!0,style:{width:"100%"}})})})(),d.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!A||A.length===0?d.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const k=A&&A.length>0?A[I]||A[0]:null;return d.jsx("div",{children:d.jsx("div",{style:{padding:"0.5rem"},children:d.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:k&&k.blocks&&k.blocks.length>0?k.blocks.map(V=>d.jsx("div",{className:`preview-line ${V.className||""}`,dangerouslySetInnerHTML:{__html:V.text||""}},V.id)):k&&k.snippet?k.snippet.split(/\r?\n/).map((V,fe)=>d.jsx("div",{style:{whiteSpace:"pre-wrap"},children:V||""},fe)):d.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),a&&d.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Fountain.ext Format Reference"}),d.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Title Page"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",d.jsx("br",{}),"Credit: Written by",d.jsx("br",{}),"Author: John Dope",d.jsx("br",{}),"Authors: John Dope and Jane Smith",d.jsx("br",{}),"Source: Based on the novel by Famous Writer",d.jsx("br",{}),"Draft Date: October 4, 2025",d.jsx("br",{}),"Date: 10/04/2025",d.jsx("br",{}),"Contact:",d.jsx("br",{}),"John Dope",d.jsx("br",{}),"555-123-4567",d.jsx("br",{}),"john@example.com",d.jsx("br",{}),"",d.jsx("br",{}),"Literary Agent",d.jsx("br",{}),"Agency Name",d.jsx("br",{}),"agent@agency.com",d.jsx("br",{}),"Notes: This is a sample script",d.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),d.jsxs("p",{children:["Title page elements appear at the top of your script. All are optional. The parser recognizes a wide range of common title-page keys (case-insensitive). Examples include:",d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"title"}),", ",d.jsx("strong",{children:"credit"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"author"}),", ",d.jsx("strong",{children:"authors"}),", ",d.jsx("strong",{children:"writer"}),", ",d.jsx("strong",{children:"writers"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"written by"}),", ",d.jsx("strong",{children:"screenplay by"}),", ",d.jsx("strong",{children:"teleplay by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"story by"}),", ",d.jsx("strong",{children:"adaptation by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"source"}),", ",d.jsx("strong",{children:"based on"}),", ",d.jsx("strong",{children:"based on characters by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"notes"}),", ",d.jsx("strong",{children:"draft"}),", ",d.jsx("strong",{children:"draft date"}),", ",d.jsx("strong",{children:"draft #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"revision"}),", ",d.jsx("strong",{children:"revision date"}),", ",d.jsx("strong",{children:"revision color"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"date"}),", ",d.jsx("strong",{children:"contact"}),", ",d.jsx("strong",{children:"copyright"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"wga"}),", ",d.jsx("strong",{children:"wga registration"}),", ",d.jsx("strong",{children:"registration"}),", ",d.jsx("strong",{children:"registration #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"series"}),", ",d.jsx("strong",{children:"episode"}),", ",d.jsx("strong",{children:"episode title"}),", ",d.jsx("strong",{children:"showrunner"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"production"}),", ",d.jsx("strong",{children:"production company"})]})]}),"The parser accepts alternate spacing (for example ",d.jsx("code",{children:"written by:"}),') and is case-insensitive. Use "Author" for a single writer and "Authors" for multiple. Contact blocks may be multi-line (indent subsequent lines). End the title page with ',d.jsx("code",{children:"==="})," (page break)."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Scene Headings"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["EXT. PARKING LOT - DAY",d.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",d.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),d.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Characters & Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["MENTOR",d.jsx("br",{}),"Welcome to the team!",d.jsx("br",{}),d.jsx("br",{}),"@MENTOR",d.jsx("br",{}),"(power user syntax)",d.jsx("br",{}),d.jsx("br",{}),"USER #1",d.jsx("br",{}),"Thanks for having me.",d.jsx("br",{}),d.jsx("br",{}),"BOB O'SHAUNNESSY",d.jsx("br",{}),"(whispering)",d.jsx("br",{}),"This is a parenthetical."]}),d.jsxs("p",{children:["Characters are normally written in ALL CAPS (e.g., ",d.jsx("code",{children:"BOB"}),", ",d.jsx("code",{children:"DR. SMITH"}),"), but the editor also supports a power-user ",d.jsx("code",{children:"@"})," prefix for mixed-case or unusual names (for example ",d.jsx("code",{children:"@John Doe"}),"). Character matching is Unicode-aware: a character name must start with an uppercase Unicode letter and may contain Unicode letters, numbers, apostrophes (",d.jsx("code",{children:"'"}),"), hyphens (",d.jsx("code",{children:"-"}),"), spaces or tabs. The power-user ",d.jsx("code",{children:"@"})," form (",d.jsx("code",{children:"@Name"}),") allows mixed case and additional punctuation where needed. Parentheticals (for example ",d.jsx("code",{children:"(whispering)"}),") are recognized when placed immediately after a character name and are rendered as parentheticals; the lines that follow are treated as dialogue. For dual dialogue, append ",d.jsx("code",{children:"^"})," to stacked character namesthese must appear consecutively above the dialogue block. Edge cases: the lexer intentionally requires the name to begin with an uppercase Unicode letter to avoid accidental matches inside action text; use the ",d.jsx("code",{children:"@"})," prefix for names that don't follow the all-caps convention or that start with non-letter characters. This supports non-ASCII names (for example: ",d.jsx("strong",{children:"LODIE"}),", ",d.jsx("strong",{children:"UKASZ"}),", ",d.jsx("strong",{children:""}),") and matches uppercase letters across many scripts."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Dual Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["ALICE^",d.jsx("br",{}),"BOB^",d.jsx("br",{}),"CHARLIE^",d.jsx("br",{}),"I can't believe it!",d.jsx("br",{}),d.jsx("br",{}),"CHARLIE ^",d.jsx("br",{}),"DAVE ^",d.jsx("br",{}),"(disgusted)",d.jsx("br",{}),"Eew. no it's nooot!",d.jsx("br",{}),d.jsx("br",{})]}),d.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Action Lines"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Bob walks into the room and looks around nervously.",d.jsx("br",{}),d.jsx("br",{}),"The computer screen flickers to life."]}),d.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Transitions"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["FADE IN:",d.jsx("br",{}),"CUT TO:",d.jsx("br",{}),"FADE TO BLACK.",d.jsx("br",{}),"> CUT TO BLACK."]}),d.jsxs("p",{children:["Transitions control scene changes. The matcher supports a wider set of transition phrases (for example: ",d.jsx("code",{children:"FADE IN:"}),", ",d.jsx("code",{children:"FADE OUT."}),", ",d.jsx("code",{children:"CUT TO:"}),", ",d.jsx("code",{children:"SMASH CUT TO:"}),", ",d.jsx("code",{children:"MATCH CUT TO:"}),", ",d.jsx("code",{children:"DISSOLVE TO:"}),", ",d.jsx("code",{children:"WIPE TO:"}),", ",d.jsx("code",{children:"BACK TO:"}),", and other common variants). Use ",d.jsx("code",{children:">"})," for the power-user transition syntax."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Centered Text"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:[">INTERMISSION<",d.jsx("br",{}),">THE END<"]}),d.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["# Act I",d.jsx("br",{}),"## Scene 1: The Beginning",d.jsx("br",{}),"### Sequence A: Setup",d.jsx("br",{}),"#### Panel 1",d.jsx("br",{}),"02:30",d.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",d.jsx("br",{}),"[a]https://example.com/dialogue.mp3",d.jsx("br",{}),d.jsx("br",{}),"#### Panel 2",d.jsx("br",{}),"01:15",d.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),d.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Notes & Comments"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["[[This is a note for the writer]]",d.jsx("br",{}),d.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),d.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Special Elements"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["= Synopsis: Brief scene description",d.jsx("br",{}),d.jsx("br",{}),"===",d.jsx("br",{}),"(Page Break)",d.jsx("br",{}),d.jsx("br",{}),"~Lyrics:",d.jsx("br",{}),'~"Happy birthday to you"',d.jsx("br",{}),'~"Happy birthday to you"']}),d.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),f&&d.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:d.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Character List"}),d.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:""})]}),d.jsx("div",{className:"modal-body",children:re.length===0?d.jsx("p",{children:"No characters found in the script."}):d.jsx("div",{className:"character-list",children:re.map(k=>d.jsxs("div",{className:"character-item",children:[d.jsx("div",{className:"character-name",children:k}),d.jsxs("div",{className:"character-count",children:[tt.get(k)||0," dialogue lines"]})]},k))})})]})})]}):d.jsx($b,{}):d.jsx("div",{className:"fountain-app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:d.jsx("div",{children:"Loading..."})})}fu.createRoot(document.getElementById("root")).render(d.jsx(A1.StrictMode,{children:d.jsx(Qb,{})}));
